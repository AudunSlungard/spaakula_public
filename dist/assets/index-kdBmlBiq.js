(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function jE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zE(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var o=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return r[i]}})}),t}var yd={exports:{}},Na={},vd={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function BE(){if(cg)return Ne;cg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,F={};function M(L,G,fe){this.props=L,this.context=G,this.refs=F,this.updater=fe||P}M.prototype.isReactComponent={},M.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function W(){}W.prototype=M.prototype;function Q(L,G,fe){this.props=L,this.context=G,this.refs=F,this.updater=fe||P}var ie=Q.prototype=new W;ie.constructor=Q,D(ie,M.prototype),ie.isPureReactComponent=!0;var ce=Array.isArray,Ie=Object.prototype.hasOwnProperty,ye={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function R(L,G,fe){var ke,xe={},Oe=null,Ue=null;if(G!=null)for(ke in G.ref!==void 0&&(Ue=G.ref),G.key!==void 0&&(Oe=""+G.key),G)Ie.call(G,ke)&&!b.hasOwnProperty(ke)&&(xe[ke]=G[ke]);var Be=arguments.length-2;if(Be===1)xe.children=fe;else if(1<Be){for(var He=Array(Be),_t=0;_t<Be;_t++)He[_t]=arguments[_t+2];xe.children=He}if(L&&L.defaultProps)for(ke in Be=L.defaultProps,Be)xe[ke]===void 0&&(xe[ke]=Be[ke]);return{$$typeof:r,type:L,key:Oe,ref:Ue,props:xe,_owner:ye.current}}function C(L,G){return{$$typeof:r,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function k(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return G[fe]})}var N=/\/+/g;function S(L,G){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):G.toString(36)}function re(L,G,fe,ke,xe){var Oe=typeof L;(Oe==="undefined"||Oe==="boolean")&&(L=null);var Ue=!1;if(L===null)Ue=!0;else switch(Oe){case"string":case"number":Ue=!0;break;case"object":switch(L.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=L,xe=xe(Ue),L=ke===""?"."+S(Ue,0):ke,ce(xe)?(fe="",L!=null&&(fe=L.replace(N,"$&/")+"/"),re(xe,G,fe,"",function(_t){return _t})):xe!=null&&(x(xe)&&(xe=C(xe,fe+(!xe.key||Ue&&Ue.key===xe.key?"":(""+xe.key).replace(N,"$&/")+"/")+L)),G.push(xe)),1;if(Ue=0,ke=ke===""?".":ke+":",ce(L))for(var Be=0;Be<L.length;Be++){Oe=L[Be];var He=ke+S(Oe,Be);Ue+=re(Oe,G,fe,He,xe)}else if(He=I(L),typeof He=="function")for(L=He.call(L),Be=0;!(Oe=L.next()).done;)Oe=Oe.value,He=ke+S(Oe,Be++),Ue+=re(Oe,G,fe,He,xe);else if(Oe==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ue}function oe(L,G,fe){if(L==null)return L;var ke=[],xe=0;return re(L,ke,"","",function(Oe){return G.call(fe,Oe,xe++)}),ke}function Se(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var B={current:null},K={transition:null},le={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:K,ReactCurrentOwner:ye};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:oe,forEach:function(L,G,fe){oe(L,function(){G.apply(this,arguments)},fe)},count:function(L){var G=0;return oe(L,function(){G++}),G},toArray:function(L){return oe(L,function(G){return G})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ne.Component=M,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=Q,Ne.StrictMode=i,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Ne.act=ne,Ne.cloneElement=function(L,G,fe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=D({},L.props),xe=L.key,Oe=L.ref,Ue=L._owner;if(G!=null){if(G.ref!==void 0&&(Oe=G.ref,Ue=ye.current),G.key!==void 0&&(xe=""+G.key),L.type&&L.type.defaultProps)var Be=L.type.defaultProps;for(He in G)Ie.call(G,He)&&!b.hasOwnProperty(He)&&(ke[He]=G[He]===void 0&&Be!==void 0?Be[He]:G[He])}var He=arguments.length-2;if(He===1)ke.children=fe;else if(1<He){Be=Array(He);for(var _t=0;_t<He;_t++)Be[_t]=arguments[_t+2];ke.children=Be}return{$$typeof:r,type:L.type,key:xe,ref:Oe,props:ke,_owner:Ue}},Ne.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ne.createElement=R,Ne.createFactory=function(L){var G=R.bind(null,L);return G.type=L,G},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(L){return{$$typeof:d,render:L}},Ne.isValidElement=x,Ne.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:Se}},Ne.memo=function(L,G){return{$$typeof:y,type:L,compare:G===void 0?null:G}},Ne.startTransition=function(L){var G=K.transition;K.transition={};try{L()}finally{K.transition=G}},Ne.unstable_act=ne,Ne.useCallback=function(L,G){return B.current.useCallback(L,G)},Ne.useContext=function(L){return B.current.useContext(L)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(L){return B.current.useDeferredValue(L)},Ne.useEffect=function(L,G){return B.current.useEffect(L,G)},Ne.useId=function(){return B.current.useId()},Ne.useImperativeHandle=function(L,G,fe){return B.current.useImperativeHandle(L,G,fe)},Ne.useInsertionEffect=function(L,G){return B.current.useInsertionEffect(L,G)},Ne.useLayoutEffect=function(L,G){return B.current.useLayoutEffect(L,G)},Ne.useMemo=function(L,G){return B.current.useMemo(L,G)},Ne.useReducer=function(L,G,fe){return B.current.useReducer(L,G,fe)},Ne.useRef=function(L){return B.current.useRef(L)},Ne.useState=function(L){return B.current.useState(L)},Ne.useSyncExternalStore=function(L,G,fe){return B.current.useSyncExternalStore(L,G,fe)},Ne.useTransition=function(){return B.current.useTransition()},Ne.version="18.3.1",Ne}var hg;function tl(){return hg||(hg=1,vd.exports=BE()),vd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function $E(){if(dg)return Na;dg=1;var r=tl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,y){var _,w={},I=null,P=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:d,key:I,ref:P,props:w,_owner:o.current}}return Na.Fragment=t,Na.jsx=h,Na.jsxs=h,Na}var fg;function qE(){return fg||(fg=1,yd.exports=$E()),yd.exports}var J=qE(),q=tl(),Pu={},_d={exports:{}},Xt={},Ed={exports:{}},wd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function WE(){return pg||(pg=1,function(r){function e(K,le){var ne=K.length;K.push(le);e:for(;0<ne;){var L=ne-1>>>1,G=K[L];if(0<o(G,le))K[L]=le,K[ne]=G,ne=L;else break e}}function t(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var le=K[0],ne=K.pop();if(ne!==le){K[0]=ne;e:for(var L=0,G=K.length,fe=G>>>1;L<fe;){var ke=2*(L+1)-1,xe=K[ke],Oe=ke+1,Ue=K[Oe];if(0>o(xe,ne))Oe<G&&0>o(Ue,xe)?(K[L]=Ue,K[Oe]=ne,L=Oe):(K[L]=xe,K[ke]=ne,L=ke);else if(Oe<G&&0>o(Ue,ne))K[L]=Ue,K[Oe]=ne,L=Oe;else break e}}return le}function o(K,le){var ne=K.sortIndex-le.sortIndex;return ne!==0?ne:K.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],y=[],_=1,w=null,I=3,P=!1,D=!1,F=!1,M=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(K){for(var le=t(y);le!==null;){if(le.callback===null)i(y);else if(le.startTime<=K)i(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(y)}}function ce(K){if(F=!1,ie(K),!D)if(t(p)!==null)D=!0,Se(Ie);else{var le=t(y);le!==null&&B(ce,le.startTime-K)}}function Ie(K,le){D=!1,F&&(F=!1,W(R),R=-1),P=!0;var ne=I;try{for(ie(le),w=t(p);w!==null&&(!(w.expirationTime>le)||K&&!k());){var L=w.callback;if(typeof L=="function"){w.callback=null,I=w.priorityLevel;var G=L(w.expirationTime<=le);le=r.unstable_now(),typeof G=="function"?w.callback=G:w===t(p)&&i(p),ie(le)}else i(p);w=t(p)}if(w!==null)var fe=!0;else{var ke=t(y);ke!==null&&B(ce,ke.startTime-le),fe=!1}return fe}finally{w=null,I=ne,P=!1}}var ye=!1,b=null,R=-1,C=5,x=-1;function k(){return!(r.unstable_now()-x<C)}function N(){if(b!==null){var K=r.unstable_now();x=K;var le=!0;try{le=b(!0,K)}finally{le?S():(ye=!1,b=null)}}else ye=!1}var S;if(typeof Q=="function")S=function(){Q(N)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,oe=re.port2;re.port1.onmessage=N,S=function(){oe.postMessage(null)}}else S=function(){M(N,0)};function Se(K){b=K,ye||(ye=!0,S())}function B(K,le){R=M(function(){K(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){D||P||(D=!0,Se(Ie))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(K){switch(I){case 1:case 2:case 3:var le=3;break;default:le=I}var ne=I;I=le;try{return K()}finally{I=ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ne=I;I=K;try{return le()}finally{I=ne}},r.unstable_scheduleCallback=function(K,le,ne){var L=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?L+ne:L):ne=L,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,K={id:_++,callback:le,priorityLevel:K,startTime:ne,expirationTime:G,sortIndex:-1},ne>L?(K.sortIndex=ne,e(y,K),t(p)===null&&K===t(y)&&(F?(W(R),R=-1):F=!0,B(ce,ne-L))):(K.sortIndex=G,e(p,K),D||P||(D=!0,Se(Ie))),K},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(K){var le=I;return function(){var ne=I;I=le;try{return K.apply(this,arguments)}finally{I=ne}}}}(wd)),wd}var mg;function HE(){return mg||(mg=1,Ed.exports=WE()),Ed.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function KE(){if(gg)return Xt;gg=1;var r=tl(),e=HE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(n){return p.call(w,n)?!0:p.call(_,n)?!1:y.test(n)?w[n]=!0:(_[n]=!0,!1)}function P(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function D(n,s,a,c){if(s===null||typeof s>"u"||P(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(n,s,a,c,f,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new F(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];M[s]=new F(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new F(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new F(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new F(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new F(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new F(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new F(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new F(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function Q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(W,Q);M[s]=new F(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(W,Q);M[s]=new F(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(W,Q);M[s]=new F(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new F(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new F(n,1,!1,n.toLowerCase(),null,!0,!0)});function ie(n,s,a,c){var f=M.hasOwnProperty(s)?M[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(D(s,a,f,c)&&(a=null),c||f===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),ye=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),K=Symbol.iterator;function le(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var ne=Object.assign,L;function G(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var fe=!1;function ke(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=c.stack.split(`
`),E=f.length-1,A=g.length-1;1<=E&&0<=A&&f[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(f[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||f[E]!==g[A]){var O=`
`+f[E].replace(" at new "," at ");return n.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",n.displayName)),O}while(1<=E&&0<=A);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function xe(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case ye:return"Portal";case C:return"Profiler";case R:return"StrictMode";case S:return"Suspense";case re:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case oe:return s=n.displayName||null,s!==null?s:Oe(n.type)||"Memo";case Se:s=n._payload,n=n._init;try{return Oe(n(s))}catch{}}return null}function Ue(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _t(n){var s=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function or(n){n._valueTracker||(n._valueTracker=_t(n))}function ps(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xi(n,s){var a=s.checked;return ne({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ms(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Mo(n,s){s=s.checked,s!=null&&ie(n,"checked",s,!1)}function Fo(n,s){Mo(n,s);var a=Be(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?gs(n,s.type,a):s.hasOwnProperty("defaultValue")&&gs(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function pl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gs(n,s,a){(s!=="number"||Mr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ar=Array.isArray;function lr(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Uo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ys(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ar(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function vs(n,s){var a=Be(s.value),c=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function jo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ur,zo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ur.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Fr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oi=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(n){Oi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Ni[s]=Ni[n]})});function Bo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ni.hasOwnProperty(n)&&Ni[n]?(""+s).trim():s+"px"}function $o(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Bo(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var qo=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wo(n,s){if(s){if(qo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ho(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=null;function _s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Es=null,ln=null,Un=null;function ws(n){if(n=ga(n)){if(typeof Es!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ql(s),Es(n.stateNode,n.type,s))}}function jn(n){ln?Un?Un.push(n):Un=[n]:ln=n}function Ko(){if(ln){var n=ln,s=Un;if(Un=ln=null,ws(n),s)for(n=0;n<s.length;n++)ws(s[n])}}function bi(n,s){return n(s)}function Go(){}var cr=!1;function Qo(n,s,a){if(cr)return n(s,a);cr=!0;try{return bi(n,s,a)}finally{cr=!1,(ln!==null||Un!==null)&&(Go(),Ko())}}function st(n,s){var a=n.stateNode;if(a===null)return null;var c=ql(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ts=!1;if(d)try{var En={};Object.defineProperty(En,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Ts=!1}function Li(n,s,a,c,f,g,E,A,O){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Z){this.onError(Z)}}var Vi=!1,Is=null,wn=!1,Yo=null,Wc={onError:function(n){Vi=!0,Is=n}};function Ss(n,s,a,c,f,g,E,A,O){Vi=!1,Is=null,Li.apply(Wc,arguments)}function ml(n,s,a,c,f,g,E,A,O){if(Ss.apply(this,arguments),Vi){if(Vi){var $=Is;Vi=!1,Is=null}else throw Error(t(198));wn||(wn=!0,Yo=$)}}function Tn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Mi(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function In(n){if(Tn(n)!==n)throw Error(t(188))}function gl(n){var s=n.alternate;if(!s){if(s=Tn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return In(f),n;if(g===c)return In(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var E=!1,A=f.child;A;){if(A===a){E=!0,a=f,c=g;break}if(A===c){E=!0,c=f,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,c=f;break}if(A===c){E=!0,c=g,a=f;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Xo(n){return n=gl(n),n!==null?Rs(n):null}function Rs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Rs(n);if(s!==null)return s;n=n.sibling}return null}var Cs=e.unstable_scheduleCallback,Jo=e.unstable_cancelCallback,yl=e.unstable_shouldYield,Hc=e.unstable_requestPaint,Ke=e.unstable_now,vl=e.unstable_getCurrentPriorityLevel,Fi=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,Zo=e.unstable_LowPriority,_l=e.unstable_IdlePriority,Ui=null,Zt=null;function El(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Ui,n,void 0,(n.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Tl,ea=Math.log,wl=Math.LN2;function Tl(n){return n>>>=0,n===0?32:31-(ea(n)/wl|0)|0}var As=64,ks=4194304;function jr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ji(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,E=a&268435455;if(E!==0){var A=E&~f;A!==0?c=jr(A):(g&=E,g!==0&&(c=jr(g)))}else E=a&~f,E!==0?c=jr(E):g!==0&&(c=jr(g));if(c===0)return 0;if(s!==0&&s!==c&&!(s&f)&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(c&4&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-jt(s),f=1<<a,c|=n[a],s&=~f;return c}function Kc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var E=31-jt(g),A=1<<E,O=f[E];O===-1?(!(A&a)||A&c)&&(f[E]=Kc(A,s)):O<=s&&(n.expiredLanes|=A),g&=~A}}function en(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zi(){var n=As;return As<<=1,!(As&4194240)&&(As=64),n}function zr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Br(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-jt(s),n[s]=a}function We(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-jt(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function $r(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-jt(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var Le=0;function qr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Il,Ps,Sl,Rl,Cl,ta=!1,zn=[],Rt=null,Sn=null,Rn=null,Wr=new Map,cn=new Map,Bn=[],Gc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(n,s){switch(n){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Wr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(s.pointerId)}}function qt(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=ga(s),s!==null&&Ps(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Qc(n,s,a,c,f){switch(s){case"focusin":return Rt=qt(Rt,n,s,a,c,f),!0;case"dragenter":return Sn=qt(Sn,n,s,a,c,f),!0;case"mouseover":return Rn=qt(Rn,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return Wr.set(g,qt(Wr.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,cn.set(g,qt(cn.get(g)||null,n,s,a,c,f)),!0}return!1}function kl(n){var s=Hi(n.target);if(s!==null){var a=Tn(s);if(a!==null){if(s=a.tag,s===13){if(s=Mi(a),s!==null){n.blockedOn=s,Cl(n.priority,function(){Sl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=xs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Di=c,a.target.dispatchEvent(c),Di=null}else return s=ga(a),s!==null&&Ps(s),n.blockedOn=a,!1;s.shift()}return!0}function Bi(n,s,a){dr(n)&&a.delete(s)}function Pl(){ta=!1,Rt!==null&&dr(Rt)&&(Rt=null),Sn!==null&&dr(Sn)&&(Sn=null),Rn!==null&&dr(Rn)&&(Rn=null),Wr.forEach(Bi),cn.forEach(Bi)}function Cn(n,s){n.blockedOn===s&&(n.blockedOn=null,ta||(ta=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pl)))}function An(n){function s(f){return Cn(f,n)}if(0<zn.length){Cn(zn[0],n);for(var a=1;a<zn.length;a++){var c=zn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Rt!==null&&Cn(Rt,n),Sn!==null&&Cn(Sn,n),Rn!==null&&Cn(Rn,n),Wr.forEach(s),cn.forEach(s),a=0;a<Bn.length;a++)c=Bn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Bn.length&&(a=Bn[0],a.blockedOn===null);)kl(a),a.blockedOn===null&&Bn.shift()}var fr=ce.ReactCurrentBatchConfig,Hr=!0;function Xe(n,s,a,c){var f=Le,g=fr.transition;fr.transition=null;try{Le=1,na(n,s,a,c)}finally{Le=f,fr.transition=g}}function Yc(n,s,a,c){var f=Le,g=fr.transition;fr.transition=null;try{Le=4,na(n,s,a,c)}finally{Le=f,fr.transition=g}}function na(n,s,a,c){if(Hr){var f=xs(n,s,a,c);if(f===null)ah(n,s,c,$i,a),Al(n,c);else if(Qc(f,n,s,a,c))c.stopPropagation();else if(Al(n,c),s&4&&-1<Gc.indexOf(n)){for(;f!==null;){var g=ga(f);if(g!==null&&Il(g),g=xs(n,s,a,c),g===null&&ah(n,s,c,$i,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else ah(n,s,c,null,a)}}var $i=null;function xs(n,s,a,c){if($i=null,n=_s(c),n=Hi(n),n!==null)if(s=Tn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Mi(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return $i=n,null}function ra(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vl()){case Fi:return 1;case Ur:return 4;case un:case Zo:return 16;case _l:return 536870912;default:return 16}default:return 16}}var tn=null,Ns=null,Wt=null;function ia(){if(Wt)return Wt;var n,s=Ns,a=s.length,c,f="value"in tn?tn.value:tn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var E=a-n;for(c=1;c<=E&&s[a-c]===f[g-c];c++);return Wt=f.slice(n,1<c?1-c:void 0)}function Os(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function $n(){return!0}function sa(){return!1}function Ct(n){function s(a,c,f,g,E){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$n:sa,this.isPropagationStopped=sa,this}return ne(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),s}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Ct(kn),qn=ne({},kn,{view:0,detail:0}),Xc=Ct(qn),bs,pr,Kr,qi=ne({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Kr&&(Kr&&n.type==="mousemove"?(bs=n.screenX-Kr.screenX,pr=n.screenY-Kr.screenY):pr=bs=0,Kr=n),bs)},movementY:function(n){return"movementY"in n?n.movementY:pr}}),Ls=Ct(qi),oa=ne({},qi,{dataTransfer:0}),xl=Ct(oa),Vs=ne({},qn,{relatedTarget:0}),Ms=Ct(Vs),Nl=ne({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Ct(Nl),Ol=ne({},kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dl=Ct(Ol),bl=ne({},kn,{data:0}),aa=Ct(bl),Fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ll={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ll[n])?!!s[n]:!1}function Wn(){return Vl}var u=ne({},qn,{key:function(n){if(n.key){var s=Fs[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wn,charCode:function(n){return n.type==="keypress"?Os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ct(u),v=ne({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ct(v),U=ne({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wn}),H=Ct(U),ae=ne({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ct(ae),ft=ne({},qi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Ct(ft),Et=[9,13,27,32],lt=d&&"CompositionEvent"in window,hn=null;d&&"documentMode"in document&&(hn=document.documentMode);var nn=d&&"TextEvent"in window&&!hn,Wi=d&&(!lt||hn&&8<hn&&11>=hn),Us=" ",ip=!1;function sp(n,s){switch(n){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var js=!1;function F0(n,s){switch(n){case"compositionend":return op(s);case"keypress":return s.which!==32?null:(ip=!0,Us);case"textInput":return n=s.data,n===Us&&ip?null:n;default:return null}}function U0(n,s){if(js)return n==="compositionend"||!lt&&sp(n,s)?(n=ia(),Wt=Ns=tn=null,js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Wi&&s.locale!=="ko"?null:s.data;default:return null}}var j0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!j0[n.type]:s==="textarea"}function lp(n,s,a,c){jn(c),s=zl(s,"onChange"),0<s.length&&(a=new Ds("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var la=null,ua=null;function z0(n){Cp(n,0)}function Ml(n){var s=Ws(n);if(ps(s))return n}function B0(n,s){if(n==="change")return s}var up=!1;if(d){var Jc;if(d){var Zc="oninput"in document;if(!Zc){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),Zc=typeof cp.oninput=="function"}Jc=Zc}else Jc=!1;up=Jc&&(!document.documentMode||9<document.documentMode)}function hp(){la&&(la.detachEvent("onpropertychange",dp),ua=la=null)}function dp(n){if(n.propertyName==="value"&&Ml(ua)){var s=[];lp(s,ua,n,_s(n)),Qo(z0,s)}}function $0(n,s,a){n==="focusin"?(hp(),la=s,ua=a,la.attachEvent("onpropertychange",dp)):n==="focusout"&&hp()}function q0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ml(ua)}function W0(n,s){if(n==="click")return Ml(s)}function H0(n,s){if(n==="input"||n==="change")return Ml(s)}function K0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Pn=typeof Object.is=="function"?Object.is:K0;function ca(n,s){if(Pn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(s,f)||!Pn(n[f],s[f]))return!1}return!0}function fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pp(n,s){var a=fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fp(a)}}function mp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?mp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function gp(){for(var n=window,s=Mr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Mr(n.document)}return s}function eh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function G0(n){var s=gp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&mp(a.ownerDocument.documentElement,a)){if(c!==null&&eh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=pp(a,g);var E=pp(a,c);f&&E&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Q0=d&&"documentMode"in document&&11>=document.documentMode,zs=null,th=null,ha=null,nh=!1;function yp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||zs==null||zs!==Mr(c)||(c=zs,"selectionStart"in c&&eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ha&&ca(ha,c)||(ha=c,c=zl(th,"onSelect"),0<c.length&&(s=new Ds("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=zs)))}function Fl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Bs={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionend:Fl("Transition","TransitionEnd")},rh={},vp={};d&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Ul(n){if(rh[n])return rh[n];if(!Bs[n])return n;var s=Bs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in vp)return rh[n]=s[a];return n}var _p=Ul("animationend"),Ep=Ul("animationiteration"),wp=Ul("animationstart"),Tp=Ul("transitionend"),Ip=new Map,Sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(n,s){Ip.set(n,s),l(s,[n])}for(var ih=0;ih<Sp.length;ih++){var sh=Sp[ih],Y0=sh.toLowerCase(),X0=sh[0].toUpperCase()+sh.slice(1);Gr(Y0,"on"+X0)}Gr(_p,"onAnimationEnd"),Gr(Ep,"onAnimationIteration"),Gr(wp,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(Tp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J0=new Set("cancel close invalid load scroll toggle".split(" ").concat(da));function Rp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,ml(c,s,void 0,n),n.currentTarget=null}function Cp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var E=c.length-1;0<=E;E--){var A=c[E],O=A.instance,$=A.currentTarget;if(A=A.listener,O!==g&&f.isPropagationStopped())break e;Rp(f,A,$),g=O}else for(E=0;E<c.length;E++){if(A=c[E],O=A.instance,$=A.currentTarget,A=A.listener,O!==g&&f.isPropagationStopped())break e;Rp(f,A,$),g=O}}}if(wn)throw n=Yo,wn=!1,Yo=null,n}function Qe(n,s){var a=s[fh];a===void 0&&(a=s[fh]=new Set);var c=n+"__bubble";a.has(c)||(Ap(s,n,2,!1),a.add(c))}function oh(n,s,a){var c=0;s&&(c|=4),Ap(a,n,c,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function fa(n){if(!n[jl]){n[jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(J0.has(a)||oh(a,!1,n),oh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[jl]||(s[jl]=!0,oh("selectionchange",!1,s))}}function Ap(n,s,a,c){switch(ra(s)){case 1:var f=Xe;break;case 4:f=Yc;break;default:f=na}a=f.bind(null,s,a,n),f=void 0,!Ts||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function ah(n,s,a,c,f){var g=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(E===4)for(E=c.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;E=E.return}for(;A!==null;){if(E=Hi(A),E===null)return;if(O=E.tag,O===5||O===6){c=g=E;continue e}A=A.parentNode}}c=c.return}Qo(function(){var $=g,Z=_s(a),te=[];e:{var X=Ip.get(n);if(X!==void 0){var ue=Ds,pe=n;switch(n){case"keypress":if(Os(a)===0)break e;case"keydown":case"keyup":ue=m;break;case"focusin":pe="focus",ue=Ms;break;case"focusout":pe="blur",ue=Ms;break;case"beforeblur":case"afterblur":ue=Ms;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=H;break;case _p:case Ep:case wp:ue=mr;break;case Tp:ue=qe;break;case"scroll":ue=Xc;break;case"wheel":ue=Me;break;case"copy":case"cut":case"paste":ue=Dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var me=(s&4)!==0,ot=!me&&n==="scroll",j=me?X!==null?X+"Capture":null:X;me=[];for(var V=$,z;V!==null;){z=V;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,j!==null&&(se=st(V,j),se!=null&&me.push(pa(V,se,z)))),ot)break;V=V.return}0<me.length&&(X=new ue(X,pe,null,a,Z),te.push({event:X,listeners:me}))}}if(!(s&7)){e:{if(X=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",X&&a!==Di&&(pe=a.relatedTarget||a.fromElement)&&(Hi(pe)||pe[gr]))break e;if((ue||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,ue?(pe=a.relatedTarget||a.toElement,ue=$,pe=pe?Hi(pe):null,pe!==null&&(ot=Tn(pe),pe!==ot||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=$),ue!==pe)){if(me=Ls,se="onMouseLeave",j="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(me=T,se="onPointerLeave",j="onPointerEnter",V="pointer"),ot=ue==null?X:Ws(ue),z=pe==null?X:Ws(pe),X=new me(se,V+"leave",ue,a,Z),X.target=ot,X.relatedTarget=z,se=null,Hi(Z)===$&&(me=new me(j,V+"enter",pe,a,Z),me.target=z,me.relatedTarget=ot,se=me),ot=se,ue&&pe)t:{for(me=ue,j=pe,V=0,z=me;z;z=$s(z))V++;for(z=0,se=j;se;se=$s(se))z++;for(;0<V-z;)me=$s(me),V--;for(;0<z-V;)j=$s(j),z--;for(;V--;){if(me===j||j!==null&&me===j.alternate)break t;me=$s(me),j=$s(j)}me=null}else me=null;ue!==null&&kp(te,X,ue,me,!1),pe!==null&&ot!==null&&kp(te,ot,pe,me,!0)}}e:{if(X=$?Ws($):window,ue=X.nodeName&&X.nodeName.toLowerCase(),ue==="select"||ue==="input"&&X.type==="file")var ge=B0;else if(ap(X))if(up)ge=H0;else{ge=q0;var Ee=$0}else(ue=X.nodeName)&&ue.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ge=W0);if(ge&&(ge=ge(n,$))){lp(te,ge,a,Z);break e}Ee&&Ee(n,X,$),n==="focusout"&&(Ee=X._wrapperState)&&Ee.controlled&&X.type==="number"&&gs(X,"number",X.value)}switch(Ee=$?Ws($):window,n){case"focusin":(ap(Ee)||Ee.contentEditable==="true")&&(zs=Ee,th=$,ha=null);break;case"focusout":ha=th=zs=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,yp(te,a,Z);break;case"selectionchange":if(Q0)break;case"keydown":case"keyup":yp(te,a,Z)}var we;if(lt)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else js?sp(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(Wi&&a.locale!=="ko"&&(js||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&js&&(we=ia()):(tn=Z,Ns="value"in tn?tn.value:tn.textContent,js=!0)),Ee=zl($,Re),0<Ee.length&&(Re=new aa(Re,n,null,a,Z),te.push({event:Re,listeners:Ee}),we?Re.data=we:(we=op(a),we!==null&&(Re.data=we)))),(we=nn?F0(n,a):U0(n,a))&&($=zl($,"onBeforeInput"),0<$.length&&(Z=new aa("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:$}),Z.data=we))}Cp(te,s)})}function pa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function zl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=st(n,a),g!=null&&c.unshift(pa(n,g,f)),g=st(n,s),g!=null&&c.push(pa(n,g,f))),n=n.return}return c}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function kp(n,s,a,c,f){for(var g=s._reactName,E=[];a!==null&&a!==c;){var A=a,O=A.alternate,$=A.stateNode;if(O!==null&&O===c)break;A.tag===5&&$!==null&&(A=$,f?(O=st(a,g),O!=null&&E.unshift(pa(a,O,A))):f||(O=st(a,g),O!=null&&E.push(pa(a,O,A)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var Z0=/\r\n?/g,eE=/\u0000|\uFFFD/g;function Pp(n){return(typeof n=="string"?n:""+n).replace(Z0,`
`).replace(eE,"")}function Bl(n,s,a){if(s=Pp(s),Pp(n)!==s&&a)throw Error(t(425))}function $l(){}var lh=null,uh=null;function ch(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,xp=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof xp<"u"?function(n){return xp.resolve(null).then(n).catch(rE)}:hh;function rE(n){setTimeout(function(){throw n})}function dh(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),An(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);An(s)}function Qr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Np(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var qs=Math.random().toString(36).slice(2),Hn="__reactFiber$"+qs,ma="__reactProps$"+qs,gr="__reactContainer$"+qs,fh="__reactEvents$"+qs,iE="__reactListeners$"+qs,sE="__reactHandles$"+qs;function Hi(n){var s=n[Hn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[gr]||a[Hn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Np(n);n!==null;){if(a=n[Hn])return a;n=Np(n)}return s}n=a,a=n.parentNode}return null}function ga(n){return n=n[Hn]||n[gr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ws(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ql(n){return n[ma]||null}var ph=[],Hs=-1;function Yr(n){return{current:n}}function Ye(n){0>Hs||(n.current=ph[Hs],ph[Hs]=null,Hs--)}function Ge(n,s){Hs++,ph[Hs]=n.current,n.current=s}var Xr={},Ot=Yr(Xr),Ht=Yr(!1),Ki=Xr;function Ks(n,s){var a=n.type.contextTypes;if(!a)return Xr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Kt(n){return n=n.childContextTypes,n!=null}function Wl(){Ye(Ht),Ye(Ot)}function Op(n,s,a){if(Ot.current!==Xr)throw Error(t(168));Ge(Ot,s),Ge(Ht,a)}function Dp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Ue(n)||"Unknown",f));return ne({},a,c)}function Hl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xr,Ki=Ot.current,Ge(Ot,n),Ge(Ht,Ht.current),!0}function bp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Dp(n,s,Ki),c.__reactInternalMemoizedMergedChildContext=n,Ye(Ht),Ye(Ot),Ge(Ot,n)):Ye(Ht),Ge(Ht,a)}var yr=null,Kl=!1,mh=!1;function Lp(n){yr===null?yr=[n]:yr.push(n)}function oE(n){Kl=!0,Lp(n)}function Jr(){if(!mh&&yr!==null){mh=!0;var n=0,s=Le;try{var a=yr;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}yr=null,Kl=!1}catch(f){throw yr!==null&&(yr=yr.slice(n+1)),Cs(Fi,Jr),f}finally{Le=s,mh=!1}}return null}var Gs=[],Qs=0,Gl=null,Ql=0,dn=[],fn=0,Gi=null,vr=1,_r="";function Qi(n,s){Gs[Qs++]=Ql,Gs[Qs++]=Gl,Gl=n,Ql=s}function Vp(n,s,a){dn[fn++]=vr,dn[fn++]=_r,dn[fn++]=Gi,Gi=n;var c=vr;n=_r;var f=32-jt(c)-1;c&=~(1<<f),a+=1;var g=32-jt(s)+f;if(30<g){var E=f-f%5;g=(c&(1<<E)-1).toString(32),c>>=E,f-=E,vr=1<<32-jt(s)+f|a<<f|c,_r=g+n}else vr=1<<g|a<<f|c,_r=n}function gh(n){n.return!==null&&(Qi(n,1),Vp(n,1,0))}function yh(n){for(;n===Gl;)Gl=Gs[--Qs],Gs[Qs]=null,Ql=Gs[--Qs],Gs[Qs]=null;for(;n===Gi;)Gi=dn[--fn],dn[fn]=null,_r=dn[--fn],dn[fn]=null,vr=dn[--fn],dn[fn]=null}var rn=null,sn=null,Je=!1,xn=null;function Mp(n,s){var a=yn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Fp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,rn=n,sn=Qr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,rn=n,sn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Gi!==null?{id:vr,overflow:_r}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=yn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,rn=n,sn=null,!0):!1;default:return!1}}function vh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _h(n){if(Je){var s=sn;if(s){var a=s;if(!Fp(n,s)){if(vh(n))throw Error(t(418));s=Qr(a.nextSibling);var c=rn;s&&Fp(n,s)?Mp(c,a):(n.flags=n.flags&-4097|2,Je=!1,rn=n)}}else{if(vh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Je=!1,rn=n}}}function Up(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;rn=n}function Yl(n){if(n!==rn)return!1;if(!Je)return Up(n),Je=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ch(n.type,n.memoizedProps)),s&&(s=sn)){if(vh(n))throw jp(),Error(t(418));for(;s;)Mp(n,s),s=Qr(s.nextSibling)}if(Up(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){sn=Qr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}sn=null}}else sn=rn?Qr(n.stateNode.nextSibling):null;return!0}function jp(){for(var n=sn;n;)n=Qr(n.nextSibling)}function Ys(){sn=rn=null,Je=!1}function Eh(n){xn===null?xn=[n]:xn.push(n)}var aE=ce.ReactCurrentBatchConfig;function ya(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var A=f.refs;E===null?delete A[g]:A[g]=E},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Xl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function zp(n){var s=n._init;return s(n._payload)}function Bp(n){function s(j,V){if(n){var z=j.deletions;z===null?(j.deletions=[V],j.flags|=16):z.push(V)}}function a(j,V){if(!n)return null;for(;V!==null;)s(j,V),V=V.sibling;return null}function c(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function f(j,V){return j=oi(j,V),j.index=0,j.sibling=null,j}function g(j,V,z){return j.index=z,n?(z=j.alternate,z!==null?(z=z.index,z<V?(j.flags|=2,V):z):(j.flags|=2,V)):(j.flags|=1048576,V)}function E(j){return n&&j.alternate===null&&(j.flags|=2),j}function A(j,V,z,se){return V===null||V.tag!==6?(V=hd(z,j.mode,se),V.return=j,V):(V=f(V,z),V.return=j,V)}function O(j,V,z,se){var ge=z.type;return ge===b?Z(j,V,z.props.children,se,z.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&zp(ge)===V.type)?(se=f(V,z.props),se.ref=ya(j,V,z),se.return=j,se):(se=wu(z.type,z.key,z.props,null,j.mode,se),se.ref=ya(j,V,z),se.return=j,se)}function $(j,V,z,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=dd(z,j.mode,se),V.return=j,V):(V=f(V,z.children||[]),V.return=j,V)}function Z(j,V,z,se,ge){return V===null||V.tag!==7?(V=rs(z,j.mode,se,ge),V.return=j,V):(V=f(V,z),V.return=j,V)}function te(j,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=hd(""+V,j.mode,z),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ie:return z=wu(V.type,V.key,V.props,null,j.mode,z),z.ref=ya(j,null,V),z.return=j,z;case ye:return V=dd(V,j.mode,z),V.return=j,V;case Se:var se=V._init;return te(j,se(V._payload),z)}if(ar(V)||le(V))return V=rs(V,j.mode,z,null),V.return=j,V;Xl(j,V)}return null}function X(j,V,z,se){var ge=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ge!==null?null:A(j,V,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ie:return z.key===ge?O(j,V,z,se):null;case ye:return z.key===ge?$(j,V,z,se):null;case Se:return ge=z._init,X(j,V,ge(z._payload),se)}if(ar(z)||le(z))return ge!==null?null:Z(j,V,z,se,null);Xl(j,z)}return null}function ue(j,V,z,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return j=j.get(z)||null,A(V,j,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Ie:return j=j.get(se.key===null?z:se.key)||null,O(V,j,se,ge);case ye:return j=j.get(se.key===null?z:se.key)||null,$(V,j,se,ge);case Se:var Ee=se._init;return ue(j,V,z,Ee(se._payload),ge)}if(ar(se)||le(se))return j=j.get(z)||null,Z(V,j,se,ge,null);Xl(V,se)}return null}function pe(j,V,z,se){for(var ge=null,Ee=null,we=V,Re=V=0,It=null;we!==null&&Re<z.length;Re++){we.index>Re?(It=we,we=null):It=we.sibling;var ze=X(j,we,z[Re],se);if(ze===null){we===null&&(we=It);break}n&&we&&ze.alternate===null&&s(j,we),V=g(ze,V,Re),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze,we=It}if(Re===z.length)return a(j,we),Je&&Qi(j,Re),ge;if(we===null){for(;Re<z.length;Re++)we=te(j,z[Re],se),we!==null&&(V=g(we,V,Re),Ee===null?ge=we:Ee.sibling=we,Ee=we);return Je&&Qi(j,Re),ge}for(we=c(j,we);Re<z.length;Re++)It=ue(we,j,Re,z[Re],se),It!==null&&(n&&It.alternate!==null&&we.delete(It.key===null?Re:It.key),V=g(It,V,Re),Ee===null?ge=It:Ee.sibling=It,Ee=It);return n&&we.forEach(function(ai){return s(j,ai)}),Je&&Qi(j,Re),ge}function me(j,V,z,se){var ge=le(z);if(typeof ge!="function")throw Error(t(150));if(z=ge.call(z),z==null)throw Error(t(151));for(var Ee=ge=null,we=V,Re=V=0,It=null,ze=z.next();we!==null&&!ze.done;Re++,ze=z.next()){we.index>Re?(It=we,we=null):It=we.sibling;var ai=X(j,we,ze.value,se);if(ai===null){we===null&&(we=It);break}n&&we&&ai.alternate===null&&s(j,we),V=g(ai,V,Re),Ee===null?ge=ai:Ee.sibling=ai,Ee=ai,we=It}if(ze.done)return a(j,we),Je&&Qi(j,Re),ge;if(we===null){for(;!ze.done;Re++,ze=z.next())ze=te(j,ze.value,se),ze!==null&&(V=g(ze,V,Re),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze);return Je&&Qi(j,Re),ge}for(we=c(j,we);!ze.done;Re++,ze=z.next())ze=ue(we,j,Re,ze.value,se),ze!==null&&(n&&ze.alternate!==null&&we.delete(ze.key===null?Re:ze.key),V=g(ze,V,Re),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze);return n&&we.forEach(function(UE){return s(j,UE)}),Je&&Qi(j,Re),ge}function ot(j,V,z,se){if(typeof z=="object"&&z!==null&&z.type===b&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Ie:e:{for(var ge=z.key,Ee=V;Ee!==null;){if(Ee.key===ge){if(ge=z.type,ge===b){if(Ee.tag===7){a(j,Ee.sibling),V=f(Ee,z.props.children),V.return=j,j=V;break e}}else if(Ee.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&zp(ge)===Ee.type){a(j,Ee.sibling),V=f(Ee,z.props),V.ref=ya(j,Ee,z),V.return=j,j=V;break e}a(j,Ee);break}else s(j,Ee);Ee=Ee.sibling}z.type===b?(V=rs(z.props.children,j.mode,se,z.key),V.return=j,j=V):(se=wu(z.type,z.key,z.props,null,j.mode,se),se.ref=ya(j,V,z),se.return=j,j=se)}return E(j);case ye:e:{for(Ee=z.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(j,V.sibling),V=f(V,z.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else s(j,V);V=V.sibling}V=dd(z,j.mode,se),V.return=j,j=V}return E(j);case Se:return Ee=z._init,ot(j,V,Ee(z._payload),se)}if(ar(z))return pe(j,V,z,se);if(le(z))return me(j,V,z,se);Xl(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(j,V.sibling),V=f(V,z),V.return=j,j=V):(a(j,V),V=hd(z,j.mode,se),V.return=j,j=V),E(j)):a(j,V)}return ot}var Xs=Bp(!0),$p=Bp(!1),Jl=Yr(null),Zl=null,Js=null,wh=null;function Th(){wh=Js=Zl=null}function Ih(n){var s=Jl.current;Ye(Jl),n._currentValue=s}function Sh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Zs(n,s){Zl=n,wh=Js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Gt=!0),n.firstContext=null)}function pn(n){var s=n._currentValue;if(wh!==n)if(n={context:n,memoizedValue:s,next:null},Js===null){if(Zl===null)throw Error(t(308));Js=n,Zl.dependencies={lanes:0,firstContext:n}}else Js=Js.next=n;return s}var Yi=null;function Rh(n){Yi===null?Yi=[n]:Yi.push(n)}function qp(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Rh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Er(n,c)}function Er(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Zr=!1;function Ch(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ei(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,je&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Er(n,a)}return f=c.interleaved,f===null?(s.next=s,Rh(c)):(s.next=f.next,f.next=s),c.interleaved=s,Er(n,a)}function eu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,$r(n,a)}}function Hp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function tu(n,s,a,c){var f=n.updateQueue;Zr=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var O=A,$=O.next;O.next=null,E===null?g=$:E.next=$,E=O;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==E&&(A===null?Z.firstBaseUpdate=$:A.next=$,Z.lastBaseUpdate=O))}if(g!==null){var te=f.baseState;E=0,Z=$=O=null,A=g;do{var X=A.lane,ue=A.eventTime;if((c&X)===X){Z!==null&&(Z=Z.next={eventTime:ue,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var pe=n,me=A;switch(X=s,ue=a,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){te=pe.call(ue,te,X);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,X=typeof pe=="function"?pe.call(ue,te,X):pe,X==null)break e;te=ne({},te,X);break e;case 2:Zr=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=f.effects,X===null?f.effects=[A]:X.push(A))}else ue={eventTime:ue,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?($=Z=ue,O=te):Z=Z.next=ue,E|=X;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;X=A,A=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(Z===null&&(O=te),f.baseState=O,f.firstBaseUpdate=$,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Zi|=E,n.lanes=E,n.memoizedState=te}}function Kp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var va={},Kn=Yr(va),_a=Yr(va),Ea=Yr(va);function Xi(n){if(n===va)throw Error(t(174));return n}function Ah(n,s){switch(Ge(Ea,s),Ge(_a,n),Ge(Kn,va),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:dt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=dt(s,n)}Ye(Kn),Ge(Kn,s)}function eo(){Ye(Kn),Ye(_a),Ye(Ea)}function Gp(n){Xi(Ea.current);var s=Xi(Kn.current),a=dt(s,n.type);s!==a&&(Ge(_a,n),Ge(Kn,a))}function kh(n){_a.current===n&&(Ye(Kn),Ye(_a))}var et=Yr(0);function nu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ph=[];function xh(){for(var n=0;n<Ph.length;n++)Ph[n]._workInProgressVersionPrimary=null;Ph.length=0}var ru=ce.ReactCurrentDispatcher,Nh=ce.ReactCurrentBatchConfig,Ji=0,tt=null,pt=null,wt=null,iu=!1,wa=!1,Ta=0,lE=0;function Dt(){throw Error(t(321))}function Oh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Pn(n[a],s[a]))return!1;return!0}function Dh(n,s,a,c,f,g){if(Ji=g,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ru.current=n===null||n.memoizedState===null?dE:fE,n=a(c,f),wa){g=0;do{if(wa=!1,Ta=0,25<=g)throw Error(t(301));g+=1,wt=pt=null,s.updateQueue=null,ru.current=pE,n=a(c,f)}while(wa)}if(ru.current=au,s=pt!==null&&pt.next!==null,Ji=0,wt=pt=tt=null,iu=!1,s)throw Error(t(300));return n}function bh(){var n=Ta!==0;return Ta=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?tt.memoizedState=wt=n:wt=wt.next=n,wt}function mn(){if(pt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var s=wt===null?tt.memoizedState:wt.next;if(s!==null)wt=s,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?tt.memoizedState=wt=n:wt=wt.next=n}return wt}function Ia(n,s){return typeof s=="function"?s(n):s}function Lh(n){var s=mn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=pt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var A=E=null,O=null,$=g;do{var Z=$.lane;if((Ji&Z)===Z)O!==null&&(O=O.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var te={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};O===null?(A=O=te,E=c):O=O.next=te,tt.lanes|=Z,Zi|=Z}$=$.next}while($!==null&&$!==g);O===null?E=c:O.next=A,Pn(c,s.memoizedState)||(Gt=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=O,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,tt.lanes|=g,Zi|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Vh(n){var s=mn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Pn(g,s.memoizedState)||(Gt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function Qp(){}function Yp(n,s){var a=tt,c=mn(),f=s(),g=!Pn(c.memoizedState,f);if(g&&(c.memoizedState=f,Gt=!0),c=c.queue,Mh(Zp.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Sa(9,Jp.bind(null,a,c,f,s),void 0,null),Tt===null)throw Error(t(349));Ji&30||Xp(a,s,f)}return f}function Xp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Jp(n,s,a,c){s.value=a,s.getSnapshot=c,em(s)&&tm(n)}function Zp(n,s,a){return a(function(){em(s)&&tm(n)})}function em(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Pn(n,a)}catch{return!0}}function tm(n){var s=Er(n,1);s!==null&&bn(s,n,1,-1)}function nm(n){var s=Gn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:n},s.queue=n,n=n.dispatch=hE.bind(null,tt,n),[s.memoizedState,n]}function Sa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function rm(){return mn().memoizedState}function su(n,s,a,c){var f=Gn();tt.flags|=n,f.memoizedState=Sa(1|s,a,void 0,c===void 0?null:c)}function ou(n,s,a,c){var f=mn();c=c===void 0?null:c;var g=void 0;if(pt!==null){var E=pt.memoizedState;if(g=E.destroy,c!==null&&Oh(c,E.deps)){f.memoizedState=Sa(s,a,g,c);return}}tt.flags|=n,f.memoizedState=Sa(1|s,a,g,c)}function im(n,s){return su(8390656,8,n,s)}function Mh(n,s){return ou(2048,8,n,s)}function sm(n,s){return ou(4,2,n,s)}function om(n,s){return ou(4,4,n,s)}function am(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function lm(n,s,a){return a=a!=null?a.concat([n]):null,ou(4,4,am.bind(null,s,n),a)}function Fh(){}function um(n,s){var a=mn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Oh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function cm(n,s){var a=mn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Oh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function hm(n,s,a){return Ji&21?(Pn(a,s)||(a=zi(),tt.lanes|=a,Zi|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a)}function uE(n,s){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=Nh.transition;Nh.transition={};try{n(!1),s()}finally{Le=a,Nh.transition=c}}function dm(){return mn().memoizedState}function cE(n,s,a){var c=ii(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},fm(n))pm(s,a);else if(a=qp(n,s,a,c),a!==null){var f=$t();bn(a,n,c,f),mm(a,s,c)}}function hE(n,s,a){var c=ii(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(fm(n))pm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,a);if(f.hasEagerState=!0,f.eagerState=A,Pn(A,E)){var O=s.interleaved;O===null?(f.next=f,Rh(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}a=qp(n,s,f,c),a!==null&&(f=$t(),bn(a,n,c,f),mm(a,s,c))}}function fm(n){var s=n.alternate;return n===tt||s!==null&&s===tt}function pm(n,s){wa=iu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function mm(n,s,a){if(a&4194240){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,$r(n,a)}}var au={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},dE={readContext:pn,useCallback:function(n,s){return Gn().memoizedState=[n,s===void 0?null:s],n},useContext:pn,useEffect:im,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,su(4194308,4,am.bind(null,s,n),a)},useLayoutEffect:function(n,s){return su(4194308,4,n,s)},useInsertionEffect:function(n,s){return su(4,2,n,s)},useMemo:function(n,s){var a=Gn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Gn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=cE.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var s=Gn();return n={current:n},s.memoizedState=n},useState:nm,useDebugValue:Fh,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=nm(!1),s=n[0];return n=uE.bind(null,n[1]),Gn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=tt,f=Gn();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Tt===null)throw Error(t(349));Ji&30||Xp(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,im(Zp.bind(null,c,g,n),[n]),c.flags|=2048,Sa(9,Jp.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=Gn(),s=Tt.identifierPrefix;if(Je){var a=_r,c=vr;a=(c&~(1<<32-jt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ta++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=lE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},fE={readContext:pn,useCallback:um,useContext:pn,useEffect:Mh,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:om,useMemo:cm,useReducer:Lh,useRef:rm,useState:function(){return Lh(Ia)},useDebugValue:Fh,useDeferredValue:function(n){var s=mn();return hm(s,pt.memoizedState,n)},useTransition:function(){var n=Lh(Ia)[0],s=mn().memoizedState;return[n,s]},useMutableSource:Qp,useSyncExternalStore:Yp,useId:dm,unstable_isNewReconciler:!1},pE={readContext:pn,useCallback:um,useContext:pn,useEffect:Mh,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:om,useMemo:cm,useReducer:Vh,useRef:rm,useState:function(){return Vh(Ia)},useDebugValue:Fh,useDeferredValue:function(n){var s=mn();return pt===null?s.memoizedState=n:hm(s,pt.memoizedState,n)},useTransition:function(){var n=Vh(Ia)[0],s=mn().memoizedState;return[n,s]},useMutableSource:Qp,useSyncExternalStore:Yp,useId:dm,unstable_isNewReconciler:!1};function Nn(n,s){if(n&&n.defaultProps){s=ne({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Uh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ne({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var lu={isMounted:function(n){return(n=n._reactInternals)?Tn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=$t(),f=ii(n),g=wr(c,f);g.payload=s,a!=null&&(g.callback=a),s=ei(n,g,f),s!==null&&(bn(s,n,f,c),eu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=$t(),f=ii(n),g=wr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ei(n,g,f),s!==null&&(bn(s,n,f,c),eu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=$t(),c=ii(n),f=wr(a,c);f.tag=2,s!=null&&(f.callback=s),s=ei(n,f,c),s!==null&&(bn(s,n,c,a),eu(s,n,c))}};function gm(n,s,a,c,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,E):s.prototype&&s.prototype.isPureReactComponent?!ca(a,c)||!ca(f,g):!0}function ym(n,s,a){var c=!1,f=Xr,g=s.contextType;return typeof g=="object"&&g!==null?g=pn(g):(f=Kt(s)?Ki:Ot.current,c=s.contextTypes,g=(c=c!=null)?Ks(n,f):Xr),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=lu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&lu.enqueueReplaceState(s,s.state,null)}function jh(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Ch(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=pn(g):(g=Kt(s)?Ki:Ot.current,f.context=Ks(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Uh(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&lu.enqueueReplaceState(f,f.state,null),tu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function to(n,s){try{var a="",c=s;do a+=xe(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function zh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Bh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var mE=typeof WeakMap=="function"?WeakMap:Map;function _m(n,s,a){a=wr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){mu||(mu=!0,rd=c),Bh(n,s)},a}function Em(n,s,a){a=wr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Bh(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Bh(n,s),typeof c!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function wm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new mE;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=PE.bind(null,n,s,a),s.then(n,n))}function Tm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Im(n,s,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=wr(-1,1),s.tag=2,ei(a,s,1))),a.lanes|=1),n)}var gE=ce.ReactCurrentOwner,Gt=!1;function Bt(n,s,a,c){s.child=n===null?$p(s,null,a,c):Xs(s,n.child,a,c)}function Sm(n,s,a,c,f){a=a.render;var g=s.ref;return Zs(s,f),c=Dh(n,s,a,c,g,f),a=bh(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Tr(n,s,f)):(Je&&a&&gh(s),s.flags|=1,Bt(n,s,c,f),s.child)}function Rm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!cd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Cm(n,s,g,c,f)):(n=wu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!(n.lanes&f)){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:ca,a(E,c)&&n.ref===s.ref)return Tr(n,s,f)}return s.flags|=1,n=oi(g,c),n.ref=s.ref,n.return=s,s.child=n}function Cm(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(ca(g,c)&&n.ref===s.ref)if(Gt=!1,s.pendingProps=c=g,(n.lanes&f)!==0)n.flags&131072&&(Gt=!0);else return s.lanes=n.lanes,Tr(n,s,f)}return $h(n,s,a,c,f)}function Am(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(ro,on),on|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ge(ro,on),on|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ge(ro,on),on|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Ge(ro,on),on|=c;return Bt(n,s,f,a),s.child}function km(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function $h(n,s,a,c,f){var g=Kt(a)?Ki:Ot.current;return g=Ks(s,g),Zs(s,f),a=Dh(n,s,a,c,g,f),c=bh(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Tr(n,s,f)):(Je&&c&&gh(s),s.flags|=1,Bt(n,s,a,f),s.child)}function Pm(n,s,a,c,f){if(Kt(a)){var g=!0;Hl(s)}else g=!1;if(Zs(s,f),s.stateNode===null)cu(n,s),ym(s,a,c),jh(s,a,c,f),c=!0;else if(n===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var O=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=pn($):($=Kt(a)?Ki:Ot.current,$=Ks(s,$));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||O!==$)&&vm(s,E,c,$),Zr=!1;var X=s.memoizedState;E.state=X,tu(s,c,E,f),O=s.memoizedState,A!==c||X!==O||Ht.current||Zr?(typeof Z=="function"&&(Uh(s,a,Z,c),O=s.memoizedState),(A=Zr||gm(s,a,A,c,X,O,$))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=O),E.props=c,E.state=O,E.context=$,c=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,Wp(n,s),A=s.memoizedProps,$=s.type===s.elementType?A:Nn(s.type,A),E.props=$,te=s.pendingProps,X=E.context,O=a.contextType,typeof O=="object"&&O!==null?O=pn(O):(O=Kt(a)?Ki:Ot.current,O=Ks(s,O));var ue=a.getDerivedStateFromProps;(Z=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==te||X!==O)&&vm(s,E,c,O),Zr=!1,X=s.memoizedState,E.state=X,tu(s,c,E,f);var pe=s.memoizedState;A!==te||X!==pe||Ht.current||Zr?(typeof ue=="function"&&(Uh(s,a,ue,c),pe=s.memoizedState),($=Zr||gm(s,a,$,c,X,pe,O)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,pe,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,pe,O)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=pe),E.props=c,E.state=pe,E.context=O,c=$):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return qh(n,s,a,c,g,f)}function qh(n,s,a,c,f,g){km(n,s);var E=(s.flags&128)!==0;if(!c&&!E)return f&&bp(s,a,!1),Tr(n,s,g);c=s.stateNode,gE.current=s;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&E?(s.child=Xs(s,n.child,null,g),s.child=Xs(s,null,A,g)):Bt(n,s,A,g),s.memoizedState=c.state,f&&bp(s,a,!0),s.child}function xm(n){var s=n.stateNode;s.pendingContext?Op(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Op(n,s.context,!1),Ah(n,s.containerInfo)}function Nm(n,s,a,c,f){return Ys(),Eh(f),s.flags|=256,Bt(n,s,a,c),s.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function Hh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Om(n,s,a){var c=s.pendingProps,f=et.current,g=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ge(et,f&1),n===null)return _h(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=c.children,n=c.fallback,g?(c=s.mode,g=s.child,E={mode:"hidden",children:E},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Tu(E,c,0,null),n=rs(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Hh(a),s.memoizedState=Wh,n):Kh(s,E));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return yE(n,s,E,c,A,f,a);if(g){g=c.fallback,E=s.mode,f=n.child,A=f.sibling;var O={mode:"hidden",children:c.children};return!(E&1)&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=O,s.deletions=null):(c=oi(f,O),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=oi(A,g):(g=rs(g,E,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,E=n.child.memoizedState,E=E===null?Hh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=n.childLanes&~a,s.memoizedState=Wh,c}return g=n.child,n=g.sibling,c=oi(g,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Kh(n,s){return s=Tu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function uu(n,s,a,c){return c!==null&&Eh(c),Xs(s,n.child,null,a),n=Kh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function yE(n,s,a,c,f,g,E){if(a)return s.flags&256?(s.flags&=-257,c=zh(Error(t(422))),uu(n,s,E,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Tu({mode:"visible",children:c.children},f,0,null),g=rs(g,f,E,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,s.mode&1&&Xs(s,n.child,null,E),s.child.memoizedState=Hh(E),s.memoizedState=Wh,g);if(!(s.mode&1))return uu(n,s,E,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=zh(g,c,void 0),uu(n,s,E,c)}if(A=(E&n.childLanes)!==0,Gt||A){if(c=Tt,c!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|E)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Er(n,f),bn(c,n,f,-1))}return ud(),c=zh(Error(t(421))),uu(n,s,E,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=xE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,sn=Qr(f.nextSibling),rn=s,Je=!0,xn=null,n!==null&&(dn[fn++]=vr,dn[fn++]=_r,dn[fn++]=Gi,vr=n.id,_r=n.overflow,Gi=s),s=Kh(s,c.children),s.flags|=4096,s)}function Dm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Sh(n.return,s,a)}function Gh(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function bm(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(Bt(n,s,c.children,a),c=et.current,c&2)c=c&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dm(n,a,s);else if(n.tag===19)Dm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ge(et,c),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&nu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Gh(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&nu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Gh(s,!0,a,null,g);break;case"together":Gh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cu(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Tr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Zi|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=oi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=oi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function vE(n,s,a){switch(s.tag){case 3:xm(s),Ys();break;case 5:Gp(s);break;case 1:Kt(s.type)&&Hl(s);break;case 4:Ah(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Ge(Jl,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ge(et,et.current&1),s.flags|=128,null):a&s.child.childLanes?Om(n,s,a):(Ge(et,et.current&1),n=Tr(n,s,a),n!==null?n.sibling:null);Ge(et,et.current&1);break;case 19:if(c=(a&s.childLanes)!==0,n.flags&128){if(c)return bm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ge(et,et.current),c)break;return null;case 22:case 23:return s.lanes=0,Am(n,s,a)}return Tr(n,s,a)}var Lm,Qh,Vm,Mm;Lm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Qh=function(){},Vm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,Xi(Kn.current);var g=null;switch(a){case"input":f=xi(n,f),c=xi(n,c),g=[];break;case"select":f=ne({},f,{value:void 0}),c=ne({},c,{value:void 0}),g=[];break;case"textarea":f=Uo(n,f),c=Uo(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=$l)}Wo(a,c);var E;a=null;for($ in f)if(!c.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var A=f[$];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var O=c[$];if(A=f!=null?f[$]:void 0,c.hasOwnProperty($)&&O!==A&&(O!=null||A!=null))if($==="style")if(A){for(E in A)!A.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in O)O.hasOwnProperty(E)&&A[E]!==O[E]&&(a||(a={}),a[E]=O[E])}else a||(g||(g=[]),g.push($,a)),a=O;else $==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,A=A?A.__html:void 0,O!=null&&A!==O&&(g=g||[]).push($,O)):$==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push($,""+O):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(O!=null&&$==="onScroll"&&Qe("scroll",n),g||A===O||(g=[])):(g=g||[]).push($,O))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},Mm=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ra(n,s){if(!Je)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function _E(n,s,a){var c=s.pendingProps;switch(yh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return Kt(s.type)&&Wl(),bt(s),null;case 3:return c=s.stateNode,eo(),Ye(Ht),Ye(Ot),xh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Yl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,xn!==null&&(od(xn),xn=null))),Qh(n,s),bt(s),null;case 5:kh(s);var f=Xi(Ea.current);if(a=s.type,n!==null&&s.stateNode!=null)Vm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return bt(s),null}if(n=Xi(Kn.current),Yl(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Hn]=s,c[ma]=g,n=(s.mode&1)!==0,a){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(f=0;f<da.length;f++)Qe(da[f],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":ms(c,g),Qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Qe("invalid",c);break;case"textarea":ys(c,g),Qe("invalid",c)}Wo(a,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&Bl(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Bl(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Qe("scroll",c)}switch(a){case"input":or(c),pl(c,g,!0);break;case"textarea":or(c),jo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=$l)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[Hn]=s,n[ma]=c,Lm(n,s,!1,!1),s.stateNode=n;e:{switch(E=Ho(a,c),a){case"dialog":Qe("cancel",n),Qe("close",n),f=c;break;case"iframe":case"object":case"embed":Qe("load",n),f=c;break;case"video":case"audio":for(f=0;f<da.length;f++)Qe(da[f],n);f=c;break;case"source":Qe("error",n),f=c;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),f=c;break;case"details":Qe("toggle",n),f=c;break;case"input":ms(n,c),f=xi(n,c),Qe("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ne({},c,{value:void 0}),Qe("invalid",n);break;case"textarea":ys(n,c),f=Uo(n,c),Qe("invalid",n);break;default:f=c}Wo(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var O=A[g];g==="style"?$o(n,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&zo(n,O)):g==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&Fr(n,O):typeof O=="number"&&Fr(n,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&Qe("scroll",n):O!=null&&ie(n,g,O,E))}switch(a){case"input":or(n),pl(n,c,!1);break;case"textarea":or(n),jo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Be(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?lr(n,!!c.multiple,g,!1):c.defaultValue!=null&&lr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=$l)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(n&&s.stateNode!=null)Mm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Xi(Ea.current),Xi(Kn.current),Yl(s)){if(c=s.stateNode,a=s.memoizedProps,c[Hn]=s,(g=c.nodeValue!==a)&&(n=rn,n!==null))switch(n.tag){case 3:Bl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bl(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Hn]=s,s.stateNode=c}return bt(s),null;case 13:if(Ye(et),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&sn!==null&&s.mode&1&&!(s.flags&128))jp(),Ys(),s.flags|=98560,g=!1;else if(g=Yl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Hn]=s}else Ys(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bt(s),g=!1}else xn!==null&&(od(xn),xn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(n===null||et.current&1?mt===0&&(mt=3):ud())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return eo(),Qh(n,s),n===null&&fa(s.stateNode.containerInfo),bt(s),null;case 10:return Ih(s.type._context),bt(s),null;case 17:return Kt(s.type)&&Wl(),bt(s),null;case 19:if(Ye(et),g=s.memoizedState,g===null)return bt(s),null;if(c=(s.flags&128)!==0,E=g.rendering,E===null)if(c)Ra(g,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(E=nu(n),E!==null){for(s.flags|=128,Ra(g,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,n=E.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(et,et.current&1|2),s.child}n=n.sibling}g.tail!==null&&Ke()>io&&(s.flags|=128,c=!0,Ra(g,!1),s.lanes=4194304)}else{if(!c)if(n=nu(E),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ra(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Je)return bt(s),null}else 2*Ke()-g.renderingStartTime>io&&a!==1073741824&&(s.flags|=128,c=!0,Ra(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ke(),s.sibling=null,a=et.current,Ge(et,c?a&1|2:a&1),s):(bt(s),null);case 22:case 23:return ld(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?on&1073741824&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function EE(n,s){switch(yh(s),s.tag){case 1:return Kt(s.type)&&Wl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return eo(),Ye(Ht),Ye(Ot),xh(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return kh(s),null;case 13:if(Ye(et),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ys()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ye(et),null;case 4:return eo(),null;case 10:return Ih(s.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var hu=!1,Lt=!1,wE=typeof WeakSet=="function"?WeakSet:Set,de=null;function no(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(n,s,c)}else a.current=null}function Yh(n,s,a){try{a()}catch(c){it(n,s,c)}}var Fm=!1;function TE(n,s){if(lh=Hr,n=gp(),eh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,O=-1,$=0,Z=0,te=n,X=null;t:for(;;){for(var ue;te!==a||f!==0&&te.nodeType!==3||(A=E+f),te!==g||c!==0&&te.nodeType!==3||(O=E+c),te.nodeType===3&&(E+=te.nodeValue.length),(ue=te.firstChild)!==null;)X=te,te=ue;for(;;){if(te===n)break t;if(X===a&&++$===f&&(A=E),X===g&&++Z===c&&(O=E),(ue=te.nextSibling)!==null)break;te=X,X=te.parentNode}te=ue}a=A===-1||O===-1?null:{start:A,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:n,selectionRange:a},Hr=!1,de=s;de!==null;)if(s=de,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,de=n;else for(;de!==null;){s=de;try{var pe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ot=pe.memoizedState,j=s.stateNode,V=j.getSnapshotBeforeUpdate(s.elementType===s.type?me:Nn(s.type,me),ot);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){it(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,de=n;break}de=s.return}return pe=Fm,Fm=!1,pe}function Ca(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Yh(s,a,g)}f=f.next}while(f!==c)}}function du(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Xh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Um(n){var s=n.alternate;s!==null&&(n.alternate=null,Um(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Hn],delete s[ma],delete s[fh],delete s[iE],delete s[sE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jm(n){return n.tag===5||n.tag===3||n.tag===4}function zm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=$l));else if(c!==4&&(n=n.child,n!==null))for(Jh(n,s,a),n=n.sibling;n!==null;)Jh(n,s,a),n=n.sibling}function Zh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Zh(n,s,a),n=n.sibling;n!==null;)Zh(n,s,a),n=n.sibling}var At=null,On=!1;function ti(n,s,a){for(a=a.child;a!==null;)Bm(n,s,a),a=a.sibling}function Bm(n,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Ui,a)}catch{}switch(a.tag){case 5:Lt||no(a,s);case 6:var c=At,f=On;At=null,ti(n,s,a),At=c,On=f,At!==null&&(On?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(On?(n=At,a=a.stateNode,n.nodeType===8?dh(n.parentNode,a):n.nodeType===1&&dh(n,a),An(n)):dh(At,a.stateNode));break;case 4:c=At,f=On,At=a.stateNode.containerInfo,On=!0,ti(n,s,a),At=c,On=f;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&(g&2||g&4)&&Yh(a,s,E),f=f.next}while(f!==c)}ti(n,s,a);break;case 1:if(!Lt&&(no(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){it(a,s,A)}ti(n,s,a);break;case 21:ti(n,s,a);break;case 22:a.mode&1?(Lt=(c=Lt)||a.memoizedState!==null,ti(n,s,a),Lt=c):ti(n,s,a);break;default:ti(n,s,a)}}function $m(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new wE),s.forEach(function(c){var f=NE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Dn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:At=A.stateNode,On=!1;break e;case 3:At=A.stateNode.containerInfo,On=!0;break e;case 4:At=A.stateNode.containerInfo,On=!0;break e}A=A.return}if(At===null)throw Error(t(160));Bm(g,E,f),At=null,On=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch($){it(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)qm(s,n),s=s.sibling}function qm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Dn(s,n),Qn(n),c&4){try{Ca(3,n,n.return),du(3,n)}catch(me){it(n,n.return,me)}try{Ca(5,n,n.return)}catch(me){it(n,n.return,me)}}break;case 1:Dn(s,n),Qn(n),c&512&&a!==null&&no(a,a.return);break;case 5:if(Dn(s,n),Qn(n),c&512&&a!==null&&no(a,a.return),n.flags&32){var f=n.stateNode;try{Fr(f,"")}catch(me){it(n,n.return,me)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,E=a!==null?a.memoizedProps:g,A=n.type,O=n.updateQueue;if(n.updateQueue=null,O!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Mo(f,g),Ho(A,E);var $=Ho(A,g);for(E=0;E<O.length;E+=2){var Z=O[E],te=O[E+1];Z==="style"?$o(f,te):Z==="dangerouslySetInnerHTML"?zo(f,te):Z==="children"?Fr(f,te):ie(f,Z,te,$)}switch(A){case"input":Fo(f,g);break;case"textarea":vs(f,g);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?lr(f,!!g.multiple,ue,!1):X!==!!g.multiple&&(g.defaultValue!=null?lr(f,!!g.multiple,g.defaultValue,!0):lr(f,!!g.multiple,g.multiple?[]:"",!1))}f[ma]=g}catch(me){it(n,n.return,me)}}break;case 6:if(Dn(s,n),Qn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(me){it(n,n.return,me)}}break;case 3:if(Dn(s,n),Qn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{An(s.containerInfo)}catch(me){it(n,n.return,me)}break;case 4:Dn(s,n),Qn(n);break;case 13:Dn(s,n),Qn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(nd=Ke())),c&4&&$m(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=($=Lt)||Z,Dn(s,n),Lt=$):Dn(s,n),Qn(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!Z&&n.mode&1)for(de=n,Z=n.child;Z!==null;){for(te=de=Z;de!==null;){switch(X=de,ue=X.child,X.tag){case 0:case 11:case 14:case 15:Ca(4,X,X.return);break;case 1:no(X,X.return);var pe=X.stateNode;if(typeof pe.componentWillUnmount=="function"){c=X,a=X.return;try{s=c,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(me){it(c,a,me)}}break;case 5:no(X,X.return);break;case 22:if(X.memoizedState!==null){Km(te);continue}}ue!==null?(ue.return=X,de=ue):Km(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{f=te.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=te.stateNode,O=te.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,A.style.display=Bo("display",E))}catch(me){it(n,n.return,me)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(me){it(n,n.return,me)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Dn(s,n),Qn(n),c&4&&$m(n);break;case 21:break;default:Dn(s,n),Qn(n)}}function Qn(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(jm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Fr(f,""),c.flags&=-33);var g=zm(n);Zh(n,g,f);break;case 3:case 4:var E=c.stateNode.containerInfo,A=zm(n);Jh(n,A,E);break;default:throw Error(t(161))}}catch(O){it(n,n.return,O)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function IE(n,s,a){de=n,Wm(n)}function Wm(n,s,a){for(var c=(n.mode&1)!==0;de!==null;){var f=de,g=f.child;if(f.tag===22&&c){var E=f.memoizedState!==null||hu;if(!E){var A=f.alternate,O=A!==null&&A.memoizedState!==null||Lt;A=hu;var $=Lt;if(hu=E,(Lt=O)&&!$)for(de=f;de!==null;)E=de,O=E.child,E.tag===22&&E.memoizedState!==null?Gm(f):O!==null?(O.return=E,de=O):Gm(f);for(;g!==null;)de=g,Wm(g),g=g.sibling;de=f,hu=A,Lt=$}Hm(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,de=g):Hm(n)}}function Hm(n){for(;de!==null;){var s=de;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Lt||du(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Lt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Nn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Kp(s,g,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Kp(s,E,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&An(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||s.flags&512&&Xh(s)}catch(X){it(s,s.return,X)}}if(s===n){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function Km(n){for(;de!==null;){var s=de;if(s===n){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function Gm(n){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{du(4,s)}catch(O){it(s,a,O)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(O){it(s,f,O)}}var g=s.return;try{Xh(s)}catch(O){it(s,g,O)}break;case 5:var E=s.return;try{Xh(s)}catch(O){it(s,E,O)}}}catch(O){it(s,s.return,O)}if(s===n){de=null;break}var A=s.sibling;if(A!==null){A.return=s.return,de=A;break}de=s.return}}var SE=Math.ceil,fu=ce.ReactCurrentDispatcher,ed=ce.ReactCurrentOwner,gn=ce.ReactCurrentBatchConfig,je=0,Tt=null,ut=null,kt=0,on=0,ro=Yr(0),mt=0,Aa=null,Zi=0,pu=0,td=0,ka=null,Qt=null,nd=0,io=1/0,Ir=null,mu=!1,rd=null,ni=null,gu=!1,ri=null,yu=0,Pa=0,id=null,vu=-1,_u=0;function $t(){return je&6?Ke():vu!==-1?vu:vu=Ke()}function ii(n){return n.mode&1?je&2&&kt!==0?kt&-kt:aE.transition!==null?(_u===0&&(_u=zi()),_u):(n=Le,n!==0||(n=window.event,n=n===void 0?16:ra(n.type)),n):1}function bn(n,s,a,c){if(50<Pa)throw Pa=0,id=null,Error(t(185));Br(n,a,c),(!(je&2)||n!==Tt)&&(n===Tt&&(!(je&2)&&(pu|=a),mt===4&&si(n,kt)),Yt(n,c),a===1&&je===0&&!(s.mode&1)&&(io=Ke()+500,Kl&&Jr()))}function Yt(n,s){var a=n.callbackNode;hr(n,s);var c=ji(n,n===Tt?kt:0);if(c===0)a!==null&&Jo(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Jo(a),s===1)n.tag===0?oE(Ym.bind(null,n)):Lp(Ym.bind(null,n)),nE(function(){!(je&6)&&Jr()}),a=null;else{switch(qr(c)){case 1:a=Fi;break;case 4:a=Ur;break;case 16:a=un;break;case 536870912:a=_l;break;default:a=un}a=ig(a,Qm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Qm(n,s){if(vu=-1,_u=0,je&6)throw Error(t(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var c=ji(n,n===Tt?kt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||s)s=Eu(n,c);else{s=c;var f=je;je|=2;var g=Jm();(Tt!==n||kt!==s)&&(Ir=null,io=Ke()+500,ts(n,s));do try{AE();break}catch(A){Xm(n,A)}while(!0);Th(),fu.current=g,je=f,ut!==null?s=0:(Tt=null,kt=0,s=mt)}if(s!==0){if(s===2&&(f=en(n),f!==0&&(c=f,s=sd(n,f))),s===1)throw a=Aa,ts(n,0),si(n,c),Yt(n,Ke()),a;if(s===6)si(n,c);else{if(f=n.current.alternate,!(c&30)&&!RE(f)&&(s=Eu(n,c),s===2&&(g=en(n),g!==0&&(c=g,s=sd(n,g))),s===1))throw a=Aa,ts(n,0),si(n,c),Yt(n,Ke()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ns(n,Qt,Ir);break;case 3:if(si(n,c),(c&130023424)===c&&(s=nd+500-Ke(),10<s)){if(ji(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){$t(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=hh(ns.bind(null,n,Qt,Ir),s);break}ns(n,Qt,Ir);break;case 4:if(si(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var E=31-jt(c);g=1<<E,E=s[E],E>f&&(f=E),c&=~g}if(c=f,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*SE(c/1960))-c,10<c){n.timeoutHandle=hh(ns.bind(null,n,Qt,Ir),c);break}ns(n,Qt,Ir);break;case 5:ns(n,Qt,Ir);break;default:throw Error(t(329))}}}return Yt(n,Ke()),n.callbackNode===a?Qm.bind(null,n):null}function sd(n,s){var a=ka;return n.current.memoizedState.isDehydrated&&(ts(n,s).flags|=256),n=Eu(n,s),n!==2&&(s=Qt,Qt=a,s!==null&&od(s)),n}function od(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function RE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Pn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function si(n,s){for(s&=~td,s&=~pu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-jt(s),c=1<<a;n[a]=-1,s&=~c}}function Ym(n){if(je&6)throw Error(t(327));so();var s=ji(n,0);if(!(s&1))return Yt(n,Ke()),null;var a=Eu(n,s);if(n.tag!==0&&a===2){var c=en(n);c!==0&&(s=c,a=sd(n,c))}if(a===1)throw a=Aa,ts(n,0),si(n,s),Yt(n,Ke()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ns(n,Qt,Ir),Yt(n,Ke()),null}function ad(n,s){var a=je;je|=1;try{return n(s)}finally{je=a,je===0&&(io=Ke()+500,Kl&&Jr())}}function es(n){ri!==null&&ri.tag===0&&!(je&6)&&so();var s=je;je|=1;var a=gn.transition,c=Le;try{if(gn.transition=null,Le=1,n)return n()}finally{Le=c,gn.transition=a,je=s,!(je&6)&&Jr()}}function ld(){on=ro.current,Ye(ro)}function ts(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,tE(a)),ut!==null)for(a=ut.return;a!==null;){var c=a;switch(yh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Wl();break;case 3:eo(),Ye(Ht),Ye(Ot),xh();break;case 5:kh(c);break;case 4:eo();break;case 13:Ye(et);break;case 19:Ye(et);break;case 10:Ih(c.type._context);break;case 22:case 23:ld()}a=a.return}if(Tt=n,ut=n=oi(n.current,null),kt=on=s,mt=0,Aa=null,td=pu=Zi=0,Qt=ka=null,Yi!==null){for(s=0;s<Yi.length;s++)if(a=Yi[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var E=g.next;g.next=f,c.next=E}a.pending=c}Yi=null}return n}function Xm(n,s){do{var a=ut;try{if(Th(),ru.current=au,iu){for(var c=tt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}iu=!1}if(Ji=0,wt=pt=tt=null,wa=!1,Ta=0,ed.current=null,a===null||a.return===null){mt=1,Aa=s,ut=null;break}e:{var g=n,E=a.return,A=a,O=s;if(s=kt,A.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var $=O,Z=A,te=Z.tag;if(!(Z.mode&1)&&(te===0||te===11||te===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ue=Tm(E);if(ue!==null){ue.flags&=-257,Im(ue,E,A,g,s),ue.mode&1&&wm(g,$,s),s=ue,O=$;var pe=s.updateQueue;if(pe===null){var me=new Set;me.add(O),s.updateQueue=me}else pe.add(O);break e}else{if(!(s&1)){wm(g,$,s),ud();break e}O=Error(t(426))}}else if(Je&&A.mode&1){var ot=Tm(E);if(ot!==null){!(ot.flags&65536)&&(ot.flags|=256),Im(ot,E,A,g,s),Eh(to(O,A));break e}}g=O=to(O,A),mt!==4&&(mt=2),ka===null?ka=[g]:ka.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var j=_m(g,O,s);Hp(g,j);break e;case 1:A=O;var V=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ni===null||!ni.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=Em(g,A,s);Hp(g,se);break e}}g=g.return}while(g!==null)}eg(a)}catch(ge){s=ge,ut===a&&a!==null&&(ut=a=a.return);continue}break}while(!0)}function Jm(){var n=fu.current;return fu.current=au,n===null?au:n}function ud(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(Zi&268435455)&&!(pu&268435455)||si(Tt,kt)}function Eu(n,s){var a=je;je|=2;var c=Jm();(Tt!==n||kt!==s)&&(Ir=null,ts(n,s));do try{CE();break}catch(f){Xm(n,f)}while(!0);if(Th(),je=a,fu.current=c,ut!==null)throw Error(t(261));return Tt=null,kt=0,mt}function CE(){for(;ut!==null;)Zm(ut)}function AE(){for(;ut!==null&&!yl();)Zm(ut)}function Zm(n){var s=rg(n.alternate,n,on);n.memoizedProps=n.pendingProps,s===null?eg(n):ut=s,ed.current=null}function eg(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=EE(a,s),a!==null){a.flags&=32767,ut=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,ut=null;return}}else if(a=_E(a,s,on),a!==null){ut=a;return}if(s=s.sibling,s!==null){ut=s;return}ut=s=n}while(s!==null);mt===0&&(mt=5)}function ns(n,s,a){var c=Le,f=gn.transition;try{gn.transition=null,Le=1,kE(n,s,a,c)}finally{gn.transition=f,Le=c}return null}function kE(n,s,a,c){do so();while(ri!==null);if(je&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(We(n,g),n===Tt&&(ut=Tt=null,kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||gu||(gu=!0,ig(un,function(){return so(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=gn.transition,gn.transition=null;var E=Le;Le=1;var A=je;je|=4,ed.current=null,TE(n,a),qm(a,n),G0(uh),Hr=!!lh,uh=lh=null,n.current=a,IE(a),Hc(),je=A,Le=E,gn.transition=g}else n.current=a;if(gu&&(gu=!1,ri=n,yu=f),g=n.pendingLanes,g===0&&(ni=null),El(a.stateNode),Yt(n,Ke()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(mu)throw mu=!1,n=rd,rd=null,n;return yu&1&&n.tag!==0&&so(),g=n.pendingLanes,g&1?n===id?Pa++:(Pa=0,id=n):Pa=0,Jr(),null}function so(){if(ri!==null){var n=qr(yu),s=gn.transition,a=Le;try{if(gn.transition=null,Le=16>n?16:n,ri===null)var c=!1;else{if(n=ri,ri=null,yu=0,je&6)throw Error(t(331));var f=je;for(je|=4,de=n.current;de!==null;){var g=de,E=g.child;if(de.flags&16){var A=g.deletions;if(A!==null){for(var O=0;O<A.length;O++){var $=A[O];for(de=$;de!==null;){var Z=de;switch(Z.tag){case 0:case 11:case 15:Ca(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,de=te;else for(;de!==null;){Z=de;var X=Z.sibling,ue=Z.return;if(Um(Z),Z===$){de=null;break}if(X!==null){X.return=ue,de=X;break}de=ue}}}var pe=g.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ot=me.sibling;me.sibling=null,me=ot}while(me!==null)}}de=g}}if(g.subtreeFlags&2064&&E!==null)E.return=g,de=E;else e:for(;de!==null;){if(g=de,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ca(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,de=j;break e}de=g.return}}var V=n.current;for(de=V;de!==null;){E=de;var z=E.child;if(E.subtreeFlags&2064&&z!==null)z.return=E,de=z;else e:for(E=V;de!==null;){if(A=de,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:du(9,A)}}catch(ge){it(A,A.return,ge)}if(A===E){de=null;break e}var se=A.sibling;if(se!==null){se.return=A.return,de=se;break e}de=A.return}}if(je=f,Jr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Ui,n)}catch{}c=!0}return c}finally{Le=a,gn.transition=s}}return!1}function tg(n,s,a){s=to(a,s),s=_m(n,s,1),n=ei(n,s,1),s=$t(),n!==null&&(Br(n,1,s),Yt(n,s))}function it(n,s,a){if(n.tag===3)tg(n,n,a);else for(;s!==null;){if(s.tag===3){tg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ni===null||!ni.has(c))){n=to(a,n),n=Em(s,n,1),s=ei(s,n,1),n=$t(),s!==null&&(Br(s,1,n),Yt(s,n));break}}s=s.return}}function PE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=$t(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(kt&a)===a&&(mt===4||mt===3&&(kt&130023424)===kt&&500>Ke()-nd?ts(n,0):td|=a),Yt(n,s)}function ng(n,s){s===0&&(n.mode&1?(s=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):s=1);var a=$t();n=Er(n,s),n!==null&&(Br(n,s,a),Yt(n,a))}function xE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ng(n,a)}function NE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ng(n,a)}var rg;rg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ht.current)Gt=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Gt=!1,vE(n,s,a);Gt=!!(n.flags&131072)}else Gt=!1,Je&&s.flags&1048576&&Vp(s,Ql,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;cu(n,s),n=s.pendingProps;var f=Ks(s,Ot.current);Zs(s,a),f=Dh(null,s,c,n,f,a);var g=bh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Kt(c)?(g=!0,Hl(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ch(s),f.updater=lu,s.stateNode=f,f._reactInternals=s,jh(s,c,n,a),s=qh(null,s,c,!0,g,a)):(s.tag=0,Je&&g&&gh(s),Bt(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(cu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=DE(c),n=Nn(c,n),f){case 0:s=$h(null,s,c,n,a);break e;case 1:s=Pm(null,s,c,n,a);break e;case 11:s=Sm(null,s,c,n,a);break e;case 14:s=Rm(null,s,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Nn(c,f),$h(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Nn(c,f),Pm(n,s,c,f,a);case 3:e:{if(xm(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,Wp(n,s),tu(s,c,null,a);var E=s.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=to(Error(t(423)),s),s=Nm(n,s,c,a,f);break e}else if(c!==f){f=to(Error(t(424)),s),s=Nm(n,s,c,a,f);break e}else for(sn=Qr(s.stateNode.containerInfo.firstChild),rn=s,Je=!0,xn=null,a=$p(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ys(),c===f){s=Tr(n,s,a);break e}Bt(n,s,c,a)}s=s.child}return s;case 5:return Gp(s),n===null&&_h(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,E=f.children,ch(c,f)?E=null:g!==null&&ch(c,g)&&(s.flags|=32),km(n,s),Bt(n,s,E,a),s.child;case 6:return n===null&&_h(s),null;case 13:return Om(n,s,a);case 4:return Ah(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Xs(s,null,c,a):Bt(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Nn(c,f),Sm(n,s,c,f,a);case 7:return Bt(n,s,s.pendingProps,a),s.child;case 8:return Bt(n,s,s.pendingProps.children,a),s.child;case 12:return Bt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,E=f.value,Ge(Jl,c._currentValue),c._currentValue=E,g!==null)if(Pn(g.value,E)){if(g.children===f.children&&!Ht.current){s=Tr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var O=A.firstContext;O!==null;){if(O.context===c){if(g.tag===1){O=wr(-1,a&-a),O.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?O.next=O:(O.next=Z.next,Z.next=O),$.pending=O}}g.lanes|=a,O=g.alternate,O!==null&&(O.lanes|=a),Sh(g.return,a,s),A.lanes|=a;break}O=O.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),Sh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Bt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,Zs(s,a),f=pn(f),c=c(f),s.flags|=1,Bt(n,s,c,a),s.child;case 14:return c=s.type,f=Nn(c,s.pendingProps),f=Nn(c.type,f),Rm(n,s,c,f,a);case 15:return Cm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Nn(c,f),cu(n,s),s.tag=1,Kt(c)?(n=!0,Hl(s)):n=!1,Zs(s,a),ym(s,c,f),jh(s,c,f,a),qh(null,s,c,!0,n,a);case 19:return bm(n,s,a);case 22:return Am(n,s,a)}throw Error(t(156,s.tag))};function ig(n,s){return Cs(n,s)}function OE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,s,a,c){return new OE(n,s,a,c)}function cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function DE(n){if(typeof n=="function")return cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===oe)return 14}return 2}function oi(n,s){var a=n.alternate;return a===null?(a=yn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function wu(n,s,a,c,f,g){var E=2;if(c=n,typeof n=="function")cd(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case b:return rs(a.children,f,g,s);case R:E=8,f|=8;break;case C:return n=yn(12,a,s,f|2),n.elementType=C,n.lanes=g,n;case S:return n=yn(13,a,s,f),n.elementType=S,n.lanes=g,n;case re:return n=yn(19,a,s,f),n.elementType=re,n.lanes=g,n;case B:return Tu(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:E=10;break e;case k:E=9;break e;case N:E=11;break e;case oe:E=14;break e;case Se:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=yn(E,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function rs(n,s,a,c){return n=yn(7,n,c,s),n.lanes=a,n}function Tu(n,s,a,c){return n=yn(22,n,c,s),n.elementType=B,n.lanes=a,n.stateNode={isHidden:!1},n}function hd(n,s,a){return n=yn(6,n,null,s),n.lanes=a,n}function dd(n,s,a){return s=yn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function bE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zr(0),this.expirationTimes=zr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function fd(n,s,a,c,f,g,E,A,O){return n=new bE(n,s,a,A,O),s===1?(s=1,g===!0&&(s|=8)):s=0,g=yn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ch(g),n}function LE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function sg(n){if(!n)return Xr;n=n._reactInternals;e:{if(Tn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return Dp(n,a,s)}return s}function og(n,s,a,c,f,g,E,A,O){return n=fd(a,c,!0,n,f,g,E,A,O),n.context=sg(null),a=n.current,c=$t(),f=ii(a),g=wr(c,f),g.callback=s??null,ei(a,g,f),n.current.lanes=f,Br(n,f,c),Yt(n,c),n}function Iu(n,s,a,c){var f=s.current,g=$t(),E=ii(f);return a=sg(a),s.context===null?s.context=a:s.pendingContext=a,s=wr(g,E),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ei(f,s,E),n!==null&&(bn(n,f,E,g),eu(n,f,E)),E}function Su(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ag(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function pd(n,s){ag(n,s),(n=n.alternate)&&ag(n,s)}var lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function md(n){this._internalRoot=n}Ru.prototype.render=md.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Iu(n,s,null,null)},Ru.prototype.unmount=md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;es(function(){Iu(null,n,null,null)}),s[gr]=null}};function Ru(n){this._internalRoot=n}Ru.prototype.unstable_scheduleHydration=function(n){if(n){var s=Rl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Bn.length&&s!==0&&s<Bn[a].priority;a++);Bn.splice(a,0,n),a===0&&kl(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ug(){}function VE(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var $=Su(E);g.call($)}}var E=og(s,c,n,0,null,!1,!1,"",ug);return n._reactRootContainer=E,n[gr]=E.current,fa(n.nodeType===8?n.parentNode:n),es(),E}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var $=Su(O);A.call($)}}var O=fd(n,0,!1,null,null,!1,!1,"",ug);return n._reactRootContainer=O,n[gr]=O.current,fa(n.nodeType===8?n.parentNode:n),es(function(){Iu(s,O,a,c)}),O}function Au(n,s,a,c,f){var g=a._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var A=f;f=function(){var O=Su(E);A.call(O)}}Iu(s,E,n,f)}else E=VE(a,s,n,f,c);return Su(E)}Il=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=jr(s.pendingLanes);a!==0&&($r(s,a|1),Yt(s,Ke()),!(je&6)&&(io=Ke()+500,Jr()))}break;case 13:es(function(){var c=Er(n,1);if(c!==null){var f=$t();bn(c,n,1,f)}}),pd(n,1)}},Ps=function(n){if(n.tag===13){var s=Er(n,134217728);if(s!==null){var a=$t();bn(s,n,134217728,a)}pd(n,134217728)}},Sl=function(n){if(n.tag===13){var s=ii(n),a=Er(n,s);if(a!==null){var c=$t();bn(a,n,s,c)}pd(n,s)}},Rl=function(){return Le},Cl=function(n,s){var a=Le;try{return Le=n,s()}finally{Le=a}},Es=function(n,s,a){switch(s){case"input":if(Fo(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=ql(c);if(!f)throw Error(t(90));ps(c),Fo(c,f)}}}break;case"textarea":vs(n,a);break;case"select":s=a.value,s!=null&&lr(n,!!a.multiple,s,!1)}},bi=ad,Go=es;var ME={usingClientEntryPoint:!1,Events:[ga,Ws,ql,jn,Ko,ad]},xa={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Xo(n),n===null?null:n.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Ui=ku.inject(FE),Zt=ku}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ME,Xt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(s))throw Error(t(200));return LE(n,s,null,a)},Xt.createRoot=function(n,s){if(!gd(n))throw Error(t(299));var a=!1,c="",f=lg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=fd(n,1,!1,null,null,a,!1,c,f),n[gr]=s.current,fa(n.nodeType===8?n.parentNode:n),new md(s)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Xo(s),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return es(n)},Xt.hydrate=function(n,s,a){if(!Cu(s))throw Error(t(200));return Au(null,n,s,!0,a)},Xt.hydrateRoot=function(n,s,a){if(!gd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",E=lg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=og(s,null,n,1,a??null,f,!1,g,E),n[gr]=s.current,fa(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Ru(s)},Xt.render=function(n,s,a){if(!Cu(s))throw Error(t(200));return Au(null,n,s,!1,a)},Xt.unmountComponentAtNode=function(n){if(!Cu(n))throw Error(t(40));return n._reactRootContainer?(es(function(){Au(null,null,n,!1,function(){n._reactRootContainer=null,n[gr]=null})}),!0):!1},Xt.unstable_batchedUpdates=ad,Xt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Cu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Au(n,s,a,!1,c)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var yg;function ff(){if(yg)return _d.exports;yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_d.exports=KE(),_d.exports}var vg;function GE(){if(vg)return Pu;vg=1;var r=ff();return Pu.createRoot=r.createRoot,Pu.hydrateRoot=r.hydrateRoot,Pu}var QE=GE(),Oa={},_g;function YE(){if(_g)return Oa;_g=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.parse=h,Oa.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,P){const D=new l,F=I.length;if(F<2)return D;const M=(P==null?void 0:P.decode)||_;let W=0;do{const Q=I.indexOf("=",W);if(Q===-1)break;const ie=I.indexOf(";",W),ce=ie===-1?F:ie;if(Q>ce){W=I.lastIndexOf(";",Q-1)+1;continue}const Ie=d(I,W,Q),ye=p(I,Q,Ie),b=I.slice(Ie,ye);if(D[b]===void 0){let R=d(I,Q+1,ce),C=p(I,ce,R);const x=M(I.slice(R,C));D[b]=x}W=ce+1}while(W<F);return D}function d(I,P,D){do{const F=I.charCodeAt(P);if(F!==32&&F!==9)return P}while(++P<D);return D}function p(I,P,D){for(;P>D;){const F=I.charCodeAt(--P);if(F!==32&&F!==9)return P+1}return D}function y(I,P,D){const F=(D==null?void 0:D.encode)||encodeURIComponent;if(!r.test(I))throw new TypeError(`argument name is invalid: ${I}`);const M=F(P);if(!e.test(M))throw new TypeError(`argument val is invalid: ${P}`);let W=I+"="+M;if(!D)return W;if(D.maxAge!==void 0){if(!Number.isInteger(D.maxAge))throw new TypeError(`option maxAge is invalid: ${D.maxAge}`);W+="; Max-Age="+D.maxAge}if(D.domain){if(!t.test(D.domain))throw new TypeError(`option domain is invalid: ${D.domain}`);W+="; Domain="+D.domain}if(D.path){if(!i.test(D.path))throw new TypeError(`option path is invalid: ${D.path}`);W+="; Path="+D.path}if(D.expires){if(!w(D.expires)||!Number.isFinite(D.expires.valueOf()))throw new TypeError(`option expires is invalid: ${D.expires}`);W+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(W+="; HttpOnly"),D.secure&&(W+="; Secure"),D.partitioned&&(W+="; Partitioned"),D.priority)switch(typeof D.priority=="string"?D.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${D.priority}`)}if(D.sameSite)switch(typeof D.sameSite=="string"?D.sameSite.toLowerCase():D.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${D.sameSite}`)}return W}function _(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function w(I){return o.call(I)==="[object Date]"}return Oa}YE();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Eg="popstate";function XE(r={}){function e(i,o){let{pathname:l,search:h,hash:d}=i.location;return jd("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Ha(o)}return ZE(e,t,null,r)}function nt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JE(){return Math.random().toString(36).substring(2,10)}function wg(r,e){return{usr:r.state,key:r.key,idx:e}}function jd(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ko(e):e,state:t,key:e&&e.key||i||JE()}}function Ha({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ko(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function ZE(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d="POP",p=null,y=_();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function _(){return(h.state||{idx:null}).idx}function w(){d="POP";let M=_(),W=M==null?null:M-y;y=M,p&&p({action:d,location:F.location,delta:W})}function I(M,W){d="PUSH";let Q=jd(F.location,M,W);y=_()+1;let ie=wg(Q,y),ce=F.createHref(Q);try{h.pushState(ie,"",ce)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;o.location.assign(ce)}l&&p&&p({action:d,location:F.location,delta:1})}function P(M,W){d="REPLACE";let Q=jd(F.location,M,W);y=_();let ie=wg(Q,y),ce=F.createHref(Q);h.replaceState(ie,"",ce),l&&p&&p({action:d,location:F.location,delta:0})}function D(M){let W=o.location.origin!=="null"?o.location.origin:o.location.href,Q=typeof M=="string"?M:Ha(M);return Q=Q.replace(/ $/,"%20"),nt(W,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,W)}let F={get action(){return d},get location(){return r(o,h)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Eg,w),p=M,()=>{o.removeEventListener(Eg,w),p=null}},createHref(M){return e(o,M)},createURL:D,encodeLocation(M){let W=D(M);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:P,go(M){return h.go(M)}};return F}function tv(r,e,t="/"){return ew(r,e,t,!1)}function ew(r,e,t,i){let o=typeof e=="string"?ko(e):e,l=Ti(o.pathname||"/",t);if(l==null)return null;let h=nv(r);tw(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let y=dw(l);d=cw(h[p],y,i)}return d}function nv(r,e=[],t=[],i=""){let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(nt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=kr([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(nt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),nv(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:lw(y,l.index),routesMeta:_})};return r.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of rv(l.path))o(l,h,p)}),e}function rv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=rv(i.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function tw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:uw(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var nw=/^:[\w-]+$/,rw=3,iw=2,sw=1,ow=10,aw=-2,Tg=r=>r==="*";function lw(r,e){let t=r.split("/"),i=t.length;return t.some(Tg)&&(i+=aw),e&&(i+=iw),t.filter(o=>!Tg(o)).reduce((o,l)=>o+(nw.test(l)?rw:l===""?sw:ow),i)}function uw(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function cw(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",h=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=ec({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),I=p.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=ec({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:kr([l,w.pathname]),pathnameBase:gw(kr([l,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(l=kr([l,w.pathnameBase]))}return h}function ec(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=hw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:w},I)=>{if(_==="*"){let D=d[I]||"";h=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const P=d[I];return w&&!P?y[_]=void 0:y[_]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function hw(r,e=!1,t=!0){nr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function dw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ti(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function fw(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ko(r):r;return{pathname:t?t.startsWith("/")?t:pw(t,e):e,search:yw(i),hash:vw(o)}}function pw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Td(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iv(r){let e=mw(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function sv(r,e,t,i=!1){let o;typeof r=="string"?o=ko(r):(o={...r},nt(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let w=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}d=w>=0?e[w]:"/"}let p=fw(o,d),y=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}var kr=r=>r.join("/").replace(/\/\/+/g,"/"),gw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),yw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,vw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function _w(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var ov=["POST","PUT","PATCH","DELETE"];new Set(ov);var Ew=["GET",...ov];new Set(Ew);var Po=q.createContext(null);Po.displayName="DataRouter";var Ic=q.createContext(null);Ic.displayName="DataRouterState";var av=q.createContext({isTransitioning:!1});av.displayName="ViewTransition";var ww=q.createContext(new Map);ww.displayName="Fetchers";var Tw=q.createContext(null);Tw.displayName="Await";var sr=q.createContext(null);sr.displayName="Navigation";var nl=q.createContext(null);nl.displayName="Location";var br=q.createContext({outlet:null,matches:[],isDataRoute:!1});br.displayName="Route";var pf=q.createContext(null);pf.displayName="RouteError";function Iw(r,{relative:e}={}){nt(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=q.useContext(sr),{hash:o,pathname:l,search:h}=il(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:kr([t,l])),i.createHref({pathname:d,search:h,hash:o})}function rl(){return q.useContext(nl)!=null}function ki(){return nt(rl(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(nl).location}var lv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uv(r){q.useContext(sr).static||q.useLayoutEffect(r)}function mf(){let{isDataRoute:r}=q.useContext(br);return r?Vw():Sw()}function Sw(){nt(rl(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(Po),{basename:e,navigator:t}=q.useContext(sr),{matches:i}=q.useContext(br),{pathname:o}=ki(),l=JSON.stringify(iv(i)),h=q.useRef(!1);return uv(()=>{h.current=!0}),q.useCallback((p,y={})=>{if(nr(h.current,lv),!h.current)return;if(typeof p=="number"){t.go(p);return}let _=sv(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:kr([e,_.pathname])),(y.replace?t.replace:t.push)(_,y.state,y)},[e,t,l,o,r])}q.createContext(null);function il(r,{relative:e}={}){let{matches:t}=q.useContext(br),{pathname:i}=ki(),o=JSON.stringify(iv(t));return q.useMemo(()=>sv(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function Rw(r,e){return cv(r,e)}function cv(r,e,t,i){var W;nt(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(sr),{matches:l}=q.useContext(br),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let Q=_&&_.path||"";hv(p,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let w=ki(),I;if(e){let Q=typeof e=="string"?ko(e):e;nt(y==="/"||((W=Q.pathname)==null?void 0:W.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),I=Q}else I=w;let P=I.pathname||"/",D=P;if(y!=="/"){let Q=y.replace(/^\//,"").split("/");D="/"+P.replace(/^\//,"").split("/").slice(Q.length).join("/")}let F=tv(r,{pathname:D});nr(_||F!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),nr(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=xw(F&&F.map(Q=>Object.assign({},Q,{params:Object.assign({},d,Q.params),pathname:kr([y,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?y:kr([y,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),l,t,i);return e&&M?q.createElement(nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},M):M}function Cw(){let r=Lw(),e=_w(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,h)}var Aw=q.createElement(Cw,null),kw=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(br.Provider,{value:this.props.routeContext},q.createElement(pf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pw({routeContext:r,match:e,children:t}){let i=q.useContext(Po);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(br.Provider,{value:r},t)}function xw(r,e=[],t=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);nt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:_,errors:w}=t,I=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||I){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,y,_)=>{let w,I=!1,P=null,D=null;t&&(w=l&&y.route.id?l[y.route.id]:void 0,P=y.route.errorElement||Aw,h&&(d<0&&_===0?(hv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,D=null):d===_&&(I=!0,D=y.route.hydrateFallbackElement||null)));let F=e.concat(o.slice(0,_+1)),M=()=>{let W;return w?W=P:I?W=D:y.route.Component?W=q.createElement(y.route.Component,null):y.route.element?W=y.route.element:W=p,q.createElement(Pw,{match:y,routeContext:{outlet:p,matches:F,isDataRoute:t!=null},children:W})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?q.createElement(kw,{location:t.location,revalidation:t.revalidation,component:P,error:w,children:M(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):M()},null)}function gf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nw(r){let e=q.useContext(Po);return nt(e,gf(r)),e}function Ow(r){let e=q.useContext(Ic);return nt(e,gf(r)),e}function Dw(r){let e=q.useContext(br);return nt(e,gf(r)),e}function yf(r){let e=Dw(r),t=e.matches[e.matches.length-1];return nt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function bw(){return yf("useRouteId")}function Lw(){var i;let r=q.useContext(pf),e=Ow("useRouteError"),t=yf("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function Vw(){let{router:r}=Nw("useNavigate"),e=yf("useNavigate"),t=q.useRef(!1);return uv(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{nr(t.current,lv),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Ig={};function hv(r,e,t){!e&&!Ig[r]&&(Ig[r]=!0,nr(!1,t))}q.memo(Mw);function Mw({routes:r,future:e,state:t}){return cv(r,void 0,t,e)}function zd(r){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Fw({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){nt(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=ko(t));let{pathname:p="/",search:y="",hash:_="",state:w=null,key:I="default"}=t,P=q.useMemo(()=>{let D=Ti(p,h);return D==null?null:{location:{pathname:D,search:y,hash:_,state:w,key:I},navigationType:i}},[h,p,y,_,w,I,i]);return nr(P!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:q.createElement(sr.Provider,{value:d},q.createElement(nl.Provider,{children:e,value:P}))}function Uw({children:r,location:e}){return Rw(Bd(r),e)}function Bd(r,e=[]){let t=[];return q.Children.forEach(r,(i,o)=>{if(!q.isValidElement(i))return;let l=[...e,o];if(i.type===q.Fragment){t.push.apply(t,Bd(i.props.children,l));return}nt(i.type===zd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Bd(i.props.children,l)),t.push(h)}),t}var Bu="get",$u="application/x-www-form-urlencoded";function Sc(r){return r!=null&&typeof r.tagName=="string"}function jw(r){return Sc(r)&&r.tagName.toLowerCase()==="button"}function zw(r){return Sc(r)&&r.tagName.toLowerCase()==="form"}function Bw(r){return Sc(r)&&r.tagName.toLowerCase()==="input"}function $w(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function qw(r,e){return r.button===0&&(!e||e==="_self")&&!$w(r)}var xu=null;function Ww(){if(xu===null)try{new FormData(document.createElement("form"),0),xu=!1}catch{xu=!0}return xu}var Hw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(r){return r!=null&&!Hw.has(r)?(nr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$u}"`),null):r}function Kw(r,e){let t,i,o,l,h;if(zw(r)){let d=r.getAttribute("action");i=d?Ti(d,e):null,t=r.getAttribute("method")||Bu,o=Id(r.getAttribute("enctype"))||$u,l=new FormData(r)}else if(jw(r)||Bw(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?Ti(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Bu,o=Id(r.getAttribute("formenctype"))||Id(d.getAttribute("enctype"))||$u,l=new FormData(d,r),!Ww()){let{name:y,type:_,value:w}=r;if(_==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,w)}}else{if(Sc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bu,i=null,o=$u,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:h}}function vf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function Gw(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Yw(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await Gw(l,t);return h.links?h.links():[]}return[]}));return eT(i.flat(1).filter(Qw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Sg(r,e,t,i,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,d=(p,y)=>{var _;return t[y].pathname!==p.pathname||((_=t[y].route.path)==null?void 0:_.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||d(p,y)):l==="data"?e.filter((p,y)=>{var w;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(h(p,y)||d(p,y))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function Xw(r,e){return Jw(r.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Jw(r){return[...new Set(r)]}function Zw(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function eT(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(Zw(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function tT(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function nT(){let r=q.useContext(Po);return vf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function rT(){let r=q.useContext(Ic);return vf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var _f=q.createContext(void 0);_f.displayName="FrameworkContext";function dv(){let r=q.useContext(_f);return vf(r,"You must render this element inside a <HydratedRouter> element"),r}function iT(r,e){let t=q.useContext(_f),[i,o]=q.useState(!1),[l,h]=q.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:y,onMouseLeave:_,onTouchStart:w}=e,I=q.useRef(null);q.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let F=W=>{W.forEach(Q=>{h(Q.isIntersecting)})},M=new IntersectionObserver(F,{threshold:.5});return I.current&&M.observe(I.current),()=>{M.disconnect()}}},[r]),q.useEffect(()=>{if(i){let F=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(F)}}},[i]);let P=()=>{o(!0)},D=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:Da(d,P),onBlur:Da(p,D),onMouseEnter:Da(y,P),onMouseLeave:Da(_,D),onTouchStart:Da(w,P)}]:[!1,I,{}]}function Da(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function sT({page:r,...e}){let{router:t}=nT(),i=q.useMemo(()=>tv(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?q.createElement(aT,{page:r,matches:i,...e}):null}function oT(r){let{manifest:e,routeModules:t}=dv(),[i,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return Yw(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),i}function aT({page:r,matches:e,...t}){let i=ki(),{manifest:o,routeModules:l}=dv(),{loaderData:h,matches:d}=rT(),p=q.useMemo(()=>Sg(r,e,d,o,i,"data"),[r,e,d,o,i]),y=q.useMemo(()=>Sg(r,e,d,o,i,"assets"),[r,e,d,o,i]),_=q.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let P=new Set,D=!1;if(e.forEach(M=>{var Q;let W=o.routes[M.route.id];!W||!W.hasLoader||(!p.some(ie=>ie.route.id===M.route.id)&&M.route.id in h&&((Q=l[M.route.id])!=null&&Q.shouldRevalidate)||W.hasClientLoader?D=!0:P.add(M.route.id))}),P.size===0)return[];let F=tT(r);return D&&P.size>0&&F.searchParams.set("_routes",e.filter(M=>P.has(M.route.id)).map(M=>M.route.id).join(",")),[F.pathname+F.search]},[h,i,o,p,e,r,l]),w=q.useMemo(()=>Xw(y,o),[y,o]),I=oT(y);return q.createElement(q.Fragment,null,_.map(P=>q.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),w.map(P=>q.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),I.map(({key:P,link:D})=>q.createElement("link",{key:P,...D})))}function lT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var fv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fv&&(window.__reactRouterVersion="7.1.1")}catch{}function uT({basename:r,children:e,window:t}){let i=q.useRef();i.current==null&&(i.current=XE({window:t,v5Compat:!0}));let o=i.current,[l,h]=q.useState({action:o.action,location:o.location}),d=q.useCallback(p=>{q.startTransition(()=>h(p))},[h]);return q.useLayoutEffect(()=>o.listen(d),[o,d]),q.createElement(Fw,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mv=q.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:h,state:d,target:p,to:y,preventScrollReset:_,viewTransition:w,...I},P){let{basename:D}=q.useContext(sr),F=typeof y=="string"&&pv.test(y),M,W=!1;if(typeof y=="string"&&F&&(M=y,fv))try{let C=new URL(window.location.href),x=y.startsWith("//")?new URL(C.protocol+y):new URL(y),k=Ti(x.pathname,D);x.origin===C.origin&&k!=null?y=k+x.search+x.hash:W=!0}catch{nr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=Iw(y,{relative:o}),[ie,ce,Ie]=iT(i,I),ye=fT(y,{replace:h,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:w});function b(C){e&&e(C),C.defaultPrevented||ye(C)}let R=q.createElement("a",{...I,...Ie,href:M||Q,onClick:W||l?e:b,ref:lT(P,ce),target:p,"data-discover":!F&&t==="render"?"true":void 0});return ie&&!F?q.createElement(q.Fragment,null,R,q.createElement(sT,{page:Q})):R});mv.displayName="Link";var cT=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:h,viewTransition:d,children:p,...y},_){let w=il(h,{relative:y.relative}),I=ki(),P=q.useContext(Ic),{navigator:D,basename:F}=q.useContext(sr),M=P!=null&&vT(w)&&d===!0,W=D.encodeLocation?D.encodeLocation(w).pathname:w.pathname,Q=I.pathname,ie=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),ie=ie?ie.toLowerCase():null,W=W.toLowerCase()),ie&&F&&(ie=Ti(ie,F)||ie);const ce=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let Ie=Q===W||!o&&Q.startsWith(W)&&Q.charAt(ce)==="/",ye=ie!=null&&(ie===W||!o&&ie.startsWith(W)&&ie.charAt(W.length)==="/"),b={isActive:Ie,isPending:ye,isTransitioning:M},R=Ie?e:void 0,C;typeof i=="function"?C=i(b):C=[i,Ie?"active":null,ye?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(b):l;return q.createElement(mv,{...y,"aria-current":R,className:C,ref:_,style:x,to:h,viewTransition:d},typeof p=="function"?p(b):p)});cT.displayName="NavLink";var hT=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:h=Bu,action:d,onSubmit:p,relative:y,preventScrollReset:_,viewTransition:w,...I},P)=>{let D=gT(),F=yT(d,{relative:y}),M=h.toLowerCase()==="get"?"get":"post",W=typeof d=="string"&&pv.test(d),Q=ie=>{if(p&&p(ie),ie.defaultPrevented)return;ie.preventDefault();let ce=ie.nativeEvent.submitter,Ie=(ce==null?void 0:ce.getAttribute("formmethod"))||h;D(ce||ie.currentTarget,{fetcherKey:e,method:Ie,navigate:t,replace:o,state:l,relative:y,preventScrollReset:_,viewTransition:w})};return q.createElement("form",{ref:P,method:M,action:F,onSubmit:i?p:Q,...I,"data-discover":!W&&r==="render"?"true":void 0})});hT.displayName="Form";function dT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gv(r){let e=q.useContext(Po);return nt(e,dT(r)),e}function fT(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:h}={}){let d=mf(),p=ki(),y=il(r,{relative:l});return q.useCallback(_=>{if(qw(_,e)){_.preventDefault();let w=t!==void 0?t:Ha(p)===Ha(y);d(r,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,y,t,i,e,r,o,l,h])}var pT=0,mT=()=>`__${String(++pT)}__`;function gT(){let{router:r}=gv("useSubmit"),{basename:e}=q.useContext(sr),t=bw();return q.useCallback(async(i,o={})=>{let{action:l,method:h,encType:d,formData:p,body:y}=Kw(i,e);if(o.navigate===!1){let _=o.fetcherKey||mT();await r.fetch(_,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function yT(r,{relative:e}={}){let{basename:t}=q.useContext(sr),i=q.useContext(br);nt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...il(r||".",{relative:e})},h=ki();if(r==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(w=>w).forEach(w=>d.append("index",w));let _=d.toString();l.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:kr([t,l.pathname])),Ha(l)}function vT(r,e={}){let t=q.useContext(av);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gv("useViewTransitionState"),o=il(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ti(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Ti(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ec(o.pathname,h)!=null||ec(o.pathname,l)!=null}new TextEncoder;ff();var Rg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},_T=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,_=l>>2,w=(l&3)<<4|d>>4;let I=(d&15)<<2|y>>6,P=y&63;p||(P=64,h||(I=64)),i.push(t[_],t[w],t[I],t[P])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):_T(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||w==null)throw new ET;const I=l<<2|d>>4;if(i.push(I),y!==64){const P=d<<4&240|y>>2;if(i.push(P),w!==64){const D=y<<6&192|w;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ET extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(r){const e=yv(r);return vv.encodeByteArray(e,!0)},tc=function(r){return wT(r).replace(/\./g,"")},_v=function(r){try{return vv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=()=>TT().__FIREBASE_DEFAULTS__,ST=()=>{if(typeof process>"u"||typeof Rg>"u")return;const r=Rg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},RT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_v(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return IT()||ST()||RT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ev=r=>{var e,t;return(t=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},CT=r=>{const e=Ev(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},wv=()=>{var r;return(r=Rc())===null||r===void 0?void 0:r.config},Tv=r=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[tc(JSON.stringify(t)),tc(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function xT(){var r;const e=(r=Rc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LT(){return!xT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function MT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="FirebaseError";class Lr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=FT,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?UT(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new Lr(o,d,i)}}function UT(r,e){return r.replace(jT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const jT=/\{\$([^}]+)}/g;function zT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function nc(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Cg(l)&&Cg(h)){if(!nc(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Cg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function La(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Va(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function BT(r,e){const t=new $T(r,e);return t.subscribe.bind(t)}class $T{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");qT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Sd),o.error===void 0&&(o.error=Sd),o.complete===void 0&&(o.complete=Sd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(r){return r&&r._delegate?r._delegate:r}class as{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new AT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KT(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HT(r){return r===ss?void 0:r}function KT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const QT={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},YT=De.INFO,XT={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},JT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=XT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ef{constructor(e){this.name=e,this._logLevel=YT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const ZT=(r,e)=>e.some(t=>r instanceof t);let Ag,kg;function eI(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tI(){return kg||(kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iv=new WeakMap,$d=new WeakMap,Sv=new WeakMap,Rd=new WeakMap,wf=new WeakMap;function nI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(mi(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Iv.set(t,r)}).catch(()=>{}),wf.set(e,r),e}function rI(r){if($d.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});$d.set(r,e)}let qd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return $d.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Sv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function iI(r){qd=r(qd)}function sI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Cd(this),e,...t);return Sv.set(i,e.sort?e.sort():[e]),mi(i)}:tI().includes(r)?function(...e){return r.apply(Cd(this),e),mi(Iv.get(this))}:function(...e){return mi(r.apply(Cd(this),e))}}function oI(r){return typeof r=="function"?sI(r):(r instanceof IDBTransaction&&rI(r),ZT(r,eI())?new Proxy(r,qd):r)}function mi(r){if(r instanceof IDBRequest)return nI(r);if(Rd.has(r))return Rd.get(r);const e=oI(r);return e!==r&&(Rd.set(r,e),wf.set(e,r)),e}const Cd=r=>wf.get(r);function aI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=mi(h);return i&&h.addEventListener("upgradeneeded",p=>{i(mi(h.result),p.oldVersion,p.newVersion,mi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const lI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],Ad=new Map;function Pg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=uI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||lI.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Ad.set(e,l),l}iI(r=>({...r,get:(e,t,i)=>Pg(e,t)||r.get(e,t,i),has:(e,t)=>!!Pg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function hI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",xg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new Ef("@firebase/app"),dI="@firebase/app-compat",fI="@firebase/analytics-compat",pI="@firebase/analytics",mI="@firebase/app-check-compat",gI="@firebase/app-check",yI="@firebase/auth",vI="@firebase/auth-compat",_I="@firebase/database",EI="@firebase/data-connect",wI="@firebase/database-compat",TI="@firebase/functions",II="@firebase/functions-compat",SI="@firebase/installations",RI="@firebase/installations-compat",CI="@firebase/messaging",AI="@firebase/messaging-compat",kI="@firebase/performance",PI="@firebase/performance-compat",xI="@firebase/remote-config",NI="@firebase/remote-config-compat",OI="@firebase/storage",DI="@firebase/storage-compat",bI="@firebase/firestore",LI="@firebase/vertexai",VI="@firebase/firestore-compat",MI="firebase",FI="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",UI={[Wd]:"fire-core",[dI]:"fire-core-compat",[pI]:"fire-analytics",[fI]:"fire-analytics-compat",[gI]:"fire-app-check",[mI]:"fire-app-check-compat",[yI]:"fire-auth",[vI]:"fire-auth-compat",[_I]:"fire-rtdb",[EI]:"fire-data-connect",[wI]:"fire-rtdb-compat",[TI]:"fire-fn",[II]:"fire-fn-compat",[SI]:"fire-iid",[RI]:"fire-iid-compat",[CI]:"fire-fcm",[AI]:"fire-fcm-compat",[kI]:"fire-perf",[PI]:"fire-perf-compat",[xI]:"fire-rc",[NI]:"fire-rc-compat",[OI]:"fire-gcs",[DI]:"fire-gcs-compat",[bI]:"fire-fst",[VI]:"fire-fst-compat",[LI]:"fire-vertex","fire-js":"fire-js",[MI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,jI=new Map,Kd=new Map;function Ng(r,e){try{r.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _o(r){const e=r.name;if(Kd.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,r);for(const t of rc.values())Ng(t,r);for(const t of jI.values())Ng(t,r);return!0}function Tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Sr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new sl("app","Firebase",zI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=FI;function Rv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw gi.create("bad-app-name",{appName:String(o)});if(t||(t=wv()),!t)throw gi.create("no-options");const l=rc.get(o);if(l){if(nc(t,l.options)&&nc(i,l.config))return l;throw gi.create("duplicate-app",{appName:o})}const h=new GT(o);for(const p of Kd.values())h.addComponent(p);const d=new BI(t,i,h);return rc.set(o,d),d}function Cv(r=Hd){const e=rc.get(r);if(!e&&r===Hd&&wv())return Rv();if(!e)throw gi.create("no-app",{appName:r});return e}function yi(r,e,t){var i;let o=(i=UI[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(d.join(" "));return}_o(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebase-heartbeat-database",qI=1,Ka="firebase-heartbeat-store";let kd=null;function Av(){return kd||(kd=aI($I,qI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ka)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),kd}async function WI(r){try{const t=(await Av()).transaction(Ka),i=await t.objectStore(Ka).get(kv(r));return await t.done,i}catch(e){if(e instanceof Lr)xr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(t.message)}}}async function Og(r,e){try{const i=(await Av()).transaction(Ka,"readwrite");await i.objectStore(Ka).put(e,kv(r)),await i.done}catch(t){if(t instanceof Lr)xr.warn(t.message);else{const i=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xr.warn(i.message)}}}function kv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=1024,KI=30*24*60*60*1e3;class GI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Dg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const d=new Date(h.date).valueOf();return Date.now()-d<=KI}),this._storage.overwrite(this._heartbeatsCache))}catch(i){xr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Dg(),{heartbeatsToSend:i,unsentEntries:o}=QI(this._heartbeatsCache.heartbeats),l=tc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xr.warn(t),""}}}function Dg(){return new Date().toISOString().substring(0,10)}function QI(r,e=HI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),bg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),bg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class YI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VT()?MT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Og(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Og(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function bg(r){return tc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(r){_o(new as("platform-logger",e=>new cI(e),"PRIVATE")),_o(new as("heartbeat",e=>new GI(e),"PRIVATE")),yi(Wd,xg,r),yi(Wd,xg,"esm2017"),yi("fire-js","")}XI("");function If(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function Pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JI=Pv,xv=new sl("auth","Firebase",Pv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Ef("@firebase/auth");function ZI(r,...e){ic.logLevel<=De.WARN&&ic.warn(`Auth (${xo}): ${r}`,...e)}function qu(r,...e){ic.logLevel<=De.ERROR&&ic.error(`Auth (${xo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r,...e){throw Sf(r,...e)}function Jn(r,...e){return Sf(r,...e)}function Nv(r,e,t){const i=Object.assign(Object.assign({},JI()),{[e]:t});return new sl("auth","Firebase",i).create(e,{appName:r.name})}function vi(r){return Nv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return xv.create(r,...e)}function ve(r,e,...t){if(!r)throw Sf(e,...t)}function Rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw qu(e),new Error(e)}function Nr(r,e){r||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function eS(){return Lg()==="http:"||Lg()==="https:"}function Lg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eS()||OT()||"connection"in navigator)?navigator.onLine:!0}function nS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=PT()||DT()}get(){return tS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(r,e){Nr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new al(3e4,6e4);function Pi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Vr(r,e,t,i,o={}){return Dv(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=ol(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return NT()||(y.referrerPolicy="no-referrer"),Ov.fetch()(bv(r,r.config.apiHost,t,d),y)})}async function Dv(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},rS),e);try{const o=new oS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Nu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Nu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Nu(r,"user-disabled",h);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Nv(r,_,y);Fn(r,_)}}catch(o){if(o instanceof Lr)throw o;Fn(r,"network-request-failed",{message:String(o)})}}async function Cc(r,e,t,i,o={}){const l=await Vr(r,e,t,i,o);return"mfaPendingCredential"in l&&Fn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function bv(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`}function sS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Jn(this.auth,"network-request-failed")),iS.get())})}}function Nu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Jn(r,e,i);return o.customData._tokenResponse=t,o}function Vg(r){return r!==void 0&&r.enterprise!==void 0}class aS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lS(r,e){return Vr(r,"GET","/v2/recaptchaConfig",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(r,e){return Vr(r,"POST","/v1/accounts:delete",e)}async function Lv(r,e){return Vr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cS(r,e=!1){const t=an(r),i=await t.getIdToken(e),o=Cf(i);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ja(Pd(o.auth_time)),issuedAtTime:ja(Pd(o.iat)),expirationTime:ja(Pd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pd(r){return Number(r)*1e3}function Cf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=_v(t);return o?JSON.parse(o):(qu("Failed to decode base64 JWT payload"),null)}catch(o){return qu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Mg(r){const e=Cf(r);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Lr&&hS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function hS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Ga(r,Lv(t,{idToken:i}));ve(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Vv(l.providerUserInfo):[],d=pS(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),_=p?y:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Gd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,w)}async function fS(r){const e=an(r);await oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Vv(r){return r.map(e=>{var{providerId:t}=e,i=If(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(r,e){const t=await Dv(r,{},async()=>{const i=ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=bv(r,o,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Ov.fetch()(h,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gS(r,e){return Vr(r,"POST","/v2/accounts:revokeToken",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=Mg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await mS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new mo;return i&&(ve(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,e){ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=If(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cS(this,e)}reload(){return fS(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await oc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Ga(this,uS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,p,y,_;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,D=(h=t.photoURL)!==null&&h!==void 0?h:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,M=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,W=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ie,emailVerified:ce,isAnonymous:Ie,providerData:ye,stsTokenManager:b}=t;ve(ie&&b,e,"internal-error");const R=mo.fromJSON(this.name,b);ve(typeof ie=="string",e,"internal-error"),li(w,e.name),li(I,e.name),ve(typeof ce=="boolean",e,"internal-error"),ve(typeof Ie=="boolean",e,"internal-error"),li(P,e.name),li(D,e.name),li(F,e.name),li(M,e.name),li(W,e.name),li(Q,e.name);const C=new Cr({uid:ie,auth:e,email:I,emailVerified:ce,displayName:w,isAnonymous:Ie,photoURL:D,phoneNumber:P,tenantId:F,stsTokenManager:R,createdAt:W,lastLoginAt:Q});return ye&&Array.isArray(ye)&&(C.providerData=ye.map(x=>Object.assign({},x))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new mo;o.updateFromServerResponse(t);const l=new Cr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await oc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Vv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new mo;d.updateFromIdToken(i);const p=new Cr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Gd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;function Ar(r){Nr(r instanceof Function,"Expected a class definition");let e=Fg.get(r);return e?(Nr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Fg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Mv.type="NONE";const Ug=Mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(r,e,t){return`firebase:${r}:${e}:${t}`}class go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new go(Ar(Ug),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ar(Ug);const h=Wu(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(h);if(_){const w=Cr._fromJSON(e,_);y!==l&&(d=w),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new go(l,e,i):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($v(e))return"Blackberry";if(qv(e))return"Webos";if(Uv(e))return"Safari";if((e.includes("chrome/")||jv(e))&&!e.includes("edge/"))return"Chrome";if(Bv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Fv(r=Ut()){return/firefox\//i.test(r)}function Uv(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jv(r=Ut()){return/crios\//i.test(r)}function zv(r=Ut()){return/iemobile/i.test(r)}function Bv(r=Ut()){return/android/i.test(r)}function $v(r=Ut()){return/blackberry/i.test(r)}function qv(r=Ut()){return/webos/i.test(r)}function Af(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yS(r=Ut()){var e;return Af(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vS(){return bT()&&document.documentMode===10}function Wv(r=Ut()){return Af(r)||Bv(r)||qv(r)||$v(r)||/windows phone/i.test(r)||zv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(r,e=[]){let t;switch(r){case"Browser":t=jg(Ut());break;case"Worker":t=`${jg(Ut())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(r,e={}){return Vr(r,"GET","/v2/passwordPolicy",Pi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=6;class TS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:wS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zg(this),this.idTokenSubscription=new zg(this),this.beforeStateQueue=new _S(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lv(this,{idToken:e}),i=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(vi(this));const t=e?an(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ES(this),t=new TS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await gS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ZI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function No(r){return an(r)}class zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=BT(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SS(r){Ac=r}function Kv(r){return Ac.loadJS(r)}function RS(){return Ac.recaptchaEnterpriseScript}function CS(){return Ac.gapiScript}function AS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class kS{constructor(){this.enterprise=new PS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const xS="recaptcha-enterprise",Gv="NO_RECAPTCHA";class NS{constructor(e){this.type=xS,this.auth=No(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,d)=>{lS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new aS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,h,d){const p=window.grecaptcha;Vg(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(Gv)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(d=>{if(!t&&Vg(window.grecaptcha))o(d,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=RS();p.length!==0&&(p+=d),Kv(p).then(()=>{o(d,l,h)}).catch(y=>{h(y)})}}).catch(d=>{h(d)})})}}async function Bg(r,e,t,i=!1,o=!1){const l=new NS(r);let h;if(o)h=Gv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Qd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Bg(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Bg(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(r,e){const t=Tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(nc(l,e??{}))return o;Fn(o,"already-initialized")}return t.initialize({options:e})}function DS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ar);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bS(r,e,t){const i=No(r);ve(i._canInitEmulator,i,"emulator-config-failed"),ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Qv(e),{host:h,port:d}=LS(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${h}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),VS()}function Qv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function LS(r){const e=Qv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:$g(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:$g(h)}}}function $g(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function MS(r,e){return Vr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(r,e){return Cc(r,"POST","/v1/accounts:signInWithPassword",Pi(r,e))}async function US(r,e){return Vr(r,"POST","/v1/accounts:sendOobCode",Pi(r,e))}async function jS(r,e){return US(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e){return Cc(r,"POST","/v1/accounts:signInWithEmailLink",Pi(r,e))}async function BS(r,e){return Cc(r,"POST","/v1/accounts:signInWithEmailLink",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends kf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Qa(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Qa(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,t,"signInWithPassword",FS);case"emailLink":return zS(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qd(e,i,"signUpPassword",MS);case"emailLink":return BS(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r,e){return Cc(r,"POST","/v1/accounts:signInWithIdp",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="http://localhost";class ls extends kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=If(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ls(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return yo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,yo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yo(e,t)}buildRequest(){const e={requestUri:$S,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ol(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WS(r){const e=La(Va(r)).link,t=e?La(Va(e)).deep_link_id:null,i=La(Va(r)).deep_link_id;return(i?La(Va(i)).link:null)||i||t||e||r}class kc{constructor(e){var t,i,o,l,h,d;const p=La(Va(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,w=qS((o=p.mode)!==null&&o!==void 0?o:null);ve(y&&_&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=WS(e);try{return new kc(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Qa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=kc.parseLink(t);return ve(i,"argument-error"),Qa._fromEmailAndCode(e,i.code,i.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends ll{constructor(){super("facebook.com")}static credential(e){return ls._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ls._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hi.credential(t,i)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends ll{constructor(){super("github.com")}static credential(e){return ls._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends ll{constructor(){super("twitter.com")}static credential(e,t){return ls._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return fi.credential(t,i)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Cr._fromIdTokenResponse(e,i,o),h=qg(i);return new Eo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=qg(i);return new Eo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function qg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends Lr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new ac(e,t,i,o)}}function Xv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(r,l,e,i):l})}async function HS(r,e,t=!1){const i=await Ga(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Eo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r,e,t=!1){const{auth:i}=r;if(Sr(i.app))return Promise.reject(vi(i));const o="reauthenticate";try{const l=await Ga(r,Xv(i,o,e,r),t);ve(l.idToken,i,"internal-error");const h=Cf(l.idToken);ve(h,i,"internal-error");const{sub:d}=h;return ve(r.uid===d,i,"user-mismatch"),Eo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jv(r,e,t=!1){if(Sr(r.app))return Promise.reject(vi(r));const i="signIn",o=await Xv(r,i,e),l=await Eo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function GS(r,e){return Jv(No(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(r,e,t){var i;ve(((i=t.url)===null||i===void 0?void 0:i.length)>0,r,"invalid-continue-uri"),ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ve(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ve(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(r,e,t){const i=No(r),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(h,d){ve(d.handleCodeInApp,i,"argument-error"),QS(i,h,d)}l(o,t),await Qd(i,o,"getOobCode",jS)}function XS(r,e){const t=kc.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function JS(r,e,t){if(Sr(r.app))return Promise.reject(vi(r));const i=an(r),o=Oo.credentialWithLink(e,t||sc());return ve(o._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),GS(i,o)}function ZS(r,e,t,i){return an(r).onIdTokenChanged(e,t,i)}function e1(r,e,t){return an(r).beforeAuthStateChanged(e,t)}function t1(r,e,t,i){return an(r).onAuthStateChanged(e,t,i)}const lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=1e3,r1=10;class e_ extends Zv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);vS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,r1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},n1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e_.type="LOCAL";const i1=e_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Zv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}t_.type="SESSION";const n_=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Pc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async y=>y(t.origin,l)),p=await s1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const y=Pf("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function a1(r){Zn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function l1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function c1(){return r_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="firebaseLocalStorageDb",h1=1,uc="firebaseLocalStorage",s_="fbase_key";class ul{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xc(r,e){return r.transaction([uc],e?"readwrite":"readonly").objectStore(uc)}function d1(){const r=indexedDB.deleteDatabase(i_);return new ul(r).toPromise()}function Yd(){const r=indexedDB.open(i_,h1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(uc,{keyPath:s_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(uc)?e(i):(i.close(),await d1(),e(await Yd()))})})}async function Wg(r,e,t){const i=xc(r,!0).put({[s_]:e,value:t});return new ul(i).toPromise()}async function f1(r,e){const t=xc(r,!1).get(e),i=await new ul(t).toPromise();return i===void 0?null:i.value}function Hg(r,e){const t=xc(r,!0).delete(e);return new ul(t).toPromise()}const p1=800,m1=3;class o_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>m1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(c1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await l1(),!this.activeServiceWorker)return;this.sender=new o1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await Wg(e,lc,"1"),await Hg(e,lc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>f1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=xc(o,!1).getAll();return new ul(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o_.type="LOCAL";const g1=o_;new al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r,e){return e?Ar(e):(ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends kf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function v1(r){return Jv(r.auth,new xf(r),r.bypassAuthState)}function _1(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),KS(t,new xf(r),r.bypassAuthState)}async function E1(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),HS(t,new xf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v1;case"linkViaPopup":case"linkViaRedirect":return E1;case"reauthViaPopup":case"reauthViaRedirect":return _1;default:Fn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=new al(2e3,1e4);class ho extends a_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w1.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="pendingRedirect",Hu=new Map;class I1 extends a_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const i=await S1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S1(r,e){const t=A1(e),i=C1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function R1(r,e){Hu.set(r._key(),e)}function C1(r){return Ar(r._redirectPersistence)}function A1(r){return Wu(T1,r.config.apiKey,r.name)}async function k1(r,e,t=!1){if(Sr(r.app))return Promise.reject(vi(r));const i=No(r),o=y1(i,e),h=await new I1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=10*60*1e3;class x1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!l_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Jn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function l_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e={}){return Vr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b1=/^https?/;async function L1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await O1(r);for(const t of e)try{if(V1(t))return}catch{}Fn(r,"unauthorized-domain")}function V1(r){const e=sc(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!b1.test(t))return!1;if(D1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new al(3e4,6e4);function Gg(){const r=Zn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function F1(r){return new Promise((e,t)=>{var i,o,l;function h(){Gg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gg(),t(Jn(r,"network-request-failed"))},timeout:M1.get()})}if(!((o=(i=Zn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Zn().gapi)===null||l===void 0)&&l.load)h();else{const d=AS("iframefcb");return Zn()[d]=()=>{gapi.load?h():t(Jn(r,"network-request-failed"))},Kv(`${CS()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ku=null,e})}let Ku=null;function U1(r){return Ku=Ku||F1(r),Ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new al(5e3,15e3),z1="__/auth/iframe",B1="emulator/auth/iframe",$1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W1(r){const e=r.config;ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,B1):`https://${r.config.authDomain}/${z1}`,i={apiKey:e.apiKey,appName:r.name,v:xo},o=q1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ol(i).slice(1)}`}async function H1(r){const e=await U1(r),t=Zn().gapi;return ve(t,r,"internal-error"),e.open({where:document.body,url:W1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Jn(r,"network-request-failed"),d=Zn().setTimeout(()=>{l(h)},j1.get());function p(){Zn().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G1=500,Q1=600,Y1="_blank",X1="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J1(r,e,t,i=G1,o=Q1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},K1),{width:i.toString(),height:o.toString(),top:l,left:h}),y=Ut().toLowerCase();t&&(d=jv(y)?Y1:t),Fv(y)&&(e=e||X1,p.scrollbars="yes");const _=Object.entries(p).reduce((I,[P,D])=>`${I}${P}=${D},`,"");if(yS(y)&&d!=="_self")return Z1(e||"",d),new Qg(null);const w=window.open(e||"",d,_);ve(w,r,"popup-blocked");try{w.focus()}catch{}return new Qg(w)}function Z1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="__/auth/handler",tR="emulator/auth/handler",nR=encodeURIComponent("fac");async function Yg(r,e,t,i,o,l){ve(r.config.authDomain,r,"auth-domain-config-required"),ve(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:xo,eventId:o};if(e instanceof Yv){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",zT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof ll){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}r.tenantId&&(h.tid=r.tenantId);const d=h;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await r._getAppCheckToken(),y=p?`#${nR}=${encodeURIComponent(p)}`:"";return`${rR(r)}?${ol(d).slice(1)}${y}`}function rR({config:r}){return r.emulator?Rf(r,tR):`https://${r.authDomain}/${eR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n_,this._completeRedirectFn=k1,this._overrideRedirectResult=R1}async _openPopup(e,t,i,o){var l;Nr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Yg(e,t,i,sc(),o);return J1(e,h,Pf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Yg(e,t,i,sc(),o);return a1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Nr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await H1(e),i=new x1(e);return t.register("authEvent",o=>(ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xd,{type:xd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[xd];h!==void 0&&t(!!h),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wv()||Uv()||Af()}}const sR=iR;var Xg="@firebase/auth",Jg="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lR(r){_o(new as("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hv(r)},y=new IS(i,o,l,p);return DS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_o(new as("auth-internal",e=>{const t=No(e.getProvider("auth").getImmediate());return(i=>new oR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(Xg,Jg,aR(r)),yi(Xg,Jg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=5*60,cR=Tv("authIdTokenMaxAge")||uR;let Zg=null;const hR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>cR)return;const o=t==null?void 0:t.token;Zg!==o&&(Zg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function dR(r=Cv()){const e=Tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=OS(r,{popupRedirectResolver:sR,persistence:[g1,i1,n_]}),i=Tv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=hR(l.toString());e1(t,h,()=>h(t.currentUser)),ZS(t,d=>h(d))}}const o=Ev("auth");return o&&bS(t,`http://${o}`),t}function fR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}SS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Jn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",fR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lR("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function pR(r,e,t,i){function o(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(_){try{y(i.next(_))}catch(w){h(w)}}function p(_){try{y(i.throw(_))}catch(w){h(w)}}function y(_){_.done?l(_.value):o(_.value).then(d,p)}y((i=i.apply(r,[])).next())})}function mR(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,h;return h={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(y){return function(_){return p([y,_])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(l=y[0]&2?o.return:y[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,y[1])).done)return l;switch(o=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){t.label=y[1];break}if(y[0]===6&&t.label<l[1]){t.label=l[1],l=y;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(y);break}l[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(r,t)}catch(_){y=[6,_],o=0}finally{i=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fo=function(){return fo=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},fo.apply(this,arguments)},u_=function(r){return{loading:r==null,value:r}},gR=function(){return function(r,e){switch(e.type){case"error":return fo(fo({},r),{error:e.error,loading:!1,value:void 0});case"reset":return u_(e.defaultValue);case"value":return fo(fo({},r),{error:void 0,loading:!1,value:e.value});default:return r}}},yR=function(r){var e=r(),t=q.useReducer(gR(),u_(e)),i=t[0],o=t[1],l=q.useCallback(function(){var p=r();o({type:"reset",defaultValue:p})},[r]),h=q.useCallback(function(p){o({type:"error",error:p})},[]),d=q.useCallback(function(p){o({type:"value",value:p})},[]);return q.useMemo(function(){return{error:i.error,loading:i.loading,reset:l,setError:h,setValue:d,value:i.value}},[i.error,i.loading,l,h,d,i.value])},c_=function(r,e){var t=yR(function(){return r.currentUser}),i=t.error,o=t.loading,l=t.setError,h=t.setValue,d=t.value;return q.useEffect(function(){var p=t1(r,function(y){return pR(void 0,void 0,void 0,function(){var _;return mR(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(y)];case 2:return w.sent(),[3,4];case 3:return _=w.sent(),l(_),[3,4];case 4:return h(y),[2]}})})},l);return function(){p()}},[r]),[d,o,i]},vR="firebase",_R="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi(vR,_R,"app");var ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,h_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,R){function C(){}C.prototype=R.prototype,b.D=R.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(x,k,N){for(var S=Array(arguments.length-2),re=2;re<arguments.length;re++)S[re-2]=arguments[re];return R.prototype[k].apply(x,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,R,C){C||(C=0);var x=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)x[k]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(k=0;16>k;++k)x[k]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=b.g[0],C=b.g[1],k=b.g[2];var N=b.g[3],S=R+(N^C&(k^N))+x[0]+3614090360&4294967295;R=C+(S<<7&4294967295|S>>>25),S=N+(k^R&(C^k))+x[1]+3905402710&4294967295,N=R+(S<<12&4294967295|S>>>20),S=k+(C^N&(R^C))+x[2]+606105819&4294967295,k=N+(S<<17&4294967295|S>>>15),S=C+(R^k&(N^R))+x[3]+3250441966&4294967295,C=k+(S<<22&4294967295|S>>>10),S=R+(N^C&(k^N))+x[4]+4118548399&4294967295,R=C+(S<<7&4294967295|S>>>25),S=N+(k^R&(C^k))+x[5]+1200080426&4294967295,N=R+(S<<12&4294967295|S>>>20),S=k+(C^N&(R^C))+x[6]+2821735955&4294967295,k=N+(S<<17&4294967295|S>>>15),S=C+(R^k&(N^R))+x[7]+4249261313&4294967295,C=k+(S<<22&4294967295|S>>>10),S=R+(N^C&(k^N))+x[8]+1770035416&4294967295,R=C+(S<<7&4294967295|S>>>25),S=N+(k^R&(C^k))+x[9]+2336552879&4294967295,N=R+(S<<12&4294967295|S>>>20),S=k+(C^N&(R^C))+x[10]+4294925233&4294967295,k=N+(S<<17&4294967295|S>>>15),S=C+(R^k&(N^R))+x[11]+2304563134&4294967295,C=k+(S<<22&4294967295|S>>>10),S=R+(N^C&(k^N))+x[12]+1804603682&4294967295,R=C+(S<<7&4294967295|S>>>25),S=N+(k^R&(C^k))+x[13]+4254626195&4294967295,N=R+(S<<12&4294967295|S>>>20),S=k+(C^N&(R^C))+x[14]+2792965006&4294967295,k=N+(S<<17&4294967295|S>>>15),S=C+(R^k&(N^R))+x[15]+1236535329&4294967295,C=k+(S<<22&4294967295|S>>>10),S=R+(k^N&(C^k))+x[1]+4129170786&4294967295,R=C+(S<<5&4294967295|S>>>27),S=N+(C^k&(R^C))+x[6]+3225465664&4294967295,N=R+(S<<9&4294967295|S>>>23),S=k+(R^C&(N^R))+x[11]+643717713&4294967295,k=N+(S<<14&4294967295|S>>>18),S=C+(N^R&(k^N))+x[0]+3921069994&4294967295,C=k+(S<<20&4294967295|S>>>12),S=R+(k^N&(C^k))+x[5]+3593408605&4294967295,R=C+(S<<5&4294967295|S>>>27),S=N+(C^k&(R^C))+x[10]+38016083&4294967295,N=R+(S<<9&4294967295|S>>>23),S=k+(R^C&(N^R))+x[15]+3634488961&4294967295,k=N+(S<<14&4294967295|S>>>18),S=C+(N^R&(k^N))+x[4]+3889429448&4294967295,C=k+(S<<20&4294967295|S>>>12),S=R+(k^N&(C^k))+x[9]+568446438&4294967295,R=C+(S<<5&4294967295|S>>>27),S=N+(C^k&(R^C))+x[14]+3275163606&4294967295,N=R+(S<<9&4294967295|S>>>23),S=k+(R^C&(N^R))+x[3]+4107603335&4294967295,k=N+(S<<14&4294967295|S>>>18),S=C+(N^R&(k^N))+x[8]+1163531501&4294967295,C=k+(S<<20&4294967295|S>>>12),S=R+(k^N&(C^k))+x[13]+2850285829&4294967295,R=C+(S<<5&4294967295|S>>>27),S=N+(C^k&(R^C))+x[2]+4243563512&4294967295,N=R+(S<<9&4294967295|S>>>23),S=k+(R^C&(N^R))+x[7]+1735328473&4294967295,k=N+(S<<14&4294967295|S>>>18),S=C+(N^R&(k^N))+x[12]+2368359562&4294967295,C=k+(S<<20&4294967295|S>>>12),S=R+(C^k^N)+x[5]+4294588738&4294967295,R=C+(S<<4&4294967295|S>>>28),S=N+(R^C^k)+x[8]+2272392833&4294967295,N=R+(S<<11&4294967295|S>>>21),S=k+(N^R^C)+x[11]+1839030562&4294967295,k=N+(S<<16&4294967295|S>>>16),S=C+(k^N^R)+x[14]+4259657740&4294967295,C=k+(S<<23&4294967295|S>>>9),S=R+(C^k^N)+x[1]+2763975236&4294967295,R=C+(S<<4&4294967295|S>>>28),S=N+(R^C^k)+x[4]+1272893353&4294967295,N=R+(S<<11&4294967295|S>>>21),S=k+(N^R^C)+x[7]+4139469664&4294967295,k=N+(S<<16&4294967295|S>>>16),S=C+(k^N^R)+x[10]+3200236656&4294967295,C=k+(S<<23&4294967295|S>>>9),S=R+(C^k^N)+x[13]+681279174&4294967295,R=C+(S<<4&4294967295|S>>>28),S=N+(R^C^k)+x[0]+3936430074&4294967295,N=R+(S<<11&4294967295|S>>>21),S=k+(N^R^C)+x[3]+3572445317&4294967295,k=N+(S<<16&4294967295|S>>>16),S=C+(k^N^R)+x[6]+76029189&4294967295,C=k+(S<<23&4294967295|S>>>9),S=R+(C^k^N)+x[9]+3654602809&4294967295,R=C+(S<<4&4294967295|S>>>28),S=N+(R^C^k)+x[12]+3873151461&4294967295,N=R+(S<<11&4294967295|S>>>21),S=k+(N^R^C)+x[15]+530742520&4294967295,k=N+(S<<16&4294967295|S>>>16),S=C+(k^N^R)+x[2]+3299628645&4294967295,C=k+(S<<23&4294967295|S>>>9),S=R+(k^(C|~N))+x[0]+4096336452&4294967295,R=C+(S<<6&4294967295|S>>>26),S=N+(C^(R|~k))+x[7]+1126891415&4294967295,N=R+(S<<10&4294967295|S>>>22),S=k+(R^(N|~C))+x[14]+2878612391&4294967295,k=N+(S<<15&4294967295|S>>>17),S=C+(N^(k|~R))+x[5]+4237533241&4294967295,C=k+(S<<21&4294967295|S>>>11),S=R+(k^(C|~N))+x[12]+1700485571&4294967295,R=C+(S<<6&4294967295|S>>>26),S=N+(C^(R|~k))+x[3]+2399980690&4294967295,N=R+(S<<10&4294967295|S>>>22),S=k+(R^(N|~C))+x[10]+4293915773&4294967295,k=N+(S<<15&4294967295|S>>>17),S=C+(N^(k|~R))+x[1]+2240044497&4294967295,C=k+(S<<21&4294967295|S>>>11),S=R+(k^(C|~N))+x[8]+1873313359&4294967295,R=C+(S<<6&4294967295|S>>>26),S=N+(C^(R|~k))+x[15]+4264355552&4294967295,N=R+(S<<10&4294967295|S>>>22),S=k+(R^(N|~C))+x[6]+2734768916&4294967295,k=N+(S<<15&4294967295|S>>>17),S=C+(N^(k|~R))+x[13]+1309151649&4294967295,C=k+(S<<21&4294967295|S>>>11),S=R+(k^(C|~N))+x[4]+4149444226&4294967295,R=C+(S<<6&4294967295|S>>>26),S=N+(C^(R|~k))+x[11]+3174756917&4294967295,N=R+(S<<10&4294967295|S>>>22),S=k+(R^(N|~C))+x[2]+718787259&4294967295,k=N+(S<<15&4294967295|S>>>17),S=C+(N^(k|~R))+x[9]+3951481745&4294967295,b.g[0]=b.g[0]+R&4294967295,b.g[1]=b.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,R){R===void 0&&(R=b.length);for(var C=R-this.blockSize,x=this.B,k=this.h,N=0;N<R;){if(k==0)for(;N<=C;)o(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<R;)if(x[k++]=b.charCodeAt(N++),k==this.blockSize){o(this,x),k=0;break}}else for(;N<R;)if(x[k++]=b[N++],k==this.blockSize){o(this,x),k=0;break}}this.h=k,this.o+=R},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var R=1;R<b.length-8;++R)b[R]=0;var C=8*this.o;for(R=b.length-8;R<b.length;++R)b[R]=C&255,C/=256;for(this.u(b),b=Array(16),R=C=0;4>R;++R)for(var x=0;32>x;x+=8)b[C++]=this.g[R]>>>x&255;return b};function l(b,R){var C=d;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=R(b)}function h(b,R){this.h=R;for(var C=[],x=!0,k=b.length-1;0<=k;k--){var N=b[k]|0;x&&N==R||(C[k]=N,x=!1)}this.g=C}var d={};function p(b){return-128<=b&&128>b?l(b,function(R){return new h([R|0],0>R?-1:0)}):new h([b|0],0>b?-1:0)}function y(b){if(isNaN(b)||!isFinite(b))return w;if(0>b)return M(y(-b));for(var R=[],C=1,x=0;b>=C;x++)R[x]=b/C|0,C*=4294967296;return new h(R,0)}function _(b,R){if(b.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b.charAt(0)=="-")return M(_(b.substring(1),R));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(R,8)),x=w,k=0;k<b.length;k+=8){var N=Math.min(8,b.length-k),S=parseInt(b.substring(k,k+N),R);8>N?(N=y(Math.pow(R,N)),x=x.j(N).add(y(S))):(x=x.j(C),x=x.add(y(S)))}return x}var w=p(0),I=p(1),P=p(16777216);r=h.prototype,r.m=function(){if(F(this))return-M(this).m();for(var b=0,R=1,C=0;C<this.g.length;C++){var x=this.i(C);b+=(0<=x?x:4294967296+x)*R,R*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(F(this))return"-"+M(this).toString(b);for(var R=y(Math.pow(b,6)),C=this,x="";;){var k=ce(C,R).g;C=W(C,k.j(R));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=k,D(C))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var R=0;R<b.g.length;R++)if(b.g[R]!=0)return!1;return!0}function F(b){return b.h==-1}r.l=function(b){return b=W(this,b),F(b)?-1:D(b)?0:1};function M(b){for(var R=b.g.length,C=[],x=0;x<R;x++)C[x]=~b.g[x];return new h(C,~b.h).add(I)}r.abs=function(){return F(this)?M(this):this},r.add=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],x=0,k=0;k<=R;k++){var N=x+(this.i(k)&65535)+(b.i(k)&65535),S=(N>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);x=S>>>16,N&=65535,S&=65535,C[k]=S<<16|N}return new h(C,C[C.length-1]&-2147483648?-1:0)};function W(b,R){return b.add(M(R))}r.j=function(b){if(D(this)||D(b))return w;if(F(this))return F(b)?M(this).j(M(b)):M(M(this).j(b));if(F(b))return M(this.j(M(b)));if(0>this.l(P)&&0>b.l(P))return y(this.m()*b.m());for(var R=this.g.length+b.g.length,C=[],x=0;x<2*R;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<b.g.length;k++){var N=this.i(x)>>>16,S=this.i(x)&65535,re=b.i(k)>>>16,oe=b.i(k)&65535;C[2*x+2*k]+=S*oe,Q(C,2*x+2*k),C[2*x+2*k+1]+=N*oe,Q(C,2*x+2*k+1),C[2*x+2*k+1]+=S*re,Q(C,2*x+2*k+1),C[2*x+2*k+2]+=N*re,Q(C,2*x+2*k+2)}for(x=0;x<R;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=R;x<2*R;x++)C[x]=0;return new h(C,0)};function Q(b,R){for(;(b[R]&65535)!=b[R];)b[R+1]+=b[R]>>>16,b[R]&=65535,R++}function ie(b,R){this.g=b,this.h=R}function ce(b,R){if(D(R))throw Error("division by zero");if(D(b))return new ie(w,w);if(F(b))return R=ce(M(b),R),new ie(M(R.g),M(R.h));if(F(R))return R=ce(b,M(R)),new ie(M(R.g),R.h);if(30<b.g.length){if(F(b)||F(R))throw Error("slowDivide_ only works with positive integers.");for(var C=I,x=R;0>=x.l(b);)C=Ie(C),x=Ie(x);var k=ye(C,1),N=ye(x,1);for(x=ye(x,2),C=ye(C,2);!D(x);){var S=N.add(x);0>=S.l(b)&&(k=k.add(C),N=S),x=ye(x,1),C=ye(C,1)}return R=W(b,k.j(R)),new ie(k,R)}for(k=w;0<=b.l(R);){for(C=Math.max(1,Math.floor(b.m()/R.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=y(C),S=N.j(R);F(S)||0<S.l(b);)C-=x,N=y(C),S=N.j(R);D(N)&&(N=I),k=k.add(N),b=W(b,S)}return new ie(k,b)}r.A=function(b){return ce(this,b).h},r.and=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],x=0;x<R;x++)C[x]=this.i(x)&b.i(x);return new h(C,this.h&b.h)},r.or=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],x=0;x<R;x++)C[x]=this.i(x)|b.i(x);return new h(C,this.h|b.h)},r.xor=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],x=0;x<R;x++)C[x]=this.i(x)^b.i(x);return new h(C,this.h^b.h)};function Ie(b){for(var R=b.g.length+1,C=[],x=0;x<R;x++)C[x]=b.i(x)<<1|b.i(x-1)>>>31;return new h(C,b.h)}function ye(b,R){var C=R>>5;R%=32;for(var x=b.g.length-C,k=[],N=0;N<x;N++)k[N]=0<R?b.i(N+C)>>>R|b.i(N+C+1)<<32-R:b.i(N+C);return new h(k,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,h_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,_i=h}).apply(typeof ey<"u"?ey:typeof self<"u"?self:typeof window<"u"?window:{});var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d_,Ma,f_,Gu,Xd,p_,m_,g_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ou=="object"&&Ou];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in v))break e;v=v[U]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,T=!1,U={next:function(){if(!T&&v<u.length){var H=v++;return{value:m(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function I(u,m,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function D(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,U,H){for(var ae=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ae[qe-2]=arguments[qe];return m.prototype[U].apply(T,ae)}}function F(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function M(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const U=u.length||0,H=T.length||0;u.length=U+H;for(let ae=0;ae<H;ae++)u[U+ae]=T[ae]}else u.push(T)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Q(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var Ie=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function ye(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function b(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function R(u){const m={};for(const v in u)m[v]=u[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let v,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(v in T)u[v]=T[v];for(let H=0;H<C.length;H++)v=C[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function k(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function N(u){d.setTimeout(()=>{throw u},0)}function S(){var u=le;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,v){const T=oe.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var oe=new W(()=>new Se,u=>u.reset());class Se{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let B,K=!1,le=new re,ne=()=>{const u=d.Promise.resolve(void 0);B=()=>{u.then(L)}};var L=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(v){N(v)}var m=oe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}K=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u}();function xe(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ie){e:{try{ce(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}D(xe,fe);var Oe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Be=0;function He(u,m,v,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=U,this.key=++Be,this.da=this.fa=!1}function _t(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function or(u){this.src=u,this.g={},this.h=0}or.prototype.add=function(u,m,v,T,U){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ae=Mr(u,m,T,U);return-1<ae?(m=u[ae],v||(m.fa=!1)):(m=new He(m,this.src,H,!!T,U),m.fa=v,u.push(m)),m};function ps(u,m){var v=m.type;if(v in u.g){var T=u.g[v],U=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=U)&&Array.prototype.splice.call(T,U,1),H&&(_t(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Mr(u,m,v,T){for(var U=0;U<u.length;++U){var H=u[U];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return U}return-1}var xi="closure_lm_"+(1e6*Math.random()|0),ms={};function Mo(u,m,v,T,U){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Mo(u,m[H],v,T,U);return null}return v=jo(v),u&&u[Ue]?u.K(m,v,y(T)?!!T.capture:!!T,U):Fo(u,m,v,!1,T,U)}function Fo(u,m,v,T,U,H){if(!m)throw Error("Invalid event type");var ae=y(U)?!!U.capture:!!U,qe=ys(u);if(qe||(u[xi]=qe=new or(u)),v=qe.add(m,v,T,ae,H),v.proxy)return v;if(T=pl(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)ke||(U=ae),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(lr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function pl(){function u(v){return m.call(u.src,u.listener,v)}const m=Uo;return u}function gs(u,m,v,T,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)gs(u,m[H],v,T,U);else T=y(T)?!!T.capture:!!T,v=jo(v),u&&u[Ue]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],v=Mr(H,v,T,U),-1<v&&(_t(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=ys(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Mr(m,v,T,U)),(v=-1<u?m[u]:null)&&ar(v))}function ar(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])ps(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(lr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=ys(m))?(ps(v,u),v.h==0&&(v.src=null,m[xi]=null)):_t(u)}}}function lr(u){return u in ms?ms[u]:ms[u]="on"+u}function Uo(u,m){if(u.da)u=!0;else{m=new xe(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&ar(u),u=v.call(T,m)}return u}function ys(u){return u=u[xi],u instanceof or?u:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function jo(u){return typeof u=="function"?u:(u[vs]||(u[vs]=function(m){return u.handleEvent(m)}),u[vs])}function ht(){G.call(this),this.i=new or(this),this.M=this,this.F=null}D(ht,G),ht.prototype[Ue]=!0,ht.prototype.removeEventListener=function(u,m,v,T){gs(this,u,m,v,T)};function dt(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var U=m;m=new fe(T,u),x(m,U)}if(U=!0,v)for(var H=v.length-1;0<=H;H--){var ae=m.g=v[H];U=ur(ae,T,!0,m)&&U}if(ae=m.g=u,U=ur(ae,T,!0,m)&&U,U=ur(ae,T,!1,m)&&U,v)for(H=0;H<v.length;H++)ae=m.g=v[H],U=ur(ae,T,!1,m)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)_t(v[T]);delete u.g[m],u.h--}}this.F=null},ht.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},ht.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function ur(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,H=0;H<m.length;++H){var ae=m[H];if(ae&&!ae.da&&ae.capture==v){var qe=ae.listener,ft=ae.ha||ae.src;ae.fa&&ps(u.i,ae),U=qe.call(ft,T)!==!1&&U}}return U&&!T.defaultPrevented}function zo(u,m,v){if(typeof u=="function")v&&(u=I(u,v));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Fr(u){u.g=zo(()=>{u.g=null,u.i&&(u.i=!1,Fr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ni extends G{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(u){G.call(this),this.h=u,this.g={}}D(Oi,G);var Bo=[];function $o(u){ye(u.g,function(m,v){this.g.hasOwnProperty(v)&&ar(m)},u),u.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),$o(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qo=d.JSON.stringify,Wo=d.JSON.parse,Ho=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Di(){}Di.prototype.h=null;function _s(u){return u.h||(u.h=u.i())}function Es(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){fe.call(this,"d")}D(Un,fe);function ws(){fe.call(this,"c")}D(ws,fe);var jn={},Ko=null;function bi(){return Ko=Ko||new ht}jn.La="serverreachability";function Go(u){fe.call(this,jn.La,u)}D(Go,fe);function cr(u){const m=bi();dt(m,new Go(m))}jn.STAT_EVENT="statevent";function Qo(u,m){fe.call(this,jn.STAT_EVENT,u),this.stat=m}D(Qo,fe);function st(u){const m=bi();dt(m,new Qo(m,u))}jn.Ma="timingevent";function Ts(u,m){fe.call(this,jn.Ma,u),this.size=m}D(Ts,fe);function En(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function Vi(u,m,v,T,U,H){u.info(function(){if(u.g)if(H)for(var ae="",qe=H.split("&"),ft=0;ft<qe.length;ft++){var Me=qe[ft].split("=");if(1<Me.length){var Et=Me[0];Me=Me[1];var lt=Et.split("_");ae=2<=lt.length&&lt[1]=="type"?ae+(Et+"="+Me+"&"):ae+(Et+"=redacted&")}}else ae=null;else ae=H;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+v+`
`+ae})}function Is(u,m,v,T,U,H,ae){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+v+`
`+H+" "+ae})}function wn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Wc(u,v)+(T?" "+T:"")})}function Yo(u,m){u.info(function(){return"TIMEOUT: "+m})}Li.prototype.info=function(){};function Wc(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return qo(v)}catch{return m}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ml={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tn;function Mi(){}D(Mi,Di),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},Tn=new Mi;function In(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gl}function gl(){this.i=null,this.g="",this.h=!1}var Xo={},Rs={};function Cs(u,m,v){u.L=1,u.v=$r(en(m)),u.m=v,u.P=!0,Jo(u,null)}function Jo(u,m){u.F=Date.now(),Ke(u),u.A=en(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Wr(v.i,"t",T),u.C=0,v=u.j.J,u.h=new gl,u.g=bl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Ni(I(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Bo[0]=U.toString()),U=Bo);for(var H=0;H<U.length;H++){var ae=Mo(v,U[H],T||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),cr(),Vi(u.i,u.u,u.A,u.l,u.R,u.m)}In.prototype.ca=function(u){u=u.target;const m=this.M;m&&Wt(u)==3?m.j():this.Y(u)},In.prototype.Y=function(u){try{if(u==this.g)e:{const lt=Wt(this.g);var m=this.g.Ba();const hn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||ia(this.g)))){this.J||lt!=4||m==7||(m==8||0>=hn?cr(3):cr(2)),Fi(this);var v=this.g.Z();this.X=v;t:if(yl(this)){var T=ia(this.g);u="";var U=T.length,H=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Ur(this);var ae="";break t}this.h.i=new d.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(H&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,Is(this.i,this.u,this.A,this.l,this.R,lt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,ft=this.g;if((qe=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(qe)){var Me=qe;break t}}Me=null}if(v=Me)wn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zo(this,v);else{this.o=!1,this.s=3,st(12),un(this),Ur(this);break e}}if(this.P){v=!0;let nn;for(;!this.J&&this.C<ae.length;)if(nn=Hc(this,ae),nn==Rs){lt==4&&(this.s=4,st(14),v=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Xo){this.s=4,st(15),wn(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else wn(this.i,this.l,nn,null),Zo(this,nn);if(yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ae.length!=0||this.h.h||(this.s=1,st(16),v=!1),this.o=this.o&&v,!v)wn(this.i,this.l,ae,"[Invalid Chunked Response]"),un(this),Ur(this);else if(0<ae.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),oa(Et),Et.M=!0,st(11))}}else wn(this.i,this.l,ae,null),Zo(this,ae);lt==4&&un(this),this.o&&!this.J&&(lt==4?Ms(this.j,this):(this.o=!1,Ke(this)))}else Os(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),un(this),Ur(this)}}}catch{}finally{}};function yl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hc(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Rs:(v=Number(m.substring(v,T)),isNaN(v)?Xo:(T+=1,T+v>m.length?Rs:(m=m.slice(T,T+v),u.C=T+v,m)))}In.prototype.cancel=function(){this.J=!0,un(this)};function Ke(u){u.S=Date.now()+u.I,vl(u,u.I)}function vl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=En(I(u.ba,u),m)}function Fi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}In.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Yo(this.i,this.A),this.L!=2&&(cr(),st(17)),un(this),this.s=2,Ur(this)):vl(this,this.S-u)};function Ur(u){u.j.G==0||u.J||Ms(u.j,u)}function un(u){Fi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,$o(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Zo(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||jt(v.h,u))){if(!u.K&&jt(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Vs(v),kn(v);else break e;Ls(v),st(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=En(I(v.Za,v),6e3));if(1>=El(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else mr(v,11)}else if((u.K||v.g==u)&&Vs(v),!Q(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Me=U[m];if(v.T=Me[0],Me=Me[1],v.G==2)if(Me[0]=="c"){v.K=Me[1],v.ia=Me[2];const Et=Me[3];Et!=null&&(v.la=Et,v.j.info("VER="+v.la));const lt=Me[4];lt!=null&&(v.Aa=lt,v.j.info("SVER="+v.Aa));const hn=Me[5];hn!=null&&typeof hn=="number"&&0<hn&&(T=1.5*hn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const nn=u.g;if(nn){const Wi=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var H=T.h;H.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ea(H,H.h),H.h=null))}if(T.D){const Us=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(T.ya=Us,We(T.I,T.D,Us))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ae=u;if(T.qa=Dl(T,T.J?T.ia:null,T.W),ae.K){wl(T.h,ae);var qe=ae,ft=T.L;ft&&(qe.I=ft),qe.B&&(Fi(qe),Ke(qe)),T.g=ae}else qi(T);0<v.i.length&&qn(v)}else Me[0]!="stop"&&Me[0]!="close"||mr(v,7);else v.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?mr(v,7):Ct(v):Me[0]!="noop"&&v.l&&v.l.ta(Me),v.v=0)}}cr(4)}catch{}}var _l=class{constructor(u,m){this.g=u,this.map=m}};function Ui(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function El(u){return u.h?1:u.g?u.g.size:0}function jt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function wl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ui.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Tl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return F(u.i)}function As(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function ks(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function jr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=ks(u),T=As(u),U=T.length,H=0;H<U;H++)m.call(void 0,T[H],v&&v[H],u)}var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kc(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),U=null;if(0<=T){var H=u[v].substring(0,T);U=u[v].substring(T+1)}else H=u[v];m(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hr){this.h=u.h,zi(this,u.j),this.o=u.o,this.g=u.g,zr(this,u.s),this.l=u.l;var m=u.i,v=new zn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Br(this,v),this.m=u.m}else u&&(m=String(u).match(ji))?(this.h=!1,zi(this,m[1]||"",!0),this.o=Le(m[2]||""),this.g=Le(m[3]||"",!0),zr(this,m[4]),this.l=Le(m[5]||"",!0),Br(this,m[6]||"",!0),this.m=Le(m[7]||"")):(this.h=!1,this.i=new zn(null,this.h))}hr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(qr(m,Ps,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(qr(m,Ps,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(qr(v,v.charAt(0)=="/"?Rl:Sl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",qr(v,ta)),u.join("")};function en(u){return new hr(u)}function zi(u,m,v){u.j=v?Le(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function zr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Br(u,m,v){m instanceof zn?(u.i=m,Bn(u.i,u.h)):(v||(m=qr(m,Cl)),u.i=new zn(m,u.h))}function We(u,m,v){u.i.set(m,v)}function $r(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Le(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Il),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Il(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ps=/[#\/\?@]/g,Sl=/[#\?:]/g,Rl=/[#\?]/g,Cl=/[#\?@]/g,ta=/#/g;function zn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rt(u){u.g||(u.g=new Map,u.h=0,u.i&&Kc(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=zn.prototype,r.add=function(u,m){Rt(this),this.i=null,u=cn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Sn(u,m){Rt(u),m=cn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Rn(u,m){return Rt(u),m=cn(u,m),u.g.has(m)}r.forEach=function(u,m){Rt(this),this.g.forEach(function(v,T){v.forEach(function(U){u.call(m,U,T,this)},this)},this)},r.na=function(){Rt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const U=u[T];for(let H=0;H<U.length;H++)v.push(m[T])}return v},r.V=function(u){Rt(this);let m=[];if(typeof u=="string")Rn(this,u)&&(m=m.concat(this.g.get(cn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return Rt(this),this.i=null,u=cn(this,u),Rn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Wr(u,m,v){Sn(u,m),0<v.length&&(u.i=null,u.g.set(cn(u,m),F(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const H=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var U=H;ae[T]!==""&&(U+="="+encodeURIComponent(String(ae[T]))),u.push(U)}}return this.i=u.join("&")};function cn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Bn(u,m){m&&!u.j&&(Rt(u),u.i=null,u.g.forEach(function(v,T){var U=T.toLowerCase();T!=U&&(Sn(this,T),Wr(this,U,v))},u)),u.j=m}function Gc(u,m){const v=new Li;if(d.Image){const T=new Image;T.onload=P(qt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=P(qt,v,"TestLoadImage: error",!1,m,T),T.onabort=P(qt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=P(qt,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Al(u,m){const v=new Li,T=new AbortController,U=setTimeout(()=>{T.abort(),qt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(U),H.ok?qt(v,"TestPingServer: ok",!0,m):qt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),qt(v,"TestPingServer: error",!1,m)})}function qt(u,m,v,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(v)}catch{}}function Qc(){this.g=new Ho}function kl(u,m,v){const T=v||"";try{jr(u,function(U,H){let ae=U;y(U)&&(ae=qo(U)),m.push(T+H+"="+encodeURIComponent(ae))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function dr(u){this.l=u.Ub||null,this.j=u.eb||!1}D(dr,Di),dr.prototype.g=function(){return new Bi(this.l,this.j)},dr.prototype.i=function(u){return function(){return u}}({});function Bi(u,m){ht.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Bi,ht),r=Bi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,An(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Cn(this):An(this),this.readyState==3&&Pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Cn(this))},r.Qa=function(u){this.g&&(this.response=u,Cn(this))},r.ga=function(){this.g&&Cn(this)};function Cn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,An(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function An(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fr(u){let m="";return ye(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Hr(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=fr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):We(u,m,v))}function Xe(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Xe,ht);var Yc=/^https?$/i,na=["POST","PUT"];r=Xe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tn.g(),this.v=this.o?_s(this.o):_s(Tn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){$i(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)v.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(na,m,void 0))||T||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of v)this.g.setRequestHeader(H,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){$i(this,H)}};function $i(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,xs(u),tn(u)}function xs(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dt(this,"complete"),dt(this,"abort"),tn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Xe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ra(this):this.bb())},r.bb=function(){ra(this)};function ra(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Wt(u)!=4||u.Z()!=2)){if(u.u&&Wt(u)==4)zo(u.Ea,0,u);else if(dt(u,"readystatechange"),Wt(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ae===0){var U=String(u.D).match(ji)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),T=!Yc.test(U?U.toLowerCase():"")}v=T}if(v)dt(u,"complete"),dt(u,"success");else{u.m=6;try{var H=2<Wt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",xs(u)}}finally{tn(u)}}}}function tn(u,m){if(u.g){Ns(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||dt(u,"ready");try{v.onreadystatechange=T}catch{}}}function Ns(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Wt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Wo(m)}};function ia(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(u){const m={};u=(u.g&&2<=Wt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Q(u[T]))continue;var v=k(u[T]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[U]||[];m[U]=H,H.push(v)}b(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $n(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function sa(u){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$n("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$n("baseRetryDelayMs",5e3,u),this.cb=$n("retryDelaySeedMs",1e4,u),this.Wa=$n("forwardChannelMaxRetries",2,u),this.wa=$n("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(u&&u.concurrentRequestLimit),this.Da=new Qc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=sa.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,T){st(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Dl(this,null,this.W),qn(this)};function Ct(u){if(Ds(u),u.G==3){var m=u.U++,v=en(u.I);if(We(v,"SID",u.K),We(v,"RID",m),We(v,"TYPE","terminate"),pr(u,v),m=new In(u,u.j,m),m.L=2,m.v=$r(en(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=bl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ke(m)}Ol(u)}function kn(u){u.g&&(oa(u),u.g.cancel(),u.g=null)}function Ds(u){kn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Vs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function qn(u){if(!Zt(u.h)&&!u.s){u.s=!0;var m=u.Ga;B||ne(),K||(B(),K=!0),le.add(m,u),u.B=0}}function Xc(u,m){return El(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=En(I(u.Ga,u,m),Nl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new In(this,this.j,u);let H=this.o;if(this.S&&(H?(H=R(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Kr(this,U,m),v=en(this.I),We(v,"RID",u),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),pr(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(fr(H)))+"&"+m:this.m&&Hr(v,this.m,H)),ea(this.h,U),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",m),We(v,"SID","null"),U.T=!0,Cs(U,v,null)):Cs(U,v,m),this.G=2}}else this.G==3&&(u?bs(this,u):this.i.length==0||Zt(this.h)||bs(this))};function bs(u,m){var v;m?v=m.l:v=u.U++;const T=en(u.I);We(T,"SID",u.K),We(T,"RID",v),We(T,"AID",u.T),pr(u,T),u.m&&u.o&&Hr(T,u.m,u.o),v=new In(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Kr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,v),Cs(v,T,m)}function pr(u,m){u.H&&ye(u.H,function(v,T){We(m,T,v)}),u.l&&jr({},function(v,T){We(m,T,v)})}function Kr(u,m,v){v=Math.min(u.i.length,v);var T=u.l?I(u.l.Na,u.l,u):null;e:{var U=u.i;let H=-1;for(;;){const ae=["count="+v];H==-1?0<v?(H=U[0].g,ae.push("ofs="+H)):H=0:ae.push("ofs="+H);let qe=!0;for(let ft=0;ft<v;ft++){let Me=U[ft].g;const Et=U[ft].map;if(Me-=H,0>Me)H=Math.max(0,U[ft].g-100),qe=!1;else try{kl(Et,ae,"req"+Me+"_")}catch{T&&T(Et)}}if(qe){T=ae.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function qi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;B||ne(),K||(B(),K=!0),le.add(m,u),u.v=0}}function Ls(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=En(I(u.Fa,u),Nl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,xl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=En(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),kn(this),xl(this))};function oa(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function xl(u){u.g=new In(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=en(u.qa);We(m,"RID","rpc"),We(m,"SID",u.K),We(m,"AID",u.T),We(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(m,"TO",u.ja),We(m,"TYPE","xmlhttp"),pr(u,m),u.m&&u.o&&Hr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=$r(en(m)),v.m=null,v.P=!0,Jo(v,u)}r.Za=function(){this.C!=null&&(this.C=null,kn(this),Ls(this),st(19))};function Vs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ms(u,m){var v=null;if(u.g==m){Vs(u),oa(u),u.g=null;var T=2}else if(jt(u.h,m))v=m.D,wl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=bi(),dt(T,new Ts(T,v)),qn(u)}else qi(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&Xc(u,m)||T==2&&Ls(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),U){case 1:mr(u,5);break;case 4:mr(u,10);break;case 3:mr(u,6);break;default:mr(u,2)}}}function Nl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function mr(u,m){if(u.j.info("Error code "+m),m==2){var v=I(u.fb,u),T=u.Xa;const U=!T;T=new hr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zi(T,"https"),$r(T),U?Gc(T.toString(),v):Al(T.toString(),v)}else st(2);u.G=0,u.l&&u.l.sa(m),Ol(u),Ds(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Ol(u){if(u.G=0,u.ka=[],u.l){const m=Tl(u.h);(m.length!=0||u.i.length!=0)&&(M(u.ka,m),M(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function Dl(u,m,v){var T=v instanceof hr?en(v):new hr(v);if(T.g!="")m&&(T.g=m+"."+T.g),zr(T,T.s);else{var U=d.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var H=new hr(null);T&&zi(H,T),m&&(H.g=m),U&&zr(H,U),v&&(H.l=v),T=H}return v=u.D,m=u.ya,v&&m&&We(T,v,m),We(T,"VER",u.la),pr(u,T),T}function bl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Xe(new dr({eb:v})):new Xe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function aa(){}r=aa.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Fs(){}Fs.prototype.g=function(u,m){return new zt(u,m)};function zt(u,m){ht.call(this),this.g=new sa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Q(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Q(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Wn(this)}D(zt,ht),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ct(this.g)},zt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=qo(u),u=v);m.i.push(new _l(m.Ya++,u)),m.G==3&&qn(m)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,zt.aa.N.call(this)};function Ll(u){Un.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}D(Ll,Un);function Vl(){ws.call(this),this.status=1}D(Vl,ws);function Wn(u){this.g=u}D(Wn,aa),Wn.prototype.ua=function(){dt(this.g,"a")},Wn.prototype.ta=function(u){dt(this.g,new Ll(u))},Wn.prototype.sa=function(u){dt(this.g,new Vl)},Wn.prototype.ra=function(){dt(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,g_=function(){return new Fs},m_=function(){return bi()},p_=jn,Xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,Gu=Ss,ml.COMPLETE="complete",f_=ml,Es.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Ma=Es,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,d_=Xe}).apply(typeof Ou<"u"?Ou:typeof self<"u"?self:typeof window<"u"?window:{});const ty="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Ef("@firebase/firestore");function ao(){return us.logLevel}function he(r,...e){if(us.logLevel<=De.DEBUG){const t=e.map(Nf);us.debug(`Firestore (${Do}): ${r}`,...t)}}function Or(r,...e){if(us.logLevel<=De.ERROR){const t=e.map(Nf);us.error(`Firestore (${Do}): ${r}`,...t)}}function wo(r,...e){if(us.logLevel<=De.WARN){const t=e.map(Nf);us.warn(`Firestore (${Do}): ${r}`,...t)}}function Nf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+r;throw Or(e),new Error(e)}function $e(r,e){r||Ce()}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ER{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class wR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TR{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ei,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ei)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string"),new y_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Mt(e)}}class IR{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class SR{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new IR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){$e(this.o===void 0);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string"),this.R=t.token,new RR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=AR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ve(r,e){return r<e?-1:r>e?1:0}function To(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new yt(0,0))}static max(){return new Ae(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xn?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Xn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Xn.isNumericId(e),o=Xn.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Xn.extractNumericId(e).compare(Xn.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _i.fromString(e.substring(4,e.length-2))}}class Ze extends Xn{construct(e,t,i){return new Ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const kR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends Xn{construct(e,t,i){return new xt(e,t,i)}static isValidIdentifier(e){return kR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new _e(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new _e(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(t)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Ze.fromString(e))}static fromName(e){return new Te(Ze.fromString(e).popFirst(5))}static empty(){return new Te(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Ze(e.slice()))}}function PR(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new Ii(o,Te.empty(),e)}function xR(r){return new Ii(r.readTime,r.key,-1)}class Ii{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ii(Ae.min(),Te.empty(),-1)}static max(){return new Ii(Ae.max(),Te.empty(),-1)}}function NR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==OR)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,i)=>{t(e)})}static reject(e){return new Y((t,i)=>{i(e)})}static waitFor(e){return new Y((t,i)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},p=>i(p))}),h=!0,l===o&&t()})}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next(o=>o?Y.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new Y((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(_=>{h[y]=_,++d,d===l&&i(h)},_=>o(_))}})}static doWhile(e,t){return new Y((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function bR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Nc.oe=-1;function Oc(r){return r==null}function cc(r){return r===0&&1/r==-1/0}function LR(r){return typeof r=="number"&&Number.isInteger(r)&&!cc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ny(e)),e=MR(r.get(t),e);return ny(e)}function MR(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function ny(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function cs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function __(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Pt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new vt(xt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new E_("Invalid base64 string: "+l):l}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(r){if($e(!!r),typeof r=="string"){let e=0;const t=FR.exec(r);if($e(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(r.seconds),nanos:at(r.nanos)}}function at(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ri(r){return typeof r=="string"?Nt.fromBase64String(r):Nt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Dc(r){const e=r.mapValue.fields.__previous_value__;return Of(e)?Dc(e):e}function Ya(r){const e=Si(r.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,o,l,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Of(r)?4:zR(r)?9007199254740991:jR(r)?10:11:Ce()}function rr(r,e){if(r===e)return!0;const t=Ci(r);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ya(r).isEqual(Ya(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Si(o.timestampValue),d=Si(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ri(o.bytesValue).isEqual(Ri(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=at(o.doubleValue),d=at(l.doubleValue);return h===d?cc(h)===cc(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return To(r.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(ry(h)!==ry(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!rr(h[p],d[p])))return!1;return!0}(r,e);default:return Ce()}}function Ja(r,e){return(r.values||[]).find(t=>rr(t,e))!==void 0}function Io(r,e){if(r===e)return 0;const t=Ci(r),i=Ci(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=at(l.integerValue||l.doubleValue),p=at(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return sy(r.timestampValue,e.timestampValue);case 4:return sy(Ya(r),Ya(e));case 5:return Ve(r.stringValue,e.stringValue);case 6:return function(l,h){const d=Ri(l),p=Ri(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Ve(d[y],p[y]);if(_!==0)return _}return Ve(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ve(at(l.latitude),at(h.latitude));return d!==0?d:Ve(at(l.longitude),at(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return oy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,y,_;const w=l.fields||{},I=h.fields||{},P=(d=w.value)===null||d===void 0?void 0:d.arrayValue,D=(p=I.value)===null||p===void 0?void 0:p.arrayValue,F=Ve(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:oy(P,D)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===bu.mapValue&&h===bu.mapValue)return 0;if(l===bu.mapValue)return 1;if(h===bu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=h.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const I=Ve(p[w],_[w]);if(I!==0)return I;const P=Io(d[p[w]],y[_[w]]);if(P!==0)return P}return Ve(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Ce()}}function sy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=Si(r),i=Si(e),o=Ve(t.seconds,i.seconds);return o!==0?o:Ve(t.nanos,i.nanos)}function oy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Io(t[o],i[o]);if(l)return l}return Ve(t.length,i.length)}function So(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Si(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ri(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Jd(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Jd(t.fields[h])}`;return o+"}"}(r.mapValue):Ce()}function Qu(r){switch(Ci(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+Qu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ri(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Qu(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return cs(i.fields,(l,h)=>{o+=l.length+Qu(h)}),o}(r.mapValue);default:throw Ce()}}function Zd(r){return!!r&&"integerValue"in r}function Df(r){return!!r&&"arrayValue"in r}function ay(r){return!!r&&"nullValue"in r}function ly(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yu(r){return!!r&&"mapValue"in r}function jR(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function za(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return cs(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=za(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=za(r.arrayValue.values[t]);return e}return Object.assign({},r)}function zR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(t)}setAll(e){let t=xt.emptyPath(),i={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=za(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){cs(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new _n(za(this.value))}}function w_(r){const e=[];return cs(r.fields,(t,i)=>{const o=new xt([t]);if(Yu(i)){const l=w_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ft(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,t,i,o){return new Ft(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function uy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=Io(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function cy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!rr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function BR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{}class gt extends T_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new qR(e,t,i):t==="array-contains"?new KR(e,i):t==="in"?new GR(e,i):t==="not-in"?new QR(e,i):t==="array-contains-any"?new YR(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WR(e,i):new HR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Io(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends T_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ir(e,t)}matches(e){return I_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function I_(r){return r.op==="and"}function S_(r){return $R(r)&&I_(r)}function $R(r){for(const e of r.filters)if(e instanceof ir)return!1;return!0}function ef(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+So(r.value);if(S_(r))return r.filters.map(e=>ef(e)).join(",");{const e=r.filters.map(t=>ef(t)).join(",");return`${r.op}(${e})`}}function R_(r,e){return r instanceof gt?function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&rr(i.value,o.value)}(r,e):r instanceof ir?function(i,o){return o instanceof ir&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,d)=>l&&R_(h,o.filters[d]),!0):!1}(r,e):void Ce()}function C_(r){return r instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`}(r):r instanceof ir?function(t){return t.op.toString()+" {"+t.getFilters().map(C_).join(" ,")+"}"}(r):"Filter"}class qR extends gt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class WR extends gt{constructor(e,t){super(e,"in",t),this.keys=A_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HR extends gt{constructor(e,t){super(e,"not-in",t),this.keys=A_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function A_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Te.fromName(i.referenceValue))}class KR extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Df(t)&&Ja(t.arrayValue,this.value)}}class GR extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ja(this.value.arrayValue,t)}}class QR extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ja(this.value.arrayValue,t)}}class YR extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Df(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ja(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.ue=null}}function hy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new XR(r,e,t,i,o,l,h)}function bf(r){const e=Pe(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>ef(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>So(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>So(i)).join(",")),e.ue=t}return e.ue}function Lf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!BR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!R_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!cy(r.startAt,e.startAt)&&cy(r.endAt,e.endAt)}function tf(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JR(r,e,t,i,o,l,h,d){return new bc(r,e,t,i,o,l,h,d)}function k_(r){return new bc(r)}function dy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ZR(r){return r.collectionGroup!==null}function Ba(r){const e=Pe(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new vt(xt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new dc(l,i))}),t.has(xt.keyField().canonicalString())||e.ce.push(new dc(xt.keyField(),i))}return e.ce}function er(r){const e=Pe(r);return e.le||(e.le=eC(e,Ba(r))),e.le}function eC(r,e){if(r.limitType==="F")return hy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new dc(o.field,l)});const t=r.endAt?new hc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new hc(r.startAt.position,r.startAt.inclusive):null;return hy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function nf(r,e,t){return new bc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return Lf(er(r),er(e))&&r.limitType===e.limitType}function P_(r){return`${bf(er(r))}|lt:${r.limitType}`}function lo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>C_(o)).join(", ")}]`),Oc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>So(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>So(o)).join(",")),`Target(${i})`}(er(r))}; limitType=${r.limitType})`}function Vc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of Ba(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,d,p){const y=uy(h,d,p);return h.inclusive?y<=0:y<0}(i.startAt,Ba(i),o)||i.endAt&&!function(h,d,p){const y=uy(h,d,p);return h.inclusive?y>=0:y>0}(i.endAt,Ba(i),o))}(r,e)}function tC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function x_(r){return(e,t)=>{let i=!1;for(const o of Ba(r)){const l=nC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function nC(r,e,t){const i=r.field.isKeyField()?Te.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Io(p,y):Ce()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return __(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new rt(Te.comparator);function Dr(){return rC}const N_=new rt(Te.comparator);function Fa(...r){let e=N_;for(const t of r)e=e.insert(t.key,t);return e}function O_(r){let e=N_;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function os(){return $a()}function D_(){return $a()}function $a(){return new hs(r=>r.toString(),(r,e)=>r.isEqual(e))}const iC=new rt(Te.comparator),sC=new vt(Te.comparator);function be(...r){let e=sC;for(const t of r)e=e.add(t);return e}const oC=new vt(Ve);function aC(){return oC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function b_(r){return{integerValue:""+r}}function lC(r,e){return LR(e)?b_(e):Vf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function uC(r,e,t){return r instanceof fc?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Of(l)&&(l=Dc(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Za?V_(r,e):r instanceof el?M_(r,e):function(o,l){const h=L_(o,l),d=fy(h)+fy(o.Pe);return Zd(h)&&Zd(o.Pe)?b_(d):Vf(o.serializer,d)}(r,e)}function cC(r,e,t){return r instanceof Za?V_(r,e):r instanceof el?M_(r,e):t}function L_(r,e){return r instanceof pc?function(i){return Zd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class fc extends Mc{}class Za extends Mc{constructor(e){super(),this.elements=e}}function V_(r,e){const t=F_(e);for(const i of r.elements)t.some(o=>rr(o,i))||t.push(i);return{arrayValue:{values:t}}}class el extends Mc{constructor(e){super(),this.elements=e}}function M_(r,e){let t=F_(e);for(const i of r.elements)t=t.filter(o=>!rr(o,i));return{arrayValue:{values:t}}}class pc extends Mc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function fy(r){return at(r.integerValue||r.doubleValue)}function F_(r){return Df(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function hC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof Za&&o instanceof Za||i instanceof el&&o instanceof el?To(i.elements,o.elements,rr):i instanceof pc&&o instanceof pc?rr(i.Pe,o.Pe):i instanceof fc&&o instanceof fc}(r.transform,e.transform)}class dC{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fc{}function U_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new z_(r.key,Pr.none()):new cl(r.key,r.data,Pr.none());{const t=r.data,i=_n.empty();let o=new vt(xt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new ds(r.key,i,new Vn(o.toArray()),Pr.none())}}function fC(r,e,t){r instanceof cl?function(o,l,h){const d=o.value.clone(),p=my(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof ds?function(o,l,h){if(!Xu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=my(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(j_(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function qa(r,e,t,i){return r instanceof cl?function(l,h,d,p){if(!Xu(l.precondition,h))return d;const y=l.value.clone(),_=gy(l.fieldTransforms,p,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,i):r instanceof ds?function(l,h,d,p){if(!Xu(l.precondition,h))return d;const y=gy(l.fieldTransforms,p,h),_=h.data;return _.setAll(j_(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(r,e,t,i):function(l,h,d){return Xu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function pC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=L_(i.transform,o||null);l!=null&&(t===null&&(t=_n.empty()),t.set(i.field,l))}return t||null}function py(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&To(i,o,(l,h)=>hC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class cl extends Fc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ds extends Fc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function j_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function my(r,e,t){const i=new Map;$e(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,cC(h,d,t[o]))}return i}function gy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,uC(l,h,e))}return i}class z_ extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mC extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&fC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=qa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=qa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=D_();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=U_(h,d);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,i)=>py(t,i))&&To(this.baseMutations,e.baseMutations,(t,i)=>py(t,i))}}class Mf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){$e(e.mutations.length===i.length);let o=function(){return iC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Mf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Fe;function _C(r){switch(r){default:return Ce();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function B_(r){if(r===void 0)return Or("GRPC error has no .code"),ee.UNKNOWN;switch(r){case ct.OK:return ee.OK;case ct.CANCELLED:return ee.CANCELLED;case ct.UNKNOWN:return ee.UNKNOWN;case ct.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case ct.INTERNAL:return ee.INTERNAL;case ct.UNAVAILABLE:return ee.UNAVAILABLE;case ct.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case ct.NOT_FOUND:return ee.NOT_FOUND;case ct.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case ct.ABORTED:return ee.ABORTED;case ct.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case ct.DATA_LOSS:return ee.DATA_LOSS;default:return Ce()}}(Fe=ct||(ct={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new _i([4294967295,4294967295],0);function yy(r){const e=EC().encode(r),t=new h_;return t.update(e),new Uint8Array(t.digest())}function vy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _i([t,i],0),new _i([o,l],0)]}class Ff{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ua(`Invalid padding: ${t}`);if(i<0)throw new Ua(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=_i.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(_i.fromNumber(i)));return o.compare(wC)===1&&(o=new _i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=yy(e),[i,o]=vy(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Ff(l,o,t);return i.forEach(d=>h.insert(d)),h}insert(e){if(this.Te===0)return;const t=yy(e),[i,o]=vy(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uc(Ae.min(),o,new rt(Ve),Dr(),be())}}class hl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hl(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class $_{constructor(e,t){this.targetId=e,this.me=t}}class q_{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class _y{constructor(){this.fe=0,this.ge=Ey(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),i=be();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce()}}),new hl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Ey()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TC{constructor(e){this.Be=e,this.Le=new Map,this.ke=Dr(),this.qe=Lu(),this.Qe=Lu(),this.Ke=new rt(Ve)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(tf(l))if(i===0){const h=new Te(l.path);this.We(t,h,Ft.newNoDocument(h,Ae.min()))}else $e(i===1);else{const h=this.Ze(t);if(h!==i){const d=this.Xe(e),p=d?this.et(d,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ri(i).toUint8Array()}catch(p){if(p instanceof E_)return wo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ff(h,o,l)}catch(p){return wo(p instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.Be.nt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const d=this.Ye(h);if(d){if(l.current&&tf(d.target)){const p=new Te(d.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,Ft.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let i=be();this.Qe.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Uc(e,t,this.Ke,this.ke,i);return this.ke=Dr(),this.qe=Lu(),this.Qe=Lu(),this.Ke=new rt(Ve),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new _y,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new vt(Ve),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vt(Ve),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new _y),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new rt(Te.comparator)}function Ey(){return new rt(Te.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},SC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RC={and:"AND",or:"OR"};class CC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rf(r,e){return r.useProto3Json||Oc(e)?e:{value:e}}function mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AC(r,e){return mc(r,e.toTimestamp())}function tr(r){return $e(!!r),Ae.fromTimestamp(function(t){const i=Si(t);return new yt(i.seconds,i.nanos)}(r))}function Uf(r,e){return sf(r,e).canonicalString()}function sf(r,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function H_(r){const e=Ze.fromString(r);return $e(X_(e)),e}function of(r,e){return Uf(r.databaseId,e.path)}function Nd(r,e){const t=H_(e);if(t.get(1)!==r.databaseId.projectId)throw new _e(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new _e(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(G_(t))}function K_(r,e){return Uf(r.databaseId,e)}function kC(r){const e=H_(r);return e.length===4?Ze.emptyPath():G_(e)}function af(r){return new Ze(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function G_(r){return $e(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function wy(r,e,t){return{name:of(r,e),fields:t.value.mapValue.fields}}function PC(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,_){return y.useProto3Json?($e(_===void 0||typeof _=="string"),Nt.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Nt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const _=y.code===void 0?ee.UNKNOWN:B_(y.code);return new _e(_,y.message||"")}(h);t=new q_(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Nd(r,i.document.name),l=tr(i.document.updateTime),h=i.document.createTime?tr(i.document.createTime):Ae.min(),d=new _n({mapValue:{fields:i.document.fields}}),p=Ft.newFoundDocument(o,l,h,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Ju(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Nd(r,i.document),l=i.readTime?tr(i.readTime):Ae.min(),h=Ft.newNoDocument(o,l),d=i.removedTargetIds||[];t=new Ju([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Nd(r,i.document),l=i.removedTargetIds||[];t=new Ju([],l,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new vC(o,l),d=i.targetId;t=new $_(d,h)}}return t}function xC(r,e){let t;if(e instanceof cl)t={update:wy(r,e.key,e.value)};else if(e instanceof z_)t={delete:of(r,e.key)};else if(e instanceof ds)t={update:wy(r,e.key,e.data),updateMask:UC(e.fieldMask)};else{if(!(e instanceof mC))return Ce();t={verify:of(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const d=h.transform;if(d instanceof fc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Za)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof el)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof pc)return{fieldPath:h.field.canonicalString(),increment:d.Pe};throw Ce()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:AC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce()}(r,e.precondition)),t}function NC(r,e){return r&&r.length>0?($e(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?tr(o.updateTime):tr(l);return h.isEqual(Ae.min())&&(h=tr(l)),new dC(h,o.transformResults||[])}(t,e))):[]}function OC(r,e){return{documents:[K_(r,e.path)]}}function DC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=K_(r,o);const l=function(y){if(y.length!==0)return Y_(ir.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(_=>function(I){return{field:uo(I.field),direction:VC(I.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=rf(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function bC(r){let e=kC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){$e(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(w){const I=Q_(w);return I instanceof ir&&S_(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(w){return w.map(I=>function(D){return new dc(co(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(w){let I;return I=typeof w=="object"?w.value:w,Oc(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(w){const I=!!w.before,P=w.values||[];return new hc(P,I)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const I=!w.before,P=w.values||[];return new hc(P,I)}(t.endAt)),JR(e,o,h,l,d,"F",p,y)}function LC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Q_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=co(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=co(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=co(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=co(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(r):r.fieldFilter!==void 0?function(t){return gt.create(co(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ir.create(t.compositeFilter.filters.map(i=>Q_(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(r):Ce()}function VC(r){return IC[r]}function MC(r){return SC[r]}function FC(r){return RC[r]}function uo(r){return{fieldPath:r.canonicalString()}}function co(r){return xt.fromServerFormat(r.fieldPath)}function Y_(r){return r instanceof gt?function(t){if(t.op==="=="){if(ly(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NAN"}};if(ay(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ly(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NOT_NAN"}};if(ay(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(t.field),op:MC(t.op),value:t.value}}}(r):r instanceof ir?function(t){const i=t.getFilters().map(o=>Y_(o));return i.length===1?i[0]:{compositeFilter:{op:FC(t.op),filters:i}}}(r):Ce()}function UC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function X_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),d=Nt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.ht=e}}function zC(r){const e=bC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.ln=new $C}addToCollectionParentIndex(e,t){return this.ln.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ii.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class $C{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new vt(Ze.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new vt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ro(0)}static Qn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy([r,e],[t,i]){const o=Ve(r,t);return o===0?Ve(e,i):o}class qC{constructor(e){this.Gn=e,this.buffer=new vt(Iy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Iy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await bo(t)}await this.Yn(3e5)})}}class HC{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Nc.oe);const i=new qC(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Ty)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ty):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,h,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,d=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(y=Date.now(),ao()<=De.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function KC(r,e){return new HC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changes=new hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&qa(i.mutation,o,Vn.empty(),yt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=be()){const o=os();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=Fa();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=os();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,be()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,i,o){let l=Dr();const h=$a(),d=function(){return $a()}();return t.forEach((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof ds)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),qa(_.mutation,y,_.mutation.getFieldMask(),yt.now())):h.set(y.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,_)=>h.set(y,_)),t.forEach((y,_)=>{var w;return d.set(y,new QC(_,(w=h.get(y))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const i=$a();let o=new rt((h,d)=>h-d),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||Vn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const w=(o.get(d.batchId)||be()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,w=D_();_.forEach(I=>{if(!l.has(I)){const P=U_(t.get(I),i.get(I));P!==null&&w.set(I,P),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return Y.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Y.resolve(os());let d=-1,p=l;return h.next(y=>Y.forEach(y,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(_)?Y.resolve():this.remoteDocumentCache.getEntry(e,_).next(I=>{p=p.insert(_,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,be())).next(_=>({batchId:d,changes:O_(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(i=>{let o=Fa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Fa();return this.indexManager.getCollectionParents(e,l).next(d=>Y.forEach(d,p=>{const y=function(w,I){return new bc(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((w,I)=>{h=h.insert(w,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((p,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,Ft.newInvalidDocument(_)))});let d=Fa();return h.forEach((p,y)=>{const _=l.get(p);_!==void 0&&qa(_.mutation,y,Vn.empty(),yt.now()),Vc(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Y.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:zC(o.bundledQuery),readTime:tr(o.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.overlays=new rt(Te.comparator),this.dr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=os();return Y.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),Y.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const o=os(),l=t.length+1,h=new Te(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new rt((y,_)=>y-_);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=os(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=os(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>d.set(y,_)),!(d.size()>=o)););return Y.resolve(d)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new yC(t,i));let l=this.dr.get(t);l===void 0&&(l=be(),this.dr.set(t,l)),this.dr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.Er=new vt(St.Ar),this.Rr=new vt(St.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new St(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new St(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new Te(new Ze([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.Rr.forEachInRange([i,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Te(new Ze([])),i=new St(t,e),o=new St(t,e+1);let l=be();return this.Rr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new St(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Te.comparator(e.key,t.key)||Ve(e.br,t.br)}static Vr(e,t){return Ve(e.br,t.br)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new vt(St.Ar)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new gC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.vr=this.vr.add(new St(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Y.resolve(h)}lookupMutationBatch(e,t){return Y.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],h=>{const d=this.Cr(h.br);l.push(d)}),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vt(Ve);return t.forEach(o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],d=>{i=i.add(d.br)})}),Y.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const h=new St(new Te(l),0);let d=new vt(Ve);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.br)),!0)},h),Y.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){$e(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return Y.forEach(t.mutations,o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new St(t,0),o=this.vr.firstAfterOrEqual(i);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.Nr=e,this.docs=function(){return new rt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let i=Dr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))}),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Dr();const h=t.path,d=new Te(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||NR(xR(_),i)<=0||(o.has(_.key)||Vc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ce()}Br(e,t){return Y.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new nA(this)}getSize(e){return Y.resolve(this.size)}}class nA extends GC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),Y.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.persistence=e,this.Lr=new hs(t=>bf(t),Lf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new jf,this.targetCount=0,this.Qr=Ro.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),Y.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Ro(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Un(t),Y.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Lr.forEach((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),Y.waitFor(l).next(()=>o)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Nc(0),this.Ur=!1,this.Ur=!0,this.Wr=new ZC,this.referenceDelegate=e(this),this.Gr=new rA(this),this.indexManager=new BC,this.remoteDocumentCache=function(o){return new tA(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new jC(t),this.jr=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new eA(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new iA(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return Y.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class iA extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Zr=new jf,this.Xr=null}static ei(e){return new zf(e)}get ti(){if(this.Xr)return this.Xr;throw Ce()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ti,i=>{const o=Te.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ae.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Y.or([()=>Y.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.ri=new hs(i=>VR(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=KC(this,t)}static ei(e,t){return new gc(e,t)}Hr(){}Jr(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return Y.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?Y.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(d=>{d||(i++,l.removeEntry(h,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Y.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qu(e.data.value)),t}ir(e,t,i){return Y.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return Y.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Bf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return LT()?8:bR(Ut())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new sA;return this.ts(e,t,h).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,h,d.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(ao()<=De.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Y.resolve()):(ao()<=De.DEBUG&&he("QueryEngine","Query:",lo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(ao()<=De.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):Y.resolve())}Xi(e,t){if(dy(t))return Y.resolve(null);let i=er(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=nf(t,null,"F"),i=er(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=be(...l);return this.Zi.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,d);return this.ss(t,y,h,p.readTime)?this.Xi(e,nf(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return dy(t)||o.isEqual(Ae.min())?Y.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const h=this.rs(t,l);return this.ss(t,h,i,o)?Y.resolve(null):(ao()<=De.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lo(t)),this.os(e,h,t,PR(o,-1)).next(d=>d))})}rs(e,t){let i=new vt(x_(e));return t.forEach((o,l)=>{Vc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return ao()<=De.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",lo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ii.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new rt(Ve),this.cs=new hs(l=>bf(l),Lf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function lA(r,e,t,i){return new aA(r,e,t,i)}async function Z_(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],d=[];let p=be();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:d}))})})}function uA(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,_){const w=y.batch,I=w.keys();let P=Y.resolve();return I.forEach(D=>{P=P.next(()=>_.getEntry(p,D)).next(F=>{const M=y.docVersions.get(D);$e(M!==null),F.version.compareTo(M)<0&&(w.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),_.addEntry(F)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=be();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function e0(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function cA(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((_,w)=>{const I=o.get(w);if(!I)return;d.push(t.Gr.removeMatchingKeys(l,_.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(l,_.addedDocuments,w)));let P=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(Nt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(w,P),function(F,M,W){return F.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(I,P,_)&&d.push(t.Gr.updateTargetData(l,P))});let p=Dr(),y=be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(hA(l,h,e.documentUpdates).next(_=>{p=_.Is,y=_.ds})),!i.isEqual(Ae.min())){const _=t.Gr.getLastRemoteSnapshotVersion(l).next(w=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return Y.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function hA(r,e,t){let i=be(),o=be();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=Dr();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):he("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Is:h,ds:o}})}function dA(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function fA(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,Y.resolve(o)):t.Gr.allocateTargetId(i).next(h=>(o=new pi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function lf(r,e,t){const i=Pe(r),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Lo(h))throw h;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function Sy(r,e,t){const i=Pe(r);let o=Ae.min(),l=be();return i.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,_){const w=Pe(p),I=w.cs.get(_);return I!==void 0?Y.resolve(w.us.get(I)):w.Gr.getTargetData(y,_)}(i,h,er(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:be())).next(d=>(pA(i,tC(e),d),{documents:d,Es:l})))}function pA(r,e,t){let i=r.ls.get(e)||Ae.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.ls.set(e,i)}class Ry{constructor(){this.activeTargetIds=aC()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mA{constructor(){this._o=new Ry,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Ry,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu=null;function Od(){return Vu===null?Vu=function(){return 268435456+Math.round(2147483648*Math.random())}():Vu++,"0x"+Vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class _A extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,h){const d=Od(),p=this.No(t,i.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,h),this.Lo(t,p,y,o).then(_=>(he("RestConnection",`Received RPC '${t}' ${d}: `,_),_),_=>{throw wo("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,i,o,l,h,d){return this.Oo(t,i,o,l,h)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,i){const o=yA[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const l=Od();return new Promise((h,d)=>{const p=new d_;p.setWithCredentials(!0),p.listenOnce(f_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Gu.NO_ERROR:const _=p.getResponseJson();he(Vt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),h(_);break;case Gu.TIMEOUT:he(Vt,`RPC '${e}' ${l} timed out`),d(new _e(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const w=p.getStatus();if(he(Vt,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const D=function(M){const W=M.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(W)>=0?W:ee.UNKNOWN}(P.status);d(new _e(D,P.message))}else d(new _e(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new _e(ee.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{he(Vt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);he(Vt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=Od(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=g_(),d=m_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");he(Vt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=h.createWebChannel(_,p);let I=!1,P=!1;const D=new vA({Eo:M=>{P?he(Vt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(I||(he(Vt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),he(Vt,`RPC '${e}' stream ${o} sending:`,M),w.send(M))},Ao:()=>w.close()}),F=(M,W,Q)=>{M.listen(W,ie=>{try{Q(ie)}catch(ce){setTimeout(()=>{throw ce},0)}})};return F(w,Ma.EventType.OPEN,()=>{P||(he(Vt,`RPC '${e}' stream ${o} transport opened.`),D.So())}),F(w,Ma.EventType.CLOSE,()=>{P||(P=!0,he(Vt,`RPC '${e}' stream ${o} transport closed`),D.Do())}),F(w,Ma.EventType.ERROR,M=>{P||(P=!0,wo(Vt,`RPC '${e}' stream ${o} transport errored:`,M),D.Do(new _e(ee.UNAVAILABLE,"The operation could not be completed")))}),F(w,Ma.EventType.MESSAGE,M=>{var W;if(!P){const Q=M.data[0];$e(!!Q);const ie=Q,ce=(ie==null?void 0:ie.error)||((W=ie[0])===null||W===void 0?void 0:W.error);if(ce){he(Vt,`RPC '${e}' stream ${o} received error:`,ce);const Ie=ce.status;let ye=function(C){const x=ct[C];if(x!==void 0)return B_(x)}(Ie),b=ce.message;ye===void 0&&(ye=ee.INTERNAL,b="Unknown error status: "+Ie+" with message "+ce.message),P=!0,D.Do(new _e(ye,b)),w.close()}else he(Vt,`RPC '${e}' stream ${o} received:`,Q),D.vo(Q)}}),F(d,p_.STAT_EVENT,M=>{M.stat===Xd.PROXY?he(Vt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Xd.NOPROXY&&he(Vt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.bo()},0),D}}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(r){return new CC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t,i,o,l,h,d,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new t0(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new _e(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EA extends n0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=PC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?tr(h.readTime):Ae.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=af(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=tf(p)?{documents:OC(l,p)}:{query:DC(l,p).ct},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=W_(l,h.resumeToken);const y=rf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ae.min())>0){d.readTime=mc(l,h.snapshotVersion.toTimestamp());const y=rf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=LC(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=af(this.serializer),t.removeTarget=e,this.c_(t)}}class wA extends n0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=NC(e.writeResults,e.commitTime),i=tr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=af(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>xC(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new _e(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,sf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(ee.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.ko(e,sf(t,i),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new _e(ee.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class IA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Or(t),this.C_=!1):he("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{i.enqueueAndForget(async()=>{fs(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Pe(p);y.k_.add(4),await dl(y),y.K_.set("Unknown"),y.k_.delete(4),await zc(y)}(this))})}),this.K_=new IA(i,o)}}async function zc(r){if(fs(r))for(const e of r.q_)await e(!0)}async function dl(r){for(const e of r.q_)await e(!1)}function r0(r,e){const t=Pe(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),Hf(t)?Wf(t):Vo(t).s_()&&qf(t,e))}function $f(r,e){const t=Pe(r),i=Vo(t);t.L_.delete(e),i.s_()&&i0(t,e),t.L_.size===0&&(i.s_()?i.a_():fs(t)&&t.K_.set("Unknown"))}function qf(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vo(r).V_(e)}function i0(r,e){r.U_.xe(e),Vo(r).m_(e)}function Wf(r){r.U_=new TC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),Vo(r).start(),r.K_.F_()}function Hf(r){return fs(r)&&!Vo(r).i_()&&r.L_.size>0}function fs(r){return Pe(r).k_.size===0}function s0(r){r.U_=void 0}async function RA(r){r.K_.set("Online")}async function CA(r){r.L_.forEach((e,t)=>{qf(r,e)})}async function AA(r,e){s0(r),Hf(r)?(r.K_.O_(e),Wf(r)):r.K_.set("Unknown")}async function kA(r,e,t){if(r.K_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.L_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.L_.delete(d),o.U_.removeTarget(d))}(r,e)}catch(i){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yc(r,i)}else if(e instanceof Ju?r.U_.$e(e):e instanceof $_?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ae.min()))try{const i=await e0(r.localStore);t.compareTo(i)>=0&&await function(l,h){const d=l.U_.it(h);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.L_.get(y);_&&l.L_.set(y,_.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,y)=>{const _=l.L_.get(p);if(!_)return;l.L_.set(p,_.withResumeToken(Nt.EMPTY_BYTE_STRING,_.snapshotVersion)),i0(l,p);const w=new pi(_.target,p,y,_.sequenceNumber);qf(l,w)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(i){he("RemoteStore","Failed to raise snapshot:",i),await yc(r,i)}}async function yc(r,e,t){if(!Lo(e))throw e;r.k_.add(1),await dl(r),r.K_.set("Offline"),t||(t=()=>e0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await zc(r)})}function o0(r,e){return e().catch(t=>yc(r,t,e))}async function Bc(r){const e=Pe(r),t=Ai(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;PA(e);)try{const o=await dA(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,xA(e,o)}catch(o){await yc(e,o)}a0(e)&&l0(e)}function PA(r){return fs(r)&&r.B_.length<10}function xA(r,e){r.B_.push(e);const t=Ai(r);t.s_()&&t.f_&&t.g_(e.mutations)}function a0(r){return fs(r)&&!Ai(r).i_()&&r.B_.length>0}function l0(r){Ai(r).start()}async function NA(r){Ai(r).w_()}async function OA(r){const e=Ai(r);for(const t of r.B_)e.g_(t.mutations)}async function DA(r,e,t){const i=r.B_.shift(),o=Mf.from(i,e,t);await o0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Bc(r)}async function bA(r,e){e&&Ai(r).f_&&await async function(i,o){if(function(h){return _C(h)&&h!==ee.ABORTED}(o.code)){const l=i.B_.shift();Ai(i).__(),await o0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Bc(i)}}(r,e),a0(r)&&l0(r)}async function Ay(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const i=fs(t);t.k_.add(3),await dl(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await zc(t)}async function LA(r,e){const t=Pe(r);e?(t.k_.delete(2),await zc(t)):e||(t.k_.add(2),await dl(t),t.K_.set("Unknown"))}function Vo(r){return r.W_||(r.W_=function(t,i,o){const l=Pe(t);return l.b_(),new EA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:RA.bind(null,r),mo:CA.bind(null,r),po:AA.bind(null,r),R_:kA.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Hf(r)?Wf(r):r.K_.set("Unknown")):(await r.W_.stop(),s0(r))})),r.W_}function Ai(r){return r.G_||(r.G_=function(t,i,o){const l=Pe(t);return l.b_(),new wA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:NA.bind(null,r),po:bA.bind(null,r),p_:OA.bind(null,r),y_:DA.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Bc(r)):(await r.G_.stop(),r.B_.length>0&&(he("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new Kf(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gf(r,e){if(Or("AsyncQueue",`${e}: ${r}`),Lo(r))return new _e(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=Fa(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new vo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.z_=new rt(Te.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ce():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Co{constructor(e,t,i,o,l,h,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Co(e,t,vo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class MA{constructor(){this.queries=Py(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=Py(),l.forEach((h,d)=>{for(const p of d.J_)p.onError(i)})})(this,new _e(ee.ABORTED,"Firestore shutting down"))}}function Py(){return new hs(r=>P_(r),Lc)}async function FA(r,e){const t=Pe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new VA,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=Gf(h,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Qf(t)}async function UA(r,e){const t=Pe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jA(r,e){const t=Pe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.J_)d.ta(o)&&(i=!0);h.H_=o}}i&&Qf(t)}function zA(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function Qf(r){r.X_.forEach(e=>{e.next()})}var uf,xy;(xy=uf||(uf={})).na="default",xy.Cache="cache";class BA{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e){this.key=e}}class c0{constructor(e){this.key=e}}class $A{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=be(),this.mutatedKeys=be(),this.Va=x_(e),this.ma=new vo(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new ky,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const I=o.get(_),P=Vc(this.query,w)?w:null,D=!!I&&this.mutatedKeys.has(I.key),F=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let M=!1;I&&P?I.data.isEqual(P.data)?D!==F&&(i.track({type:3,doc:P}),M=!0):this.ya(I,P)||(i.track({type:2,doc:P}),M=!0,(p&&this.Va(P,p)>0||y&&this.Va(P,y)<0)&&(d=!0)):!I&&P?(i.track({type:0,doc:P}),M=!0):I&&!P&&(i.track({type:1,doc:I}),M=!0,(p||y)&&(d=!0)),M&&(P?(h=h.add(P),l=F?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{ma:h,pa:i,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((_,w)=>function(P,D){const F=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return F(P)-F(D)}(_.type,w.type)||this.Va(_.doc,w.doc)),this.wa(i),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new Co(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ky,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=be(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new c0(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new u0(i))}),t}va(e){this.Ea=e.Es,this.Ra=be();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Co.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class qA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class WA{constructor(e){this.key=e,this.Fa=!1}}class HA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new hs(d=>P_(d),Lc),this.Oa=new Map,this.Na=new Set,this.Ba=new rt(Te.comparator),this.La=new Map,this.ka=new jf,this.qa={},this.Qa=new Map,this.Ka=Ro.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function KA(r,e,t=!0){const i=g0(r);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await h0(i,e,t,!0),o}async function GA(r,e){const t=g0(r);await h0(t,e,!0,!1)}async function h0(r,e,t,i){const o=await fA(r.localStore,er(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await QA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&r0(r.remoteStore,o),d}async function QA(r,e,t,i,o){r.Ua=(w,I,P)=>async function(F,M,W,Q){let ie=M.view.ga(W);ie.ss&&(ie=await Sy(F.localStore,M.query,!1).then(({documents:b})=>M.view.ga(b,ie)));const ce=Q&&Q.targetChanges.get(M.targetId),Ie=Q&&Q.targetMismatches.get(M.targetId)!=null,ye=M.view.applyChanges(ie,F.isPrimaryClient,ce,Ie);return Oy(F,M.targetId,ye.ba),ye.snapshot}(r,w,I,P);const l=await Sy(r.localStore,e,!0),h=new $A(e,l.Es),d=h.ga(l.documents),p=hl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,p);Oy(r,t,y.ba);const _=new qA(e,t,h);return r.xa.set(e,_),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function YA(r,e,t){const i=Pe(r),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(h=>!Lc(h,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await lf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&$f(i.remoteStore,o.targetId),cf(i,o.targetId)}).catch(bo)):(cf(i,o.targetId),await lf(i.localStore,o.targetId,!0))}async function XA(r,e){const t=Pe(r),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$f(t.remoteStore,i.targetId))}async function JA(r,e,t){const i=sk(r);try{const o=await function(h,d){const p=Pe(h),y=yt.now(),_=d.reduce((P,D)=>P.add(D.key),be());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let D=Dr(),F=be();return p.hs.getEntries(P,_).next(M=>{D=M,D.forEach((W,Q)=>{Q.isValidDocument()||(F=F.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,D)).next(M=>{w=M;const W=[];for(const Q of d){const ie=pC(Q,w.get(Q.key).overlayedDocument);ie!=null&&W.push(new ds(Q.key,ie,w_(ie.value.mapValue),Pr.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,W,d)}).next(M=>{I=M;const W=M.applyToLocalDocumentSet(w,F);return p.documentOverlayCache.saveOverlays(P,M.batchId,W)})}).then(()=>({batchId:I.batchId,changes:O_(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let y=h.qa[h.currentUser.toKey()];y||(y=new rt(Ve)),y=y.insert(d,p),h.qa[h.currentUser.toKey()]=y}(i,o.batchId,t),await fl(i,o.changes),await Bc(i.remoteStore)}catch(o){const l=Gf(o,"Failed to persist write");t.reject(l)}}async function d0(r,e){const t=Pe(r);try{const i=await cA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?$e(h.Fa):o.removedDocuments.size>0&&($e(h.Fa),h.Fa=!1))}),await fl(t,i,e)}catch(i){await bo(i)}}function Ny(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,h)=>{const d=h.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Pe(h);p.onlineState=d;let y=!1;p.queries.forEach((_,w)=>{for(const I of w.J_)I.ea(d)&&(y=!0)}),y&&Qf(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZA(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),l=o&&o.key;if(l){let h=new rt(Te.comparator);h=h.insert(l,Ft.newNoDocument(l,Ae.min()));const d=be().add(l),p=new Uc(Ae.min(),new Map,new rt(Ve),h,d);await d0(i,p),i.Ba=i.Ba.remove(l),i.La.delete(e),Yf(i)}else await lf(i.localStore,e,!1).then(()=>cf(i,e,t)).catch(bo)}async function ek(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await uA(t.localStore,e);p0(t,i,null),f0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await fl(t,o)}catch(o){await bo(o)}}async function tk(r,e,t){const i=Pe(r);try{const o=await function(h,d){const p=Pe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next(w=>($e(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(i.localStore,e);p0(i,e,t),f0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await fl(i,o)}catch(o){await bo(o)}}function f0(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function p0(r,e,t){const i=Pe(r);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function cf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Oa.get(e))r.xa.delete(i),t&&r.Ma.Wa(i,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(i=>{r.ka.containsKey(i)||m0(r,i)})}function m0(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&($f(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),Yf(r))}function Oy(r,e,t){for(const i of t)i instanceof u0?(r.ka.addReference(i.key,e),nk(r,i)):i instanceof c0?(he("SyncEngine","Document no longer in limbo: "+i.key),r.ka.removeReference(i.key,e),r.ka.containsKey(i.key)||m0(r,i.key)):Ce()}function nk(r,e){const t=e.key,i=t.path.canonicalString();r.Ba.get(t)||r.Na.has(i)||(he("SyncEngine","New document in limbo: "+t),r.Na.add(i),Yf(r))}function Yf(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new Te(Ze.fromString(e)),i=r.Ka.next();r.La.set(i,new WA(t)),r.Ba=r.Ba.insert(t,i),r0(r.remoteStore,new pi(er(k_(t.path)),i,"TargetPurposeLimboResolution",Nc.oe))}}async function fl(r,e,t){const i=Pe(r),o=[],l=[],h=[];i.xa.isEmpty()||(i.xa.forEach((d,p)=>{h.push(i.Ua(p,e,t).then(y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Bf.zi(p.targetId,y);l.push(w)}}))}),await Promise.all(h),i.Ma.R_(o),await async function(p,y){const _=Pe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Y.forEach(y,I=>Y.forEach(I.Wi,P=>_.persistence.referenceDelegate.addReference(w,I.targetId,P)).next(()=>Y.forEach(I.Gi,P=>_.persistence.referenceDelegate.removeReference(w,I.targetId,P)))))}catch(w){if(!Lo(w))throw w;he("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const I=w.targetId;if(!w.fromCache){const P=_.us.get(I),D=P.snapshotVersion,F=P.withLastLimboFreeSnapshotVersion(D);_.us=_.us.insert(I,F)}}}(i.localStore,l))}async function rk(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const i=await Z_(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new _e(ee.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fl(t,i.Ts)}}function ik(r,e){const t=Pe(r),i=t.La.get(e);if(i&&i.Fa)return be().add(i.key);{let o=be();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const d=t.xa.get(h);o=o.unionWith(d.view.fa)}return o}}function g0(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=d0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ik.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZA.bind(null,e),e.Ma.R_=jA.bind(null,e.eventManager),e.Ma.Wa=zA.bind(null,e.eventManager),e}function sk(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tk.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return lA(this.persistence,new oA,e.initialUser,this.serializer)}ja(e){return new J_(zf.ei,this.serializer)}za(e){return new mA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class ok extends vc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){$e(this.persistence.referenceDelegate instanceof gc);const i=this.persistence.referenceDelegate.garbageCollector;return new WC(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new J_(i=>gc.ei(i,t),this.serializer)}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ny(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rk.bind(null,this.syncEngine),await LA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MA}()}createDatastore(e){const t=jc(e.databaseInfo.databaseId),i=function(l){return new _A(l)}(e.databaseInfo);return function(l,h,d,p){return new TA(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,d){return new SA(i,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Ny(this.syncEngine,t,0),function(){return Cy.p()?new Cy:new gA}())}createSyncEngine(e,t){return function(o,l,h,d,p,y,_){const w=new HA(o,l,h,d,p,y);return _&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Pe(o);he("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await dl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Mt.UNAUTHENTICATED,this.clientId=v_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{he("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(he("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Gf(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function bd(r,e){r.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Z_(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Dy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await uk(r);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>Ay(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>Ay(e.remoteStore,o)),r._onlineComponents=e}async function uk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await bd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),await bd(r,new vc)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await bd(r,new ok(void 0));return r._offlineComponents}async function y0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await Dy(r,r._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await Dy(r,new hf))),r._onlineComponents}function ck(r){return y0(r).then(e=>e.syncEngine)}async function hk(r){const e=await y0(r),t=e.eventManager;return t.onListen=KA.bind(null,e.syncEngine),t.onUnlisten=YA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XA.bind(null,e.syncEngine),t}function dk(r,e,t={}){const i=new Ei;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,y){const _=new ak({next:I=>{_.eu(),h.enqueueAndForget(()=>UA(l,w)),I.fromCache&&p.source==="server"?y.reject(new _e(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),w=new BA(d,_,{includeMetadataChanges:!0,ua:!0});return FA(l,w)}(await hk(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(r,e,t){if(!t)throw new _e(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fk(r,e,t,i){if(e===!0&&i===!0)throw new _e(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ly(r){if(!Te.isDocumentKey(r))throw new _e(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vy(r){if(Te.isDocumentKey(r))throw new _e(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce()}function _c(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xf(r);throw new _e(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ER;switch(i.type){case"firstParty":return new SR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=by.get(t);i&&(he("ComponentProvider","Removing Datastore"),by.delete(t),i.terminate())}(this),Promise.resolve()}}function pk(r,e,t,i={}){var o;const l=(r=_c(r,$c))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Mt.MOCK_USER;else{d=kT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new _e(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mt(y)}r._authCredentials=new wR(new y_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qc(this.firestore,e,this._query)}}class Mn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class wi extends qc{constructor(e,t,i){super(e,t,k_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Te(e))}withConverter(e){return new wi(this.firestore,e,this._path)}}function Ec(r,e,...t){if(r=an(r),_0("collection","path",e),r instanceof $c){const i=Ze.fromString(e,...t);return Vy(i),new wi(r,null,i)}{if(!(r instanceof Mn||r instanceof wi))throw new _e(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ze.fromString(e,...t));return Vy(i),new wi(r.firestore,null,i)}}function mk(r,e,...t){if(r=an(r),arguments.length===1&&(e=v_.newId()),_0("doc","path",e),r instanceof $c){const i=Ze.fromString(e,...t);return Ly(i),new Mn(r,null,new Te(i))}{if(!(r instanceof Mn||r instanceof wi))throw new _e(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ze.fromString(e,...t));return Ly(i),new Mn(r.firestore,r instanceof wi?r.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new t0(this,"async_queue_retry"),this.fu=()=>{const i=Dd();i&&he("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=Dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Ei;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Lo(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(i);throw Or("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Kf.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Ce()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class Jf extends $c{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Fy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fy(e),this._firestoreClient=void 0,await e}}}function gk(r,e){const t=typeof r=="object"?r:Cv(),i=typeof r=="string"?r:"(default)",o=Tf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=CT("firestore");l&&pk(o,...l)}return o}function E0(r){if(r._terminated)throw new _e(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yk(r),r._firestoreClient}function yk(r){var e,t,i;const o=r._freezeSettings(),l=function(d,p,y,_){return new UR(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,v0(_.experimentalLongPollingOptions),_.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new lk(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(Nt.fromBase64String(e))}catch(t){throw new _e(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ao(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class _k{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}function T0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class np{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return wc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(T0(this.Mu)&&vk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Ek{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jc(e)}$u(e,t,i,o=!1){return new np({Mu:e,methodName:t,Ku:i,path:xt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wk(r){const e=r._freezeSettings(),t=jc(r._databaseId);return new Ek(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Tk(r,e,t,i,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);C0("Data must be an object, but it was:",h,i);const d=S0(i,h);let p,y;if(l.merge)p=new Vn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const I=Ik(e,w,t);if(!h.contains(I))throw new _e(ee.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Rk(_,I)||_.push(I)}p=new Vn(_),y=h.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=h.fieldTransforms;return new _k(new _n(d),p,y)}function I0(r,e){if(R0(r=an(r)))return C0("Unsupported field value:",e,r),S0(r,e);if(r instanceof w0)return function(i,o){if(!T0(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const d of i){let p=I0(d,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=an(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=yt.fromDate(i);return{timestampValue:mc(o.serializer,l)}}if(i instanceof yt){const l=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(i instanceof ep)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ao)return{bytesValue:W_(o.serializer,i._byteString)};if(i instanceof Mn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Uf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof tp)return function(h,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return Vf(d.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Xf(i)}`)}(r,e)}function S0(r,e){const t={};return __(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(r,(i,o)=>{const l=I0(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function R0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof ep||r instanceof Ao||r instanceof Mn||r instanceof w0||r instanceof tp)}function C0(r,e,t){if(!R0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Xf(t);throw i==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+i)}}function Ik(r,e,t){if((e=an(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return A0(r,e);throw wc("Field path arguments must be of type string or ",r,!1,void 0,t)}const Sk=new RegExp("[~\\*/\\[\\]]");function A0(r,e,t){if(e.search(Sk)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Zf(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function wc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new _e(ee.INVALID_ARGUMENT,d+r+p)}function Rk(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ck(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(P0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ck extends k0{data(){return super.data()}}function P0(r,e){return typeof e=="string"?A0(r,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kk{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return cs(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>at(h.doubleValue));return new tp(l)}convertGeoPoint(e){return new ep(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ya(e));default:return null}}convertTimestamp(e){const t=Si(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ze.fromString(e);$e(X_(i));const o=new Xa(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return o.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xk extends k0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(P0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Zu extends xk{data(e={}){return super.data(e)}}class Nk{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Mu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Zu(this._firestore,this._userDataWriter,i.key,i,new Mu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new Zu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Mu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new Zu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Mu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),_=h.indexOf(d.doc.key)),{type:Ok(d.type),doc:p,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ok(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}class Dk extends kk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function df(r){r=_c(r,qc);const e=_c(r.firestore,Jf),t=E0(e),i=new Dk(e);return Ak(r._query),dk(t,r._query).then(o=>new Nk(e,i,r,o))}function bk(r,e){const t=_c(r.firestore,Jf),i=mk(r),o=Pk(r.converter,e);return Lk(t,[Tk(wk(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Pr.exists(!1))]).then(()=>i)}function Lk(r,e){return function(i,o){const l=new Ei;return i.asyncQueue.enqueueAndForget(async()=>JA(await ck(i),o,l)),l.promise}(E0(r),e)}(function(e,t=!0){(function(o){Do=o})(xo),_o(new as("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new Jf(new TR(i.getProvider("auth-internal")),new CR(i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(y.options.projectId,_)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),yi(ty,"4.7.6",e),yi(ty,"4.7.6","esm2017")})();const Vk={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},x0=Rv(Vk),Tc=gk(x0),po=dR(x0),Mk=r=>J.jsxs("div",{className:"flex flex-col mb-2 items-center",children:[J.jsxs("p",{children:[r.userName," - ",r.score," / ",r.questionsLength.toString()]}),J.jsx("div",{className:"w-24 h-2 rounded-full relative bg-slate-950 dark:bg-slate-200 overflow-hidden",children:J.jsx("div",{className:"absolute bg-orange-500 h-8 shadow shadow-5xl shadow-orange-500",style:{width:`${r.score/r.questionsLength*100}%`}})})]}),Fk=r=>{const e=r.answers,[t,i]=q.useState([]),o=async()=>{let l=[],h=[];e.forEach(d=>{l.push({userID:d.userID,userName:d.userName,answers:d.answers})}),l.forEach(d=>{let p=[],y=d.userID,_=d.userName;d.answers.forEach(w=>{r.questions.forEach(I=>{I.id===w.questionID&&p.push({[I.id]:{correctAnswer:I.correctAnswer,userAnswer:w.answer}})})}),h.push({userID:y,userName:_,answers:p,score:0})}),h.forEach(d=>{let p=0;d.answers.forEach(y=>{(y[Object.keys(y)].userAnswer==!0&&y[Object.keys(y)].correctAnswer=="yes"||y[Object.keys(y)].userAnswer==!1&&y[Object.keys(y)].correctAnswer=="no")&&p++}),d.score=p}),h=h.sort((d,p)=>p.score-d.score),i(h)};return q.useEffect(()=>{o()},[]),J.jsxs("div",{className:"w-full h-full bg-slate-200 dark:bg-slate-950 text-slate-900 dark:text-slate-200 flex flex-col justify-center items-center",children:[J.jsx("h1",{className:"text-xl mb-12",children:r.lang=="no"?"Poengtavle":"Score Board"}),J.jsx("div",{className:"flex items-center justify-center",children:r.answers.length>0?J.jsx("div",{children:t.map((l,h)=>J.jsx(Mk,{userName:l.userName,score:l.score,questionsLength:r.questions.length},h))}):J.jsx("p",{className:"flex text-center",children:r.lang=="no"?"Her var det tomt.. Sjekk tilbake seinere!":"Wow, such empty."})})]})};var Fu={exports:{}},ui={},Ld={exports:{}},Vd,Uy;function Uk(){if(Uy)return Vd;Uy=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Vd=r,Vd}var Md,jy;function jk(){if(jy)return Md;jy=1;var r=Uk();function e(){}function t(){}return t.resetWarningCache=e,Md=function(){function i(h,d,p,y,_,w){if(w!==r){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Md}var zy;function N0(){return zy||(zy=1,Ld.exports=jk()()),Ld.exports}var Uu={exports:{}},vn={},ju={exports:{}},By;function O0(){return By||(By=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=_;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",i="contents",o=/^(input|select|textarea|button|object|iframe)$/;function l(w,I){return I.getPropertyValue("overflow")!=="visible"||w.scrollWidth<=0&&w.scrollHeight<=0}function h(w){var I=w.offsetWidth<=0&&w.offsetHeight<=0;if(I&&!w.innerHTML)return!0;try{var P=window.getComputedStyle(w),D=P.getPropertyValue("display");return I?D!==i&&l(w,P):D===t}catch{return console.warn("Failed to inspect element style"),!1}}function d(w){for(var I=w,P=w.getRootNode&&w.getRootNode();I&&I!==document.body;){if(P&&I===P&&(I=P.host.parentNode),h(I))return!1;I=I.parentNode}return!0}function p(w,I){var P=w.nodeName.toLowerCase(),D=o.test(P)&&!w.disabled||P==="a"&&w.href||I;return D&&d(w)}function y(w){var I=w.getAttribute("tabindex");I===null&&(I=void 0);var P=isNaN(I);return(P||I>=0)&&p(w,!P)}function _(w){var I=[].slice.call(w.querySelectorAll("*"),0).reduce(function(P,D){return P.concat(D.shadowRoot?_(D.shadowRoot):[D])},[]);return I.filter(y)}r.exports=e.default}(ju,ju.exports)),ju.exports}var $y;function zk(){if($y)return vn;$y=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.resetState=h,vn.log=d,vn.handleBlur=p,vn.handleFocus=y,vn.markForFocusLater=_,vn.returnFocus=w,vn.popWithoutFocus=I,vn.setupScopedFocus=P,vn.teardownScopedFocus=D;var r=O0(),e=t(r);function t(F){return F&&F.__esModule?F:{default:F}}var i=[],o=null,l=!1;function h(){i=[]}function d(){}function p(){l=!0}function y(){if(l){if(l=!1,!o)return;setTimeout(function(){if(!o.contains(document.activeElement)){var F=(0,e.default)(o)[0]||o;F.focus()}},0)}}function _(){i.push(document.activeElement)}function w(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,M=null;try{i.length!==0&&(M=i.pop(),M.focus({preventScroll:F}));return}catch{console.warn(["You tried to return focus to",M,"but it is not in the DOM anymore"].join(" "))}}function I(){i.length>0&&i.pop()}function P(F){o=F,window.addEventListener?(window.addEventListener("blur",p,!1),document.addEventListener("focus",y,!0)):(window.attachEvent("onBlur",p),document.attachEvent("onFocus",y))}function D(){o=null,window.addEventListener?(window.removeEventListener("blur",p),document.removeEventListener("focus",y)):(window.detachEvent("onBlur",p),document.detachEvent("onFocus",y))}return vn}var zu={exports:{}},qy;function Bk(){return qy||(qy=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var t=O0(),i=o(t);function o(d){return d&&d.__esModule?d:{default:d}}function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return d.activeElement.shadowRoot?l(d.activeElement.shadowRoot):d.activeElement}function h(d,p){var y=(0,i.default)(d);if(!y.length){p.preventDefault();return}var _=void 0,w=p.shiftKey,I=y[0],P=y[y.length-1],D=l();if(d===D){if(!w)return;_=P}if(P===D&&!w&&(_=I),I===D&&w&&(_=P),_){p.preventDefault(),_.focus();return}var F=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),M=F!=null&&F[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(M){var W=y.indexOf(D);if(W>-1&&(W+=w?-1:1),_=y[W],typeof _>"u"){p.preventDefault(),_=w?P:I,_.focus();return}p.preventDefault(),_.focus()}}r.exports=e.default}(zu,zu.exports)),zu.exports}var Ln={},Fd,Wy;function $k(){if(Wy)return Fd;Wy=1;var r=function(){};return Fd=r,Fd}var Yn={},Ud={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var Hy;function qk(){return Hy||(Hy=1,function(r){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};r.exports?r.exports=t:window.ExecutionEnvironment=t})()}(Ud)),Ud.exports}var Ky;function rp(){if(Ky)return Yn;Ky=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.canUseDOM=Yn.SafeNodeList=Yn.SafeHTMLCollection=void 0;var r=qk(),e=t(r);function t(l){return l&&l.__esModule?l:{default:l}}var i=e.default,o=i.canUseDOM?window.HTMLElement:{};return Yn.SafeHTMLCollection=i.canUseDOM?window.HTMLCollection:{},Yn.SafeNodeList=i.canUseDOM?window.NodeList:{},Yn.canUseDOM=i.canUseDOM,Yn.default=o,Yn}var Gy;function D0(){if(Gy)return Ln;Gy=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.resetState=l,Ln.log=h,Ln.assertNodeList=d,Ln.setElement=p,Ln.validateElement=y,Ln.hide=_,Ln.show=w,Ln.documentNotReadyOrSSRTesting=I;var r=$k(),e=i(r),t=rp();function i(P){return P&&P.__esModule?P:{default:P}}var o=null;function l(){o&&(o.removeAttribute?o.removeAttribute("aria-hidden"):o.length!=null?o.forEach(function(P){return P.removeAttribute("aria-hidden")}):document.querySelectorAll(o).forEach(function(P){return P.removeAttribute("aria-hidden")})),o=null}function h(){}function d(P,D){if(!P||!P.length)throw new Error("react-modal: No elements were found for selector "+D+".")}function p(P){var D=P;if(typeof D=="string"&&t.canUseDOM){var F=document.querySelectorAll(D);d(F,D),D=F}return o=D||o,o}function y(P){var D=P||o;return D?Array.isArray(D)||D instanceof HTMLCollection||D instanceof NodeList?D:[D]:((0,e.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function _(P){var D=!0,F=!1,M=void 0;try{for(var W=y(P)[Symbol.iterator](),Q;!(D=(Q=W.next()).done);D=!0){var ie=Q.value;ie.setAttribute("aria-hidden","true")}}catch(ce){F=!0,M=ce}finally{try{!D&&W.return&&W.return()}finally{if(F)throw M}}}function w(P){var D=!0,F=!1,M=void 0;try{for(var W=y(P)[Symbol.iterator](),Q;!(D=(Q=W.next()).done);D=!0){var ie=Q.value;ie.removeAttribute("aria-hidden")}}catch(ce){F=!0,M=ce}finally{try{!D&&W.return&&W.return()}finally{if(F)throw M}}}function I(){o=null}return Ln}var is={},Qy;function Wk(){if(Qy)return is;Qy=1,Object.defineProperty(is,"__esModule",{value:!0}),is.resetState=i,is.log=o;var r={},e={};function t(y,_){y.classList.remove(_)}function i(){var y=document.getElementsByTagName("html")[0];for(var _ in r)t(y,r[_]);var w=document.body;for(var I in e)t(w,e[I]);r={},e={}}function o(){}var l=function(_,w){return _[w]||(_[w]=0),_[w]+=1,w},h=function(_,w){return _[w]&&(_[w]-=1),w},d=function(_,w,I){I.forEach(function(P){l(w,P),_.add(P)})},p=function(_,w,I){I.forEach(function(P){h(w,P),w[P]===0&&_.remove(P)})};return is.add=function(_,w){return d(_.classList,_.nodeName.toLowerCase()=="html"?r:e,w.split(" "))},is.remove=function(_,w){return p(_.classList,_.nodeName.toLowerCase()=="html"?r:e,w.split(" "))},is}var oo={},Yy;function b0(){if(Yy)return oo;Yy=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.log=i,oo.resetState=o;function r(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}var e=function l(){var h=this;r(this,l),this.register=function(d){h.openInstances.indexOf(d)===-1&&(h.openInstances.push(d),h.emit("register"))},this.deregister=function(d){var p=h.openInstances.indexOf(d);p!==-1&&(h.openInstances.splice(p,1),h.emit("deregister"))},this.subscribe=function(d){h.subscribers.push(d)},this.emit=function(d){h.subscribers.forEach(function(p){return p(d,h.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},t=new e;function i(){console.log("portalOpenInstances ----------"),console.log(t.openInstances.length),t.openInstances.forEach(function(l){return console.log(l)}),console.log("end portalOpenInstances ----------")}function o(){t=new e}return oo.default=t,oo}var ba={},Xy;function Hk(){if(Xy)return ba;Xy=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.resetState=h,ba.log=d;var r=b0(),e=t(r);function t(_){return _&&_.__esModule?_:{default:_}}var i=void 0,o=void 0,l=[];function h(){for(var _=[i,o],w=0;w<_.length;w++){var I=_[w];I&&I.parentNode&&I.parentNode.removeChild(I)}i=o=null,l=[]}function d(){console.log("bodyTrap ----------"),console.log(l.length);for(var _=[i,o],w=0;w<_.length;w++){var I=_[w],P=I||{};console.log(P.nodeName,P.className,P.id)}console.log("edn bodyTrap ----------")}function p(){l.length!==0&&l[l.length-1].focusContent()}function y(_,w){!i&&!o&&(i=document.createElement("div"),i.setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",p),o=i.cloneNode(),o.addEventListener("focus",p)),l=w,l.length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==o&&document.body.appendChild(o)):(i.parentElement&&i.parentElement.removeChild(i),o.parentElement&&o.parentElement.removeChild(o))}return e.default.subscribe(y),ba}var Jy;function Kk(){return Jy||(Jy=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(re){for(var oe=1;oe<arguments.length;oe++){var Se=arguments[oe];for(var B in Se)Object.prototype.hasOwnProperty.call(Se,B)&&(re[B]=Se[B])}return re},i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},o=function(){function re(oe,Se){for(var B=0;B<Se.length;B++){var K=Se[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(oe,K.key,K)}}return function(oe,Se,B){return Se&&re(oe.prototype,Se),B&&re(oe,B),oe}}(),l=tl(),h=N0(),d=Ie(h),p=zk(),y=ce(p),_=Bk(),w=Ie(_),I=D0(),P=ce(I),D=Wk(),F=ce(D),M=rp(),W=Ie(M),Q=b0(),ie=Ie(Q);Hk();function ce(re){if(re&&re.__esModule)return re;var oe={};if(re!=null)for(var Se in re)Object.prototype.hasOwnProperty.call(re,Se)&&(oe[Se]=re[Se]);return oe.default=re,oe}function Ie(re){return re&&re.__esModule?re:{default:re}}function ye(re,oe){if(!(re instanceof oe))throw new TypeError("Cannot call a class as a function")}function b(re,oe){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:re}function R(re,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);re.prototype=Object.create(oe&&oe.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(re,oe):re.__proto__=oe)}var C={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},x=function(oe){return oe.code==="Tab"||oe.keyCode===9},k=function(oe){return oe.code==="Escape"||oe.keyCode===27},N=0,S=function(re){R(oe,re);function oe(Se){ye(this,oe);var B=b(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,Se));return B.setOverlayRef=function(K){B.overlay=K,B.props.overlayRef&&B.props.overlayRef(K)},B.setContentRef=function(K){B.content=K,B.props.contentRef&&B.props.contentRef(K)},B.afterClose=function(){var K=B.props,le=K.appElement,ne=K.ariaHideApp,L=K.htmlOpenClassName,G=K.bodyOpenClassName,fe=K.parentSelector,ke=fe&&fe().ownerDocument||document;G&&F.remove(ke.body,G),L&&F.remove(ke.getElementsByTagName("html")[0],L),ne&&N>0&&(N-=1,N===0&&P.show(le)),B.props.shouldFocusAfterRender&&(B.props.shouldReturnFocusAfterClose?(y.returnFocus(B.props.preventScroll),y.teardownScopedFocus()):y.popWithoutFocus()),B.props.onAfterClose&&B.props.onAfterClose(),ie.default.deregister(B)},B.open=function(){B.beforeOpen(),B.state.afterOpen&&B.state.beforeClose?(clearTimeout(B.closeTimer),B.setState({beforeClose:!1})):(B.props.shouldFocusAfterRender&&(y.setupScopedFocus(B.node),y.markForFocusLater()),B.setState({isOpen:!0},function(){B.openAnimationFrame=requestAnimationFrame(function(){B.setState({afterOpen:!0}),B.props.isOpen&&B.props.onAfterOpen&&B.props.onAfterOpen({overlayEl:B.overlay,contentEl:B.content})})}))},B.close=function(){B.props.closeTimeoutMS>0?B.closeWithTimeout():B.closeWithoutTimeout()},B.focusContent=function(){return B.content&&!B.contentHasFocus()&&B.content.focus({preventScroll:!0})},B.closeWithTimeout=function(){var K=Date.now()+B.props.closeTimeoutMS;B.setState({beforeClose:!0,closesAt:K},function(){B.closeTimer=setTimeout(B.closeWithoutTimeout,B.state.closesAt-Date.now())})},B.closeWithoutTimeout=function(){B.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},B.afterClose)},B.handleKeyDown=function(K){x(K)&&(0,w.default)(B.content,K),B.props.shouldCloseOnEsc&&k(K)&&(K.stopPropagation(),B.requestClose(K))},B.handleOverlayOnClick=function(K){B.shouldClose===null&&(B.shouldClose=!0),B.shouldClose&&B.props.shouldCloseOnOverlayClick&&(B.ownerHandlesClose()?B.requestClose(K):B.focusContent()),B.shouldClose=null},B.handleContentOnMouseUp=function(){B.shouldClose=!1},B.handleOverlayOnMouseDown=function(K){!B.props.shouldCloseOnOverlayClick&&K.target==B.overlay&&K.preventDefault()},B.handleContentOnClick=function(){B.shouldClose=!1},B.handleContentOnMouseDown=function(){B.shouldClose=!1},B.requestClose=function(K){return B.ownerHandlesClose()&&B.props.onRequestClose(K)},B.ownerHandlesClose=function(){return B.props.onRequestClose},B.shouldBeClosed=function(){return!B.state.isOpen&&!B.state.beforeClose},B.contentHasFocus=function(){return document.activeElement===B.content||B.content.contains(document.activeElement)},B.buildClassName=function(K,le){var ne=(typeof le>"u"?"undefined":i(le))==="object"?le:{base:C[K],afterOpen:C[K]+"--after-open",beforeClose:C[K]+"--before-close"},L=ne.base;return B.state.afterOpen&&(L=L+" "+ne.afterOpen),B.state.beforeClose&&(L=L+" "+ne.beforeClose),typeof le=="string"&&le?L+" "+le:L},B.attributesFromObject=function(K,le){return Object.keys(le).reduce(function(ne,L){return ne[K+"-"+L]=le[L],ne},{})},B.state={afterOpen:!1,beforeClose:!1},B.shouldClose=null,B.moveFromContentToOverlay=null,B}return o(oe,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(B,K){this.props.isOpen&&!B.isOpen?this.open():!this.props.isOpen&&B.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!K.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var B=this.props,K=B.appElement,le=B.ariaHideApp,ne=B.htmlOpenClassName,L=B.bodyOpenClassName,G=B.parentSelector,fe=G&&G().ownerDocument||document;L&&F.add(fe.body,L),ne&&F.add(fe.getElementsByTagName("html")[0],ne),le&&(N+=1,P.hide(K)),ie.default.register(this)}},{key:"render",value:function(){var B=this.props,K=B.id,le=B.className,ne=B.overlayClassName,L=B.defaultStyles,G=B.children,fe=le?{}:L.content,ke=ne?{}:L.overlay;if(this.shouldBeClosed())return null;var xe={ref:this.setOverlayRef,className:this.buildClassName("overlay",ne),style:t({},ke,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Oe=t({id:K,ref:this.setContentRef,style:t({},fe,this.props.style.content),className:this.buildClassName("content",le),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Ue=this.props.contentElement(Oe,G);return this.props.overlayElement(xe,Ue)}}]),oe}(l.Component);S.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},S.propTypes={isOpen:d.default.bool.isRequired,defaultStyles:d.default.shape({content:d.default.object,overlay:d.default.object}),style:d.default.shape({content:d.default.object,overlay:d.default.object}),className:d.default.oneOfType([d.default.string,d.default.object]),overlayClassName:d.default.oneOfType([d.default.string,d.default.object]),parentSelector:d.default.func,bodyOpenClassName:d.default.string,htmlOpenClassName:d.default.string,ariaHideApp:d.default.bool,appElement:d.default.oneOfType([d.default.instanceOf(W.default),d.default.instanceOf(M.SafeHTMLCollection),d.default.instanceOf(M.SafeNodeList),d.default.arrayOf(d.default.instanceOf(W.default))]),onAfterOpen:d.default.func,onAfterClose:d.default.func,onRequestClose:d.default.func,closeTimeoutMS:d.default.number,shouldFocusAfterRender:d.default.bool,shouldCloseOnOverlayClick:d.default.bool,shouldReturnFocusAfterClose:d.default.bool,preventScroll:d.default.bool,role:d.default.string,contentLabel:d.default.string,aria:d.default.object,data:d.default.object,children:d.default.node,shouldCloseOnEsc:d.default.bool,overlayRef:d.default.func,contentRef:d.default.func,id:d.default.string,overlayElement:d.default.func,contentElement:d.default.func,testId:d.default.string},e.default=S,r.exports=e.default}(Uu,Uu.exports)),Uu.exports}function L0(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function V0(r){function e(t){var i=this.constructor.getDerivedStateFromProps(r,t);return i??null}this.setState(e.bind(this))}function M0(r,e){try{var t=this.props,i=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,i)}finally{this.props=t,this.state=i}}L0.__suppressDeprecationWarning=!0;V0.__suppressDeprecationWarning=!0;M0.__suppressDeprecationWarning=!0;function Gk(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,i=null,o=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?o="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),t!==null||i!==null||o!==null){var l=r.displayName||r.name,h=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+l+" uses "+h+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(i!==null?`
  `+i:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=L0,e.componentWillReceiveProps=V0),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=M0;var d=e.componentDidUpdate;e.componentDidUpdate=function(y,_,w){var I=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:w;d.call(this,y,_,I)}}return r}const Qk=Object.freeze(Object.defineProperty({__proto__:null,polyfill:Gk},Symbol.toStringTag,{value:"Module"})),Yk=zE(Qk);var Zy;function Xk(){if(Zy)return ui;Zy=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.bodyOpenClassName=ui.portalClassName=void 0;var r=Object.assign||function(k){for(var N=1;N<arguments.length;N++){var S=arguments[N];for(var re in S)Object.prototype.hasOwnProperty.call(S,re)&&(k[re]=S[re])}return k},e=function(){function k(N,S){for(var re=0;re<S.length;re++){var oe=S[re];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(N,oe.key,oe)}}return function(N,S,re){return S&&k(N.prototype,S),re&&k(N,re),N}}(),t=tl(),i=M(t),o=ff(),l=M(o),h=N0(),d=M(h),p=Kk(),y=M(p),_=D0(),w=F(_),I=rp(),P=M(I),D=Yk;function F(k){if(k&&k.__esModule)return k;var N={};if(k!=null)for(var S in k)Object.prototype.hasOwnProperty.call(k,S)&&(N[S]=k[S]);return N.default=k,N}function M(k){return k&&k.__esModule?k:{default:k}}function W(k,N){if(!(k instanceof N))throw new TypeError("Cannot call a class as a function")}function Q(k,N){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:k}function ie(k,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);k.prototype=Object.create(N&&N.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(k,N):k.__proto__=N)}var ce=ui.portalClassName="ReactModalPortal",Ie=ui.bodyOpenClassName="ReactModal__Body--open",ye=I.canUseDOM&&l.default.createPortal!==void 0,b=function(N){return document.createElement(N)},R=function(){return ye?l.default.createPortal:l.default.unstable_renderSubtreeIntoContainer};function C(k){return k()}var x=function(k){ie(N,k);function N(){var S,re,oe,Se;W(this,N);for(var B=arguments.length,K=Array(B),le=0;le<B;le++)K[le]=arguments[le];return Se=(re=(oe=Q(this,(S=N.__proto__||Object.getPrototypeOf(N)).call.apply(S,[this].concat(K))),oe),oe.removePortal=function(){!ye&&l.default.unmountComponentAtNode(oe.node);var ne=C(oe.props.parentSelector);ne&&ne.contains(oe.node)?ne.removeChild(oe.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},oe.portalRef=function(ne){oe.portal=ne},oe.renderPortal=function(ne){var L=R(),G=L(oe,i.default.createElement(y.default,r({defaultStyles:N.defaultStyles},ne)),oe.node);oe.portalRef(G)},re),Q(oe,Se)}return e(N,[{key:"componentDidMount",value:function(){if(I.canUseDOM){ye||(this.node=b("div")),this.node.className=this.props.portalClassName;var re=C(this.props.parentSelector);re.appendChild(this.node),!ye&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(re){var oe=C(re.parentSelector),Se=C(this.props.parentSelector);return{prevParent:oe,nextParent:Se}}},{key:"componentDidUpdate",value:function(re,oe,Se){if(I.canUseDOM){var B=this.props,K=B.isOpen,le=B.portalClassName;re.portalClassName!==le&&(this.node.className=le);var ne=Se.prevParent,L=Se.nextParent;L!==ne&&(ne.removeChild(this.node),L.appendChild(this.node)),!(!re.isOpen&&!K)&&!ye&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!I.canUseDOM||!this.node||!this.portal)){var re=this.portal.state,oe=Date.now(),Se=re.isOpen&&this.props.closeTimeoutMS&&(re.closesAt||oe+this.props.closeTimeoutMS);Se?(re.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,Se-oe)):this.removePortal()}}},{key:"render",value:function(){if(!I.canUseDOM||!ye)return null;!this.node&&ye&&(this.node=b("div"));var re=R();return re(i.default.createElement(y.default,r({ref:this.portalRef,defaultStyles:N.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(re){w.setElement(re)}}]),N}(t.Component);return x.propTypes={isOpen:d.default.bool.isRequired,style:d.default.shape({content:d.default.object,overlay:d.default.object}),portalClassName:d.default.string,bodyOpenClassName:d.default.string,htmlOpenClassName:d.default.string,className:d.default.oneOfType([d.default.string,d.default.shape({base:d.default.string.isRequired,afterOpen:d.default.string.isRequired,beforeClose:d.default.string.isRequired})]),overlayClassName:d.default.oneOfType([d.default.string,d.default.shape({base:d.default.string.isRequired,afterOpen:d.default.string.isRequired,beforeClose:d.default.string.isRequired})]),appElement:d.default.oneOfType([d.default.instanceOf(P.default),d.default.instanceOf(I.SafeHTMLCollection),d.default.instanceOf(I.SafeNodeList),d.default.arrayOf(d.default.instanceOf(P.default))]),onAfterOpen:d.default.func,onRequestClose:d.default.func,closeTimeoutMS:d.default.number,ariaHideApp:d.default.bool,shouldFocusAfterRender:d.default.bool,shouldCloseOnOverlayClick:d.default.bool,shouldReturnFocusAfterClose:d.default.bool,preventScroll:d.default.bool,parentSelector:d.default.func,aria:d.default.object,data:d.default.object,role:d.default.string,contentLabel:d.default.string,shouldCloseOnEsc:d.default.bool,overlayRef:d.default.func,contentRef:d.default.func,id:d.default.string,overlayElement:d.default.func,contentElement:d.default.func},x.defaultProps={isOpen:!1,portalClassName:ce,bodyOpenClassName:Ie,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(N,S){return i.default.createElement("div",N,S)},contentElement:function(N,S){return i.default.createElement("div",N,S)}},x.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,D.polyfill)(x),ui.default=x,ui}var ev;function Jk(){return ev||(ev=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Xk(),i=o(t);function o(l){return l&&l.__esModule?l:{default:l}}e.default=i.default,r.exports=e.default}(Fu,Fu.exports)),Fu.exports}var Zk=Jk();const Wa=jE(Zk),eP=r=>{const[e,t]=q.useState(),i=l=>{l.target.checked&&(document.getElementById("yes-"+r.question.id).checked=!0,document.getElementById("no-"+r.question.id).checked=!1,t(!0),r.setAnswers(h=>{const d=h.findIndex(p=>p.questionID===r.question.id);if(d!==-1){const p=[...h];return p[d].answer=!0,p}else return[...h,{questionID:r.question.id,answer:!0}]}))},o=l=>{l.target.checked&&(document.getElementById("yes-"+r.question.id).checked=!1,document.getElementById("no-"+r.question.id).checked=!0,t(!1),r.setAnswers(h=>{const d=h.findIndex(p=>p.questionID===r.question.id);if(d!==-1){const p=[...h];return p[d].answer=!1,p}else return[...h,{questionID:r.question.id,answer:!1}]}))};return J.jsxs("div",{className:"w-full flex gap-8 mb-4 border-b border-orange-500 pb-2",children:[J.jsx("div",{className:"w-2/3 flex justify-start",children:J.jsx("p",{className:"text-left",children:r.lang=="no"?r.question.questionNo:r.question.questionEn})}),J.jsxs("div",{className:"flex justify-center items-center gap-2 h-full",children:[J.jsx("input",{className:"outline-none focus:ring-2 focus:ring-orange-500",type:"checkbox",value:e,onChange:l=>{i(l)},id:"yes-"+r.question.id}),J.jsx("label",{htmlFor:"yes-"+r.question.id,children:r.lang=="no"?"Ja":"Yes"})]}),J.jsxs("div",{className:"flex justify-center items-center gap-2 h-full",children:[J.jsx("input",{className:"outline-none focus:ring-2 focus:ring-orange-500",type:"checkbox",value:!e,onChange:l=>{o(l)},id:"no-"+r.question.id}),J.jsx("label",{htmlFor:"no-"+r.question.id,children:r.lang=="no"?"Nei":"No"})]})]})},tP=r=>{const[e,t]=q.useState([]),[i,o]=q.useState(""),[l,h]=q.useState(""),d=Ec(Tc,"questions"),p=async()=>{const M=await df(d);t(M.docs.map(W=>({id:W.id,...W.data()})))};q.useEffect(()=>{p()},[]);const[y,_]=q.useState(!1);Wa.setAppElement("#root");const w=()=>{_(!0)},I=()=>{_(!1)},[P,D]=q.useState([]),F=async()=>{if(l.length==0)o("Du m skrive inn et kallenavn"),setTimeout(()=>{o("")},3e3);else try{await bk(Ec(Tc,"answers"),{userID:r.userID,userName:l,answers:P}).then(()=>{o("Ditt svar er sendt!"),setTimeout(()=>{o(""),I(),window.location.reload()},3e3)})}catch(M){o(M.message),setTimeout(()=>{},3e3),o("")}};return J.jsxs("div",{className:"h-full w-full flex flex-col items-center bg-slate-200 dark:bg-slate-950 text-slate-950 dark:text-slate-200",children:[J.jsx("h2",{className:"text-xl mb-12",children:r.lang=="no"?"Sprsml":"Questions"}),e.map((M,W)=>J.jsx(eP,{question:M,lang:r.lang,answers:P,setAnswers:D},W)),J.jsx("button",{onClick:w,className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition",children:r.lang=="no"?"Send inn svar":"Submit answers"}),J.jsxs(Wa,{isOpen:y,onRequestClose:I,className:"w-full h-full bg-slate-200 dark:bg-slate-950 text-slate-900 dark:text-slate-200 flex flex-col justify-center items-center",contentLabel:"Submit Answers Modal",children:[J.jsx("label",{htmlFor:"nameInput",children:r.lang=="no"?"Til sist m du skrive inn et kallenavn. Det er dette som vil vises p ledertavlen.":"Lastly, please enter a nickname. This will be displayed on the scoreboard."}),J.jsx("input",{type:"text",id:"nameInput",className:"p-2 bg-slate-200 border border-slate-950 dark:bg-slate-950 dark:text-slate-200 dark:border-slate-200 focus:outline-none focus:border-orange-500 focus:bg-slate-100	focus:dark:bg-slate-800 dark:focus:border-orange-500",placeholder:r.lang=="no"?"Navn":"Name",onChange:M=>{h(M.target.value)}}),J.jsx("p",{children:r.lang=="no"?"Er du sikker p at du vil sende inn? Du fr ikke endret svarene dine":"Are you absolutely sure you want to submit your answers? No taksies backsies!"}),J.jsxs("div",{children:[J.jsxs("div",{className:"flex justify-around mt-12 gap-4",children:[J.jsx("button",{className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition",onClick:I,children:r.lang=="no"?"G tilbake":"Go back"}),J.jsx("button",{className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition",onClick:()=>{F()},children:r.lang=="no"?"Send inn":"Submit"})]}),J.jsx("p",{className:"text-xl text-center text-orange-500 mt-12",children:i})]})]})]})},nP=r=>{const e=()=>{let t=[];return r.questions.forEach(i=>{r.answers.forEach(o=>{o.userID===r.userID&&o.answers.forEach(l=>{l.questionID===i.id&&t.push({questionNo:i.questionNo,questionEn:i.questionEn,answer:l.answer})})})}),t};return J.jsxs("div",{className:"w-full h-full bg-slate-200 dark:bg-slate-950 text-slate-900 dark:text-slate-200 flex flex-col justify-center items-center",children:[J.jsx("h1",{className:"text-xl",children:r.lang==="no"?"Dine svar":"Your answers"}),e().length>0?J.jsxs("table",{className:"w-full my-12 w-11/12 md:w-2/3 lg:w-1/2",children:[J.jsx("thead",{children:J.jsxs("tr",{className:"bg-slate-300  dark:bg-slate-800 text-slate-950 dark:text-slate-200",children:[J.jsx("th",{children:J.jsx("h2",{className:"text-left py-2 px-2 md:px-8",children:r.lang==="no"?"Sprsml":"Questions"})}),J.jsx("th",{children:J.jsx("h2",{className:"text-nowrap text-left p-2",children:r.lang==="no"?"Dine svar":"Your answer"})})]})}),J.jsx("tbody",{className:"",children:e().map((t,i)=>J.jsxs("tr",{className:i%2===0?"bg-slate-100 dark:bg-slate-900 text-slate-950 dark:text-slate-200":"bg-slate-300  dark:bg-slate-800 text-slate-950 dark:text-slate-200",children:[J.jsx("td",{className:"py-2 px-2 md:px-8",children:r.lang==="no"?t.questionNo:t.questionEn}),J.jsx("td",{className:"py-2 px-2 md:px-8",children:t.answer?r.lang==="no"?"Ja":"Yes":r.lang==="no"?"Nei":"No"})]},i))})]}):J.jsx("h2",{className:"infotext mt-12",children:r.lang==="no"?"Her var det ingenting...":"Nothing here yet..."})]})},rP=r=>{const[e,t,i]=c_(po),[o,l]=q.useState([]),[h,d]=q.useState([]),[p,y]=q.useState(!0),_=mf(),w=()=>{po.signOut().then(()=>{console.log("successfully logged out"),_("/")}).catch(x=>{console.log(x)})},I=e?e.uid:"",P=Ec(Tc,"answers"),D=async()=>{await df(P).then(x=>{l(x.docs.map(k=>({id:k.id,...k.data()})))})};q.useEffect(()=>{D()},[]);const F=Ec(Tc,"questions"),M=async()=>{const x=await df(F);d(x.docs.map(k=>({id:k.id,...k.data()})))};q.useEffect(()=>{M()},[]);const W=()=>{let x=[],k=!0;o.forEach(re=>{x.push(re.userID)}),x.includes(I)&&(k=!1),new Date("2025-11-02T00:00:00")<new Date&&(k=!1),y(k)};q.useEffect(()=>{W()},[o,p]);const[Q,ie]=q.useState(!1);Wa.setAppElement("#root");const ce=()=>{ie(!0)},Ie=()=>{ie(!1)},[ye,b]=q.useState(!1),R=()=>{b(!0)},C=()=>{b(!1)};return J.jsx("div",{className:"h-full min-h-screen flex flex-col justify-center items-center",children:t?J.jsx("div",{children:r.lang=="no"?"Laster...":"Loading..."}):J.jsx(J.Fragment,{children:e?J.jsxs("div",{className:"h-full flex flex-col justify-center items-center",children:[J.jsxs("div",{className:"flex h-full w-full justify-center items-center gap-4 mb-12 mt-16 md:mt-4",children:[J.jsx("button",{onClick:()=>{ce()},className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 px-2 border-b-2 font-semibold transition focus:outline-none focus:border-orange-500 dark:focus:border-orange-500",children:r.lang=="no"?"Se ledertavlen":"View Scoreboard"}),J.jsx("button",{onClick:()=>{R()},className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 px-2 border-b-2 font-semibold transition focus:outline-none focus:border-orange-500 dark:focus:border-orange-500",children:r.lang=="no"?"Se dine svar":"View your answers"})]}),J.jsx("h1",{className:"text-5xl text-center text-orange-500 mb-12",children:"SPKULA 2025"}),J.jsx("button",{className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition absolute left-4 top-4",onClick:w,children:r.lang=="no"?"Logg ut":"Sign out"}),p?J.jsx(tP,{lang:r.lang,userID:I}):J.jsx("div",{className:"text-xl",children:r.lang=="no"?"Du har ikke lenger mulighet til  sende inn svar":"You are no longer able to submit answers."}),J.jsxs(Wa,{isOpen:Q,onRequestClose:Ie,className:"w-full h-full outline-none",contentLabel:"Scoreboard Modal",children:[J.jsx("button",{className:"h-8 w-8 flex items-center justify-center rounded-full bg-slate-950 text-slate-200 dark:bg-slate-200 dark:text-slate-950 focus:bg-orange-500 dark:focus:bg-orange-500 focus:outline-none absolute top-4 right-4",onClick:Ie,children:J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}),J.jsx(Fk,{lang:r.lang,answers:o,questions:h})]}),J.jsxs(Wa,{isOpen:ye,onRequestClose:C,className:"w-full h-full overflow-auto outline-none",contentLabel:"User Answers Modal",children:[J.jsx("button",{className:"h-8 w-8 flex items-center justify-center rounded-full bg-slate-950 text-slate-200 dark:bg-slate-200 dark:text-slate-950 focus:bg-orange-500 dark:focus:bg-orange-500 focus:outline-none absolute top-4 right-4",onClick:C,children:J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}),J.jsx(nP,{lang:r.lang,answers:o,questions:h,userID:e.uid})]})]}):J.jsxs("div",{className:"flex flex-col justify-center items-center h-full w-full min-h-screen",children:[J.jsx("h1",{className:"text-orange-500 text-5xl text-center mb-12",children:"SPKULA 2025"}),J.jsx("button",{className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition",onClick:()=>_("/login"),children:r.lang=="no"?"Logg inn":"Sign In"})]})})})},iP=r=>{const[e]=c_(po),t=mf(),i=ki(),{search:o}=i,[l,h]=q.useState(""),[d,p]=q.useState(!1),[y,_]=q.useState(""),[w,I]=q.useState(""),[P,D]=q.useState(!1),[F,M]=q.useState("");q.useEffect(()=>{if(e)t("/");else if(XS(po,window.location.href)){let Q=localStorage.getItem("email");Q||(Q=window.prompt({lang}=="no"?"Skriv inn eposten din":"Enter your email")),D(!0),JS(po,localStorage.getItem("email"),window.location.href).then(ie=>{localStorage.removeItem("email"),D(!1),M(""),t("/")}).catch(ie=>{D(!1),M(ie.message),t("/login")})}else console.log("enter email and sign in")},[e,o,t]);const W=Q=>{Q.preventDefault(),p(!0),YS(po,l,{url:"http://localhost:5173/login",handleCodeInApp:!0}).then(()=>{localStorage.setItem("email",l),p(!1),_(""),I(r.lang=="no"?"Sjekk eposten din for  logge inn":"Check your email to sign in"),setTimeout(()=>{I("")},3e3)}).catch(ie=>{p(!1),_(ie.message)})};return J.jsx("div",{className:"h-full w-full min-h-screen flex flex-col justify-center items-center",children:P?J.jsx("div",{className:"text-xl text-orange-500",children:r.lang=="no"?"Laster...":"Loading..."}):J.jsx(J.Fragment,{children:F!==""?J.jsx("div",{className:"error-msg",children:F}):J.jsx(J.Fragment,{children:e?J.jsx("div",{children:r.lang=="no"?"Vennligst vent.":"Please wait..."}):J.jsxs("form",{className:"form-group custom-form flex flex-col gap-8",onSubmit:W,children:[J.jsx("label",{className:"text-center text-xl",children:r.lang=="no"?"Logg inn / registrer deg":"Sign in / register"}),J.jsx("input",{type:"email",required:!0,placeholder:r.lang=="no"?"Epost":"Email",className:"form-control p-2 bg-slate-200 border border-slate-950 dark:bg-slate-950 dark:text-slate-200 dark:border-slate-200 focus:outline-none focus:border-orange-500 focus:bg-slate-100	focus:dark:bg-slate-800 dark:focus:border-orange-500",value:l||"",onChange:Q=>h(Q.target.value)}),J.jsx("button",{type:"submit",className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 focus:bg-orange-500 focus:outline-none active:scale-105 px-12 py-2 border font-semibold transition",children:d?J.jsx("span",{children:r.lang=="no"?"Logger deg inn":"Logging you in"}):J.jsx("span",{children:r.lang=="no"?"Logg inn":"Sign in"})}),y!==""&&J.jsx("div",{className:"text-orange-500 text-sm error-msg",children:y}),w!==""&&J.jsx("div",{className:"text-orange-500 text-sm",children:w})]})})})})};function sP(){const[r,e]=q.useState("no"),[t,i]=q.useState(!1);return q.useEffect(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&i(!0)},[]),q.useEffect(()=>{t?document.body.classList.add("dark"):document.body.classList.remove("dark")},[t]),J.jsxs("div",{id:"app",className:"bg-slate-200 text-slate-950 dark:bg-slate-950 dark:text-slate-200 h-full w-full min-h-screen",children:[J.jsx("button",{className:"border-slate-950 dark:border-slate-200 hover:border-orange-500 dark:hover:border-orange-500 px-2 border-b-2 font-semibold transition focus:outline-none focus:border-orange-500 dark:focus:border-orange-500 absolute right-4 top-4",onClick:()=>{r=="en"?e("no"):e("en")},children:r=="en"?"Norsk":"English"}),J.jsx("button",{onClick:o=>{i(!t),o.target.blur()},tabIndex:0,className:"absolute right-4 bottom-4 h-8 w-8 flex items-center justify-center rounded-full bg-slate-950 text-slate-200 dark:bg-slate-200 dark:text-slate-950 focus-visible:bg-orange-500 dark:focus-visible:bg-orange-500 focus:outline-none",children:t?J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}):J.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})})}),J.jsx(uT,{children:J.jsxs(Uw,{children:[J.jsx(zd,{exact:!0,path:"/",element:J.jsx(rP,{lang:r})}),J.jsx(zd,{path:"/login",element:J.jsx(iP,{lang:r})})]})})]})}QE.createRoot(document.getElementById("root")).render(J.jsx(q.StrictMode,{children:J.jsx(sP,{})}));
